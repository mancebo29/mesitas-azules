/*! permutive-javascript-sdk v19.92.4 (web) (built 2023-07-06T19:05:15.115Z) */(()=>{"use strict";var __webpack_modules__={2688:(e,t,r)=>{function n(e){return e instanceof Error?e:new Error("string"==typeof e?e:JSON.stringify(e))}r.d(t,{w:()=>n})},787:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(3735),o=r(6567);function i(e){return(0,n.zG)((0,o.Y3)((()=>JSON.parse(e))),(0,o.fS)(n.gn))}},7183:(e,t,r)=>{r.d(t,{h:()=>n});const n=e=>new o(e);class o{constructor(e){const t=this;this._worker=e,this._callbacks={},this._id=0,e.addEventListener("message",(function(e){o.onMessage(t,e)}))}set id(e){this._id=e}get id(){return this._id}newId(){const e=this.id;return this.id=this.id+1,e}static onMessage(e,t){if(r=t.data,!(Array.isArray(r)&&r.length>=2))return;var r;const[n,o,i]=t.data,s=e._callbacks[n];s&&(delete e._callbacks[n],s(o,i))}static isServiceWorker(e){return void 0!==e.controller}postMessage(e){const t=this,r=this.newId(),n=[r,e];return new Promise((function(e,i){var s;if(t._callbacks[r]=function(t,r){if(t)return i(new Error(t.message));e(r)},o.isServiceWorker(t._worker)){const e=new MessageChannel;e.port1.onmessage=function(e){o.onMessage(t,e)},null===(s=t._worker.controller)||void 0===s||s.postMessage(n,[e.port2])}else t._worker.postMessage(n)}))}}},2851:(e,t,r)=>{r.d(t,{oQ:()=>D,a9:()=>g,Ue:()=>p,D8:()=>k,BT:()=>P,VS:()=>m,xH:()=>v,g_:()=>b,p4:()=>E,UI:()=>h,vP:()=>y,bw:()=>S,YP:()=>_});var n=r(2688),o=r(5e3),i=r(3735),s=r(6567),a=r(3328),u=r(2652);function c(e){let t=e,r=[],n=!1;return{addListener(e){if(n)return()=>{};let o=t;const i=()=>{Object.is(t,o)||(o=t,e(t))};r=[...r,i];return()=>{r=r.filter((e=>e!==i))}},notify(e){if(n)throw new Error("Ref bug: Attempted to notify a terminated notifier");Object.is(e,t)||(t=e,r.forEach((e=>e())))},terminate(){n=!0,r=[]}}}function d(e,t){let r=0;return function(){try{if(r++>0)throw new Error(e);return t(...arguments)}finally{r--}}}function l(e,t){let r=[...new Set(e)].filter((e=>"final"!==e.state));if(0===r.length)return{state:"final",onStateChange:()=>()=>{}};const n=()=>0===r.length?"final":r.some((e=>"might_change"===e.state))?"might_change":"nominal",[o,i]=f(n(),(e=>"might_change"!==e&&t())),s=()=>i(n());return r.forEach((t=>{t.onStateChange((t=>{switch(t){case"final":r=e.filter((e=>"final"!==e.state)),s();break;case"might_change":i("might_change");break;case"nominal":s();break;default:throw new Error(`Ref bug: Invalid state ${t}`)}}))})),o}function f(e,t){if("final"===e)return[{state:"final",onStateChange:()=>()=>{}},()=>{}];const{terminate:r,notify:n,addListener:o}=c(e),i={state:e,onStateChange:o},s=d("Disallowed recursion in Branch.",(e=>{if("final"===i.state){if("final"===e)return;throw new Error(`Attempted to change state of final branch to ${e}.`)}try{null==t||t(e),i.state=e,n(e)}finally{"final"===e&&r()}}));return[i,s]}function p(e){const[t,r,n]=function(){const[e,t]=f("nominal"),r=d("Disallowed recursion in Branch.",(r=>{if("final"===e.state)throw new Error("Attempted to mutate a finalized Ref.");const n=e.state;try{t("might_change"),r()}finally{t(n)}}));return[e,r,()=>t("final")]}(),[o,i]=M(t,e);return[o,e=>r((()=>i(e))),n]}function g(e){return{get current(){return e},onChange:()=>()=>{},branch:{state:"final",onStateChange:()=>()=>{}}}}function _(e){return t=>{const r=t.onChange(e);return e(t.current),r}}function h(e,t){if(t){const[r,n]=M(t.branch,e(t.current));return t.onChange((t=>n(e(t)))),r}return t=>h(e,t)}function m(e,t){return t?v(h(e,t)):t=>v(h(e,t))}function v(e){if("final"===e.branch.state)return e.current;const[t,r]=function(e,t){let r=t;const n=[e.state,r.state].includes("might_change")?"might_change":"nominal",[o,i]=f(n),s=e=>t=>{switch(t){case"final":i(e().state);break;case"might_change":i("might_change");break;case"nominal":"might_change"===e().state?i("might_change"):i("nominal");break;default:throw new Error(`Ref bug: Unexpected upstream state ${t}`)}};e.onStateChange(s((()=>r)));const a=s((()=>e));let u=r.onStateChange(a);return[o,e=>{r=e,u(),u=e.onStateChange(a),a(r.state)}]}(e.branch,e.current.branch),[n,o]=M(t,e.current.current);let i=e.current.onChange(o);return e.onChange((e=>{i(),i=e.onChange(o),r(e.branch),o(e.current)})),n}function b(e,t,r){if(!r)return r=>b(e,t,r);let n=e;return h((e=>(n=t(n,e),n)),r)}function y(){if(0===arguments.length||I(arguments.length<=0?void 0:arguments[0]))return w(...arguments);const e=arguments.length<=0?void 0:arguments[0],t=Object.keys(e);return(0,i.zG)(Object.values(e),(e=>w(...e)),h((0,i.ls)(a.Su(((e,r)=>[t[e],r])),Object.fromEntries)))}function w(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)return g([]);if(1===t.length)return h((e=>[e]))(t[0]);let n=!1;t.forEach((e=>e.onChange((()=>{if("might_change"!==e.branch.state)throw new Error("Ref bug: Received a change notification without a `might_change` state.");n=!0}))));const o=t.map((0,u.vg)("branch")),i=()=>{n&&(n=!1,c(t.map((e=>e.current))))},s=l(o,i),[a,c]=M(s,t.map((e=>e.current)));return a}function E(e){const[t,r,a]=p(s.YP);return e.then(o.F2).catch((0,i.ls)(n.w,o.t$)).then((0,i.ls)(s.G,r,a)),t}function k(e){const t=e.hasOwnProperty("equals")?e.equals:e;return function(e){return t=>{if("final"===t.branch.state)return t;let r=s.YP;return h((t=>{if(s.Wi(r))return r=s.G(t),t;const n=e(r.value,t);return r=s.G(n),n}),t)}}(((e,r)=>t(e,r)?e:r))}function P(e){return t=>{const[r,n]=function(e){const[t,r]=f(e.state),n=e.onStateChange(r);return[t,()=>{n(),r("final")}]}(t.branch),[o,a]=M(r,t.current);let u=s.G(t.onChange(a));return e((()=>(0,i.zG)(u,s.UI((e=>{u=s.YP,e(),n()}))))),o}}function D(e){return I(e)?e:g(e)}function S(e){return t=>(_(e)(t),t)}function M(e,t){if("final"===e.state)return[g(t),()=>{}];const r=c(t);e.onStateChange((e=>{"final"===e&&r.terminate()}));let n=t;return[{get current(){return n},onChange:r.addListener,branch:e},d("Disallowed recursion in Ref.",(e=>{n=e,r.notify(n)}))]}function I(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)&&"function"==typeof e.onChange}},2116:(e,t,r)=>{r.d(t,{K4:()=>u,UI:()=>l,VS:()=>p,YO:()=>h,ak:()=>_,bw:()=>f,dQ:()=>c,of:()=>d,vP:()=>g});var n=r(655),o=r(2851),i=r(3735),s=r(2652),a=r(4923);const u=e=>(0,i.ls)((t=>{var{previousState:r}=t,o=(0,n._T)(t,["previousState"]);return e(o)}),(e=>({value:e,state:o.a9(void 0)}))),c=i.yR,d=(0,i.ls)(i.a9,u),l=e=>t=>(0,i.ls)(t,(0,s.rO)({value:e})),f=e=>t=>(0,i.ls)(t,(0,s.rO)({value:(0,s.bw)(e)}));function p(e){return t=>r=>{var{previousState:i,onServiceStop:s}=r,a=(0,n._T)(r,["previousState","onServiceStop"]);const u=b(),c=t(Object.assign({previousState:Array.isArray(i)?i[0]:void 0,onServiceStop:u.onServiceStop},a)),d=b(),l=e(c.value)(Object.assign({previousState:Array.isArray(i)?i[1]:void 0,onServiceStop:d.onServiceStop},a));return s(u.stop),s(d.stop),{value:l.value,state:o.vP(c.state,l.state)}}}function g(e){return t=>{var{previousState:r}=t,s=(0,n._T)(t,["previousState"]);const u=v(r)?r:{},c=(0,i.zG)(e,a.Su(((e,t)=>t(Object.assign({previousState:u[e]},s)))));return{value:(0,i.zG)(c,a.UI((e=>e.value))),state:(0,i.zG)(c,a.UI((e=>e.state)),(e=>o.vP(e)))}}}function _(e,t){return r=>(0,i.ls)((0,s.rO)({previousState:m}),(s=>{var{onServiceStop:a}=s,u=(0,n._T)(s,["onServiceStop"]);const c=b(),d=r(Object.assign({onServiceStop:c.onServiceStop},u)),l=b(),f=t(d.value)(Object.assign(Object.assign({onServiceStop:l.onServiceStop},u),{previousState:u.previousState[e]}));return a(c.stop),a(l.stop),{value:(0,i.zG)([d.value,f.value],(t=>{let[r,n]=t;if(!v(r))throw new Error;return Object.assign(Object.assign({},r),{[e]:n})})),state:(0,i.zG)(o.vP(d.state,f.state),o.UI((t=>{let[r,n]=t;if(!v(r))throw new Error;return Object.assign(Object.assign({},r),{[e]:n})})))}}))}function h(e){return t=>(0,i.ls)((0,s.rO)({previousState:(0,i.ls)(m,(t=>t[e]))}),t,(0,s.rO)({value:t=>({[e]:t}),state:o.UI((t=>({[e]:t})))}))}function m(e){return v(e)?e:{}}function v(e){return"object"==typeof e&&null!==e}function b(){const e=[];return{stop:()=>{for(;e.length>0;)e.shift()()},onServiceStop:t=>e.push(t)}}},6967:(e,t,r)=>{r(2497),r(5165)},1540:(e,t,r)=>{r.d(t,{lg:()=>h,Bt:()=>m});var n=r(655),o=r(1500),i=r(3735),s=r(6567),a=r(2751),u=r(2652);class c{constructor(e,t,r,n){this.userId=e,this.network=t,this.api=r,this.logger=n,this.tag="appnexus",this.ttlInSeconds=86400,this.usedForThirdPartyData=!0,this.url="https://ib.adnxs.com/getuidj",this.invalidAliases=["","0","-1"]}getId(){return this.logger.debug("identities[appnexus]: start HTTP request"),(0,u.G6)(navigator.userAgent)?Promise.resolve({type:"skipped"}):this.api.appnexus(this.url).then((e=>(this.logger.debug("identities[appnexus]: end HTTP request"),{type:"attempted",result:(0,i.zG)((0,s.DT)((e=>this.isValidAlias(e.uid)))(e),(0,s.UI)((e=>e.uid)))})),(e=>({type:"attempted",result:s.YP})))}reset(){return Promise.resolve()}isValidAlias(e){return!!e&&-1===this.invalidAliases.indexOf(e)}}class d{constructor(e,t,r,n,o){this.config=e,this.network=t,this.api=r,this.userId=n,this.logger=o,this.tag="pxid",this.ttlInSeconds=86400,this.usedForThirdPartyData=!1,this.url=`https://867f8423-d142-4fd1-ae8d-1a9bbbdf2358.${this.config.pxidHost}/${this.config.apiVersion}/pxid`,this.resetUrl=this.url+"/reset"}getId(){return this.logger.debug("identities[pxid]: start HTTP request"),(0,u.G6)(navigator.userAgent)?Promise.resolve({type:"skipped"}):this.api.pxid(this.url).then((e=>(this.logger.debug("identities[pxid]: end HTTP request"),{type:"attempted",result:(0,s.ij)(e.uid)})),(e=>({type:"attempted",result:s.YP})))}reset(){return(0,u.G6)(navigator.userAgent)?Promise.resolve():this.api.pxidReset(this.resetUrl)}}const l=new Set(["public","email","email_md5","email_sha256","ip_address"]);var f=r(2851),p=r(4923),g=r(2197);const _=g.ff((e=>void 0===e));class h{constructor(e,t,r,n,o){this.metrics=e,this.trace=t,this.permutiveData=r,this.identityProviderEnv=n,this.logger=o,this.providers={};const s=this.getCachedIdentitiesAndMigrateIfRequired(),[u,c]=f.Ue(s);this.identityMapRef=u,this.setIdentityMap=c,u.onChange((e=>{this.logger.debug("[identities] Updating to",e),this.permutiveData.setData("identities",e)})),this.ref=(0,i.zG)(u,f.UI((0,i.ls)(p.UI((e=>e.value)),p.hX(_))),f.D8(p.Eh(a.Eq))),this.thirdParty=this.prepareThirdPartyIdentities()}get identities(){return this.identityMapRef.current}prepareThirdPartyIdentities(){this.logger.debug("[Identities]","loading 3rd party identities");const e=this.metrics.startTimer("sdk_get_third_party_identities_task_duration_seconds",{}),t=this.trace.startSpan("load_tpd_ids"),r=[{load:e=>{return t=e.config,r=e.network,n=e.api,o=e.userId,i=e.logger,(0,s.G)(new d(t,r,n,o,i));var t,r,n,o,i}},{load:e=>{return t=e.userId,r=e.network,n=e.api,o=e.logger,(0,s.G)(new c(t,r,n,o));var t,r,n,o}},{load:e=>(e.cookies,e.messages,s.YP)},{load:e=>(e.cookies,s.YP)},{load:e=>(e.metrics,e.permutiveData,e.permutive,e.messages,s.YP)}],n=(0,o.oA)(r.map((e=>e.load(this.identityProviderEnv)))).map((e=>this.shouldAskForNewIdentity(e)?this.retrieveIdentity(e):Promise.resolve((0,i.bc)(e,this.getCachedTPDIdentity(e.tag)))));return Promise.all(n).then((e=>e.map((e=>{let[t,r]=e;return this.providers[t.tag]=t,this.mapTPDIdentityIfPresent(t.tag,r,t.ttlInSeconds)})))).then((e=>this.setIdentities(e))).then((0,u.bw)((()=>{this.metrics.stopTimer("sdk_get_third_party_identities_task_duration_seconds",e),t.finish()})))}getPrioritizedIdentities(e){const t={default:0,pxid:1,appnexus:1},r=Object.entries(e).map((e=>{let[t,{id:r,expiry:n,priority:o}]=e;return Object.assign(Object.assign(Object.assign({tag:t},r?{id:r}:{}),n?{expiry:n}:{}),void 0!==o?{priority:o}:{})})),n=r.filter((e=>((e,t)=>!!e.id&&!(0,o.t9)(a.Eq)(e.tag,t))(e,Object.values(this.providers).map((e=>e.tag))))),i=r.filter((e=>((e,t)=>!!e.id&&!!(0,o.t9)(a.Eq)(e.tag,t))(e,Object.values(this.providers).map((e=>e.tag))))),u=(0,o.DZ)((e=>(0,s.ij)(e.priority)))(n),c=u.length>0?Math.max(...u):0,d=n.map((e=>void 0!==e.priority?Object.assign(Object.assign({},e),{priority:e.priority}):Object.assign(Object.assign({},e),{priority:c+1}))),l=i.map((e=>void 0===t[e.tag]?{tag:e.tag,id:e.id,priority:c+v}:{tag:e.tag,id:e.id,priority:c+b}));return d.concat(l)}getIdentitiesMap(){return this.getFilteredIdentities(((e,t)=>!!t.value))}parseCustomerDefinedIdentities(e){const t=`Identify must be passed a non-empty string or list of { tag, id, priority? } tuples, value passed was '${JSON.stringify(e)}'`,r=e=>{throw new Error(e)},n=e=>(e.forEach((e=>{(e=>"string"==typeof e.id&&"string"==typeof e.tag)(e)||r(t),(e=>"email_sha256"!==e.tag||h.emailSHA256Regex.test(e.id))(e)||r("Identify called with unsupported format of email_sha256 ID. The support format is hex-encoded 64 character long lowercase string.")})),e);return"string"==typeof e?(o=e).length>0?[{id:o,tag:"default"}]:r(t):Array.isArray(e)?n(e):r(t);var o}extractIdentifyFromQueue(e){let{global:t}=e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=()=>t.q.findIndex((e=>"identify"===e.functionName)),o=(e,r)=>{if(e<0)return r;const i=t.q.splice(e,1)[0],s=this.parseCustomerDefinedIdentities(i.arguments[0]);return o(n(),r.concat(s))};return o(n(),r)}setIdentities(e){const t=e.filter((e=>!l.has(e.tag))).reduce(((e,t)=>{let{tag:r,id:n,expiry:o,priority:i}=t;return void 0===this.identities[r]&&this.logger.debug(`identities[${r}]: added`),e[r]=Object.assign(Object.assign(Object.assign({},n?{value:n}:{}),o?{expiry:o}:{}),void 0!==i?{priority:i}:{}),e}),{}),r=this.ref.current;this.setIdentityMap(Object.assign(Object.assign({},this.identities),t));const n=this.ref.current;return{identifyRequestRequired:()=>!p.xb(n)&&!p.Eh(a.Eq).equals(r,n)}}reset(){return(0,n.mG)(this,void 0,void 0,(function*(){this.setIdentityMap({}),yield Promise.all(Object.values(this.providers).map((e=>e.reset())))}))}getFilteredIdentities(e){return(0,u.m8)(...Object.entries(this.identities).filter((t=>{let[r,n]=t;return e(r,n)})).map((e=>{let[t,{value:r,expiry:n,priority:o}]=e;return(0,i.bc)(t,Object.assign(Object.assign({id:r},n?{expiry:n}:{}),void 0!==o?{priority:o}:{}))})))}shouldAskForNewIdentity(e){var t;const r=(0,s.ij)(null===(t=this.identities)||void 0===t?void 0:t[e.tag]);return(0,s.g_)((()=>!0),this.isIdentityExpired)(r)}getCachedTPDIdentity(e){return this.identities[e]?(0,s.ij)(this.identities[e].value):s.YP}mapTPDIdentityIfPresent(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:86400;const n=()=>Date.now()+Math.floor(1e3*r);return(0,s.g_)((()=>({tag:e,expiry:n()})),(t=>({tag:e,id:t,expiry:n()})))(t)}retrieveIdentity(e){return e.getId().then((t=>"skipped"===t.type?(0,i.bc)(e,s.YP):(0,i.zG)(t.result,(t=>this.metrics.track({name:(0,s.pC)(t)?"sdk_third_party_identity_present_count":"sdk_third_party_identity_missing_count",value:1,labels:{identity_tag:e.tag}})),(r=>(0,i.bc)(e,t.result)))))}isIdentityExpired(e){return"number"==typeof e.expiry&&Date.now()>=e.expiry}getCachedIdentitiesAndMigrateIfRequired(){return(e=>(0,u.m8)(...Object.entries(e).filter((e=>{let[t,r]=e;return!this.isIdentityExpired(r)&&!l.has(t)}))))(this.permutiveData.getData("identities")||{})}}h.emailSHA256Regex=/^[a-f0-9]{64}$/;const m=(e,t,r,n,i)=>{const s=(e,t)=>{const r=["(null)"];return r.indexOf(e)>-1||!!w[e]||(0,o.jV)(a.Eq)(t,r).length>0},u=e=>"721d6d85-35f0-4e35-bb38-13eb0d465158"===e,c={"be668577-07f5-444d-98e0-222b990951b1":s,"e43c8a90-d17b-4790-bfda-81b069b3b8c2":(e,t,r)=>["thestudentroom.co.uk"].some((e=>r.indexOf(e)>-1))&&(0,o.jV)(a.Eq)(t,["tsr-"]).length>0,"5d79bce7-5d2b-427e-a6c4-b89b6c7bf048":s,"366ab8da-5efa-4355-ab00-84db3b68ded2":e=>"96539955-4d7e-40df-882b-7e2fbacedb1c"===e||"345600e7-fb5f-48b1-9aa6-cde5396419b0"===e,"f3a06674-ebb9-4b9d-ba8f-0052018c0687":u,"38dadd0d-257a-4641-b332-b8b0fd20a6cb":u,"10453011-272d-49cd-9043-1964fdb36fd8":e=>"936ba6ac-9a8b-454d-ba98-facebd7553fe"===e},d={"fe68d1f7-c9f4-45b3-8905-7cda73d3fd74":e=>!!y[e]},l=c[e]||d[t];return!!l&&l(i,r,n)},v=2,b=3,y={},w={}},7658:(e,t,r)=>{r.d(t,{z:()=>n});class n{ingestIfEligible(e){return Promise.resolve()}}},922:(e,t,r)=>{r.d(t,{CL:()=>l,D0:()=>o,ED:()=>i,EW:()=>f,MU:()=>h,PH:()=>d,UW:()=>_,Uy:()=>u,eV:()=>s,jH:()=>p,mL:()=>g,qr:()=>a,t2:()=>c});var n=r(9853);const o=(0,n.MU)("engagement_edge_only",!0),i=(0,n.MU)("segment_transition_edge_only",!0),s=(0,n.MU)("track_form_submission",!0),a=(0,n.MU)("track_link_click",!0),u=(0,n.MU)("track_pageview_complete",!0),c=(0,n.MU)("track_pageview_engagement",!0),d=((0,n.$S)("sync_segments_cookie",!1),(0,n.$S)("track_slot_clicked",!0)),l=(0,n.$S)("track_slot_rendered",!0),f=(0,n.$S)("track_slot_viewable",!1),p=(0,n.$S)("track_targeting_keys",!1),g="_psegs",_=!0,h=6e5},4673:(e,t,r)=>{r.d(t,{U:()=>n});const n={$ip_address:"$ip_address",$ip_address_hash:"$ip_address_hash",$ip_geo_info_city:"$ip_geo_info_city",$ip_geo_info_continent:"$ip_geo_info_continent",$ip_geo_info_country:"$ip_geo_info_country",$ip_geo_info_postal_code:"$ip_geo_info_postal_code",$ip_geo_info_province:"$ip_geo_info_province",$ip_isp_info_autonomous_system_organization:"$ip_isp_info_autonomous_system_organization",$ip_isp_info_isp:"$ip_isp_info_isp",$ip_isp_info_organization:"$ip_isp_info_organization"}},8975:(e,t,r)=>{r.d(t,{v:()=>i});class n{constructor(e,t,r,n,o,i,s){this.logger=e,this.permutive=t,this.id=r,this.segmentCode=n,this.triggerType=o,this.config=i,this.workspaceLevelConfig=s,this.prefix="[Activation]"}getSegmentCode(){return this.segmentCode}getTriggerType(){return this.triggerType}getConfig(){return this.config}getWorkspaceLevelConfig(){return this.workspaceLevelConfig}trackImpression(e){return this.trackActivation("impression",e)}trackConversion(e){return this.trackActivation("conversion",e)}trackActivation(e,t){const r={reaction_id:this.id,type:e};this.logger.warn(this.prefix,"Tracking is disabled",r)}}var o=r(9853);class i{constructor(e,t,r){this.logger=e,this.permutive=t,this.clientContext=r,this.optimisedActivationsConfig={dfp:{dfp:[139301,148080,149818,150141,154151,149597,150023,149811,149814,149944,149830,150002,149817,149600,155230,155232,155231,155233,155234,155235,155236,155237,155238,155239,149985,149947,150020,150017,157045,158131],dfp_legacy:{}},eyeota_pixel:[],dbm:{omitted:0},appnexus:{},appnexus_adserver:[],nativo:[],rubicon_ssp:[],smart:[],freewheel:[]}}getSpecializedActivations(e){return this.optimisedActivationsConfig[e]}getActivations(e){return(0,o.Hn)(e)("activationConfigs",[]).filter((e=>this.areContextCriteriaSatisfied(e))).map((e=>new n(this.logger,this.permutive,e.id,e.sc,e.tt,e.c,e.wc)))}areContextCriteriaSatisfied(e){const t=e.cc,r=e=>{const t=this.clientContext.getContext()[e.key];switch(e.comparison){case"EQUALS":return t===e.value;case"NOT_EQUALS":return t!==e.value;case"CONTAINS":return"string"==typeof t&&t.indexOf(e.value)>=0;case"NOT_CONTAINS":return"string"==typeof t&&t.indexOf(e.value)<0}};return!t||("AND"===(n=t).operator?n.criteria.every(r):n.criteria.some(r));var n}}},9853:(e,t,r)=>{r.d(t,{$S:()=>s,Hn:()=>o,MU:()=>i});const n={dfp:{auto_init:!0,networks:[{network_code:"133919216",name:"La Nacion"}],track_slot_rendered:!1,track_slot_viewable:!0,track_slot_clicked:!0,activationConfigs:[]},prebid:{auto_init:!0,revenue_insights_enabled:!0,data_provider_config:{ac_bidders:[]},activationConfigs:[]},web:{auto_init:!1,track_pageview_engagement:!0,track_form_submission:!1,track_link_click:!0,track_pageview_complete:!0,add_alchemy_taxonomy:!1,add_alchemy_entities:!1,engagement_edge_only:!0,segment_transition_edge_only:!0,activationConfigs:[]}},o=e=>{const t=n[e];return(e,r)=>{var n;return null!==(n=null==t?void 0:t[e])&&void 0!==n?n:r}},i=o("web"),s=o("dfp");o("facebook_pixel_v2")},2836:(e,t,r)=>{r.d(t,{z:()=>i});var n=r(3030);class o{constructor(e){this.context=e}getContext(){return this.context}updateContext(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t.forEach((e=>{let[t,r]=e;this.context[t]=r}))}}class i extends o{constructor(e){super(e)}getClient(){var e;const t=null!==(e=document.title)&&void 0!==e?e:"";return Promise.resolve({type:"web",user_agent:navigator.userAgent||"",url:(0,n.bk)(window.location.href),domain:window.location.hostname||"",title:t,referrer:(0,n.bk)(document.referrer)})}}},389:(e,t,r)=>{r.d(t,{p:()=>i});var n=r(3577);const o="permutive-pvc";class i extends((0,n.h)(o)){constructor(e){super(e)}}},5865:(e,t,r)=>{r.d(t,{J:()=>o});var n=r(3577);class o extends((0,n.h)("permutive-unprocessed-pba")){constructor(e){super(e)}}},3577:(e,t,r)=>{r.d(t,{h:()=>a});var n=r(3735),o=r(6567),i=r(7554);const s=e=>t=>class extends t{constructor(){super(...arguments),this.key=e}put(e){return this.db.then((t=>t.put(e,this.key))).then(n.Q1)}getIfPresent(){return this.db.then((e=>e.get(this.key))).then(o.ij)}reset(){return this.db.then((e=>e.delete(this.key)))}},a=e=>(0,n.zG)(class{constructor(e){this.db=Promise.resolve((0,i.E)(e.namespace,e.logger,e.consentTracking))}},s(e))},5700:(e,t,r)=>{r.d(t,{LP:()=>i,dG:()=>n,eP:()=>o});const n=4096,o=`Cookie exceeds maximum supported size of ${n} bytes for most browsers.`,i="Cookie is missing required parameters."},5461:(e,t,r)=>{r.d(t,{S:()=>u});var n=r(3735),o=r(5700);class i{constructor(e,t,r){this.namespace=e,this.config=t,this.logger=r}setCookie(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var n;if(!(t&&e&&this.config.cookieExpiry&&this.config.cookieDomain)){const{cookieExpiry:r,cookieDomain:i}=null!==(n=this.config)&&void 0!==n?n:{};throw this.logger.warn(`Unable to set cookie. ${o.LP}`,{value:t,cookieName:e,cookieExpiry:r,cookieDomain:i}),new Error(o.LP)}const i=this.namespace.getNamespacedStorageKey(e),s=[encodeURIComponent(i),"=",encodeURIComponent(t),"; expires=",this.config.cookieExpiry,"; domain=",this.config.cookieDomain,"; path=/",r?"; samesite=none; secure":""].join("");if(s.length>o.dG)throw this.logger.warn(`Unable to set cookie ${i}. ${o.eP}`),new Error(o.eP);return this.logger.debug(`Setting cookie ${s}`),document.cookie=s,!0}getCookie(e){const t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?e:this.namespace.getNamespacedStorageKey(e),r=new RegExp("\\b"+encodeURIComponent(t)+"=([^;]+)").exec(document.cookie);return null!==r?decodeURIComponent(r[1]):null}deleteCookie(e){if(!e||!this.config.cookieDomain)return!1;const t=this.namespace.getNamespacedStorageKey(e);return document.cookie=encodeURIComponent(t)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; domain="+this.config.cookieDomain+"; path=/",!0}}var s=r(4769);const a=e=>{const{logger:t,consentTracking:r}=e,n=e=>(t.debug(`Cookie: Failed to set cookie ${e} as consent is revoked`),!1);return e=>class extends e{constructor(){super(...arguments),this.setCookie=(0,s.v)(super.setCookie.bind(this),n,r.isRevoked)}}},u=(e,t,r,o)=>new((0,n.zG)(i,a({consentTracking:o,logger:r})))(e,t,r)},9773:(e,t,r)=>{r.d(t,{S:()=>d});var n=r(3735),o=r(2688),i=r(787),s=r(5e3);class a{constructor(e){this.namespace=e}getExternalData(e){const t=this.namespace.getNamespacedStorageKey(e);return window.localStorage.getItem(t)}getExternalJsonData(e){const t=this.getExternalData(e);return null===t?null:(0,i.A)(t)}setExternalData(e,t){const r=this.namespace.getNamespacedStorageKey(e);try{window.localStorage.setItem(r,t)}catch(e){}}setExternalJsonData(e,t){return(0,n.zG)((r=t,(0,s.Y3)((function(){var e=JSON.stringify(r);if("string"!=typeof e)throw new Error("Converting unsupported structure to JSON");return e}),n.yR)),(0,s.UI)((t=>this.setExternalData(e,t))),(0,s.g_)((e=>{throw(0,o.w)(e)}),n.Q1));var r}removeExternalData(e){const t=this.namespace.getNamespacedStorageKey(e);window.localStorage.removeItem(t)}}var u=r(4769);const c=e=>{const{logger:t,consentTracking:r}=e,n=e=>{t.debug(`External Data: Failed to set key ${e} as consent is revoked`)},o=n,i=n;return e=>class extends e{constructor(){super(...arguments),this.setExternalData=(0,u.v)(super.setExternalData.bind(this),o,r.isRevoked),this.setExternalJsonData=(0,u.v)(super.setExternalJsonData.bind(this),i,r.isRevoked)}}},d=(e,t,r)=>new((0,n.zG)(a,c({consentTracking:r,logger:t})))(e)},342:(e,t,r)=>{r.d(t,{SX:()=>i});class n{constructor(){this.prefix="[Permutive]",this.debugStyle=["color: blue"].join(";")}log(){return console.log.bind(window.console,this.prefix)(...arguments)}debug(){return console.debug.bind(window.console,"%c%s",this.debugStyle,this.prefix)(...arguments)}warn(){return console.warn.bind(window.console,this.prefix)(...arguments)}error(){return console.error.bind(window.console,this.prefix)(...arguments)}}class o{log(){}debug(){}warn(){}error(){}}const i=e=>{var t;return e.loggingEnabled&&void 0!==(null===(t=window.console)||void 0===t?void 0:t.log)?new n:new o}},8491:(e,t,r)=>{r.d(t,{Q:()=>i});var n=r(3735);const o="[MESSAGES]";class i{constructor(e){this.logger=e,this.messageListenerMap={},this.replayQueue={},this.onceTracker={},this.defaultMessageOptions={withReplay:!1,once:!1}}on(e,t,r){const n=this.mergeMessageOptions(r);n.withReplay&&this.processReplayQueue(e,t);const o=s(e,this.messageListenerMap).push(t)-1;return n.once&&this.addToOnceTracker(e,o),o}once(e,t){return this.on(e,t,{once:!0})}off(e,t){if(null==t)return this.messageListenerMap[e]=[],void(this.replayQueue[e]=[]);t<0?this.logError('Index for "off" fell out of range',{index:t}):s(e,this.messageListenerMap)[t]=n.Q1}emit(e,t,r){const n=this.mergeMessageOptions(r);s(e,this.messageListenerMap).length>0?(this.logDebug(`Emitting Event: ${e}`),this.emitMessageWithPayload(e,t)):n.withReplay&&this.addToReplayQueue(e,t)}addToReplayQueue(e,t){s(e,this.replayQueue).push(t)}processReplayQueue(e,t){var r;null===(r=this.replayQueue[e])||void 0===r||r.forEach((e=>t(e)))}emitMessageWithPayload(e,t){var r;null===(r=this.messageListenerMap[e])||void 0===r||r.forEach(((r,n)=>{r(t),this.removeListenerIfSetToFireOnlyOnce(e,n)}))}addToOnceTracker(e,t){s(e,this.onceTracker).push(t)}removeListenerIfSetToFireOnlyOnce(e,t){var r;(null===(r=this.onceTracker[e])||void 0===r?void 0:r.includes(t))&&this.off(e,t)}mergeMessageOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(Object.assign({},this.defaultMessageOptions),e)}logError(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.error(o,...t)}logDebug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.debug(o,...t)}}const s=(e,t)=>{var r;return null!==(r=t[e])&&void 0!==r?r:t[e]=[]}},5619:(e,t,r)=>{r.d(t,{Eq:()=>d,X:()=>l,b:()=>c});var n=r(2851),o=r(2116),i=r(4268),s=r(2751),a=r(4011),u=r(3735);const c=()=>({environment:"",events_count:0,os:"",sdk_version:"",segments_count:0,session_count:0,session_init_count:0,session_view_count:0}),d=i.n_({environment:s.Eq,events_count:a.Eq,os:s.Eq,sdk_version:s.Eq,segments_count:a.Eq,session_count:a.Eq,session_init_count:a.Eq,session_view_count:a.Eq}),l=e=>{const t=p(e.userId),r=(0,u.zG)(n.vP(e.userId,e.sessionId),n.UI((e=>{let[t,r]=e;return`${t},${r}`})),p),i=String(Math.random()),s={environment:"web",events_count:0,os:f(window.navigator.userAgent||""),sdk_version:"v19.92.4",segments_count:0};return(0,u.zG)(o.vP({session_count:t(e.sessionId),session_init_count:r(n.a9(i)),session_view_count:r(e.viewId)}),o.UI((0,u.ls)((e=>n.vP(e)),n.UI((e=>Object.assign(Object.assign({},s),e))))))},f=e=>{const t=e.toLowerCase();return t.includes("windows")?"windows":t.includes("iphone")||t.includes("ipad")?"ios":t.includes("android")?"android":t.includes("macintosh")?"macos":t.includes("linux")?"linux":"unknown"},p=e=>t=>o.dQ((r=>{let{previousState:o}=r;const c=(0,u.zG)(n.vP(e,t),n.g_(function(e){if(null!==e&&"object"==typeof e&&"scope"in e&&"lastValue"in e&&"count"in e)return e;return{scope:"",lastValue:"",count:1}}(o),((e,t)=>{let[r,n]=t;return{scope:r,lastValue:n,count:r!==e.scope?1:n!==e.lastValue?e.count+1:e.count}})),n.D8(i.n_({scope:s.Eq,lastValue:s.Eq,count:a.Eq})));return{state:c,value:(0,u.zG)(c,n.UI((e=>e.count)))}}))},7594:(e,t,r)=>{r.d(t,{p:()=>P});var n=r(655),o=r(2688),i=r(3735),s=(r(7341),r(9384)),a=function(e,t){return function(){return t(e())}},u=function(e){return function(t){return a(t,e)}},c=i.a9,d=(i.yR,i.yR,s.F4,s.Xl,function(){return Math.random()});function l(e,t){return(0,i.zG)(d,u((function(r){return Math.floor((t-e+1)*r+e)})))}u((function(e){return e<.5}));var f=r(7927),p=r(4673),g=r(2652),_=r(5619),h=r(3328),m=r(7241),v=r(4268);function b(e){return e[0]}function y(e){return e[1]}var w=function(e){return function(t){return[e(b(t)),y(t)]}},E=r(6934),k=r(5151);const P=e=>{let t=[];const r=e=>{t=[...t,...e]},s=t=>{(0,i.zG)(e.metrics.consume(),D(t),r)};let a=e.context.current;e.context.onChange((e=>{s(a),a=e}));const u="[Metrics Reporter]",c=t=>(0,i.zG)({},(0,i.ls)((0,f.dx)("continent",p.U.$ip_geo_info_continent),(t=>e.enrichers.enrich(t,!0).output)),(e=>Object.assign(Object.assign({},t),e))),d=d=>{let{beacon:l}=d;s(a);const f=t;t=[];const p=(0,i.zG)(f,m.ru((0,i.zG)(v.Uz((e=>e[0]))(_.Eq))),h.UI((0,i.ls)(m.Ri,w((0,i.ls)(m.YM,c)))),k.uU((t=>{let[r,i]=t;return E.Y3((()=>((t,r)=>(0,n.mG)(void 0,void 0,void 0,(function*(){if(!t)return e.api.metrics(r);if(!e.api.metricsBeacon(r))throw new Error("Failed to send beacon.")})))(l,{context:r,items:i})),(t=>(function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];e.logger.error(u,...r)}(`Failed to publish metrics ${(0,o.w)(t).message}`,i),D(r)(i))))})),k.UI((0,i.ls)(h.bj,h.xH,(0,g.bw)(r),h.xb)));return p()};e.messages.on("permutive:ready",(()=>{const e=l(3e4,9e4),t=r=>window.setTimeout((()=>(0,n.mG)(void 0,void 0,void 0,(function*(){const r=(yield d({beacon:!1}))?5e3:e();t(r)}))),r);t(5e3),(0,g.aq)((()=>setTimeout((()=>d({beacon:!0})),0)))}))},D=e=>t=>(0,i.zG)(t,h.UI((t=>[e,t])))},4074:(e,t,r)=>{function n(e,t,r,n,s){var a;return(null!==(a=r.getData("metricsEnabled"))&&void 0!==a?a:(()=>{const e=Math.random()<=t.metricsSamplingPercentage/100;return r.setData("metricsEnabled",e),e})())?new o(e,n,s):new i}r.d(t,{g:()=>n});class o{constructor(e,t,r){this.sdkInitTimestamp=e,this.messages=t,this.logger=r,this.prefix="[Metrics]",this.pendingMetrics=[],this.pendingTimers={},this.track({name:"sdk_initialisation_start_time_seconds",value:e/1e3,labels:{}})}consume(){const e=this.pendingMetrics;return this.pendingMetrics=[],e}track(e){this.logDebug(`Tracking ${e.name}`,{metric:e}),this.pendingMetrics.push(e)}trackTimeSinceInit(e,t){const r=(performance.now()-this.sdkInitTimestamp)/1e3;this.logDebug("timer stopped",e,r),this.track({name:e,value:r,labels:t})}startTimer(e,t){const r=performance.now(),n=this.generateRandomKey(e);return this.pendingTimers[n]={startTime:r,labels:t},n}stopTimer(e,t){const r=this.pendingTimers[t];if(r){const n=(performance.now()-r.startTime)/1e3;this.logDebug("timer stopped",e,n),this.track({name:e,value:n,labels:r.labels}),delete this.pendingTimers[t]}}generateRandomKey(e){return`${e}-${[...Array(24)].map((()=>Math.random().toString(36)[2])).join("")}`}logDebug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.debug(this.prefix,...t)}}class i{consume(){return[]}track(e){}trackTimeSinceInit(e,t){}startTimer(e,t){return""}stopTimer(e,t){}}},8317:(e,t,r)=>{r.d(t,{S:()=>s});var n=r(655),o=r(3735),i=r(2652);class s{constructor(e,t){this.db=e,this.options=t}getSessionId(){return this.options.session_id}sessionHasChanged(){return this.options.hasChanged}static decodeSessionData(e){return e&&"object"==typeof e&&e.hasOwnProperty("session_id")&&e.hasOwnProperty("last_updated")?Object.assign(Object.assign({},e),{last_updated:new Date(e.last_updated)}):null}reset(){return this.db.delete(this.options.session_data_key)}persistSessionData(e){return(0,n.mG)(this,void 0,void 0,(function*(){const t=e.last_updated.toISOString();yield this.db.put(Object.assign(Object.assign({},e),{last_updated:t}),this.options.session_data_key)}))}static generateNewSession(e){return{session_id:(0,i.k$)(),last_updated:e}}static hasExpired(e,t,r){if(isNaN(t.getTime()))return!0;return e>new Date(t.getTime()+1e3*r)}static initialise(e,t,r){return(0,n.mG)(this,void 0,void 0,(function*(){const n={timeout_seconds:1800,session_data_key:"permutive-session",hasChanged:!1,logger:r};e.deleteCookie(n.session_data_key);const a=new Date,u=yield t.get(n.session_data_key).catch(o.gn),c=s.decodeSessionData(u),d=null===c||s.hasExpired(a,c.last_updated,n.timeout_seconds)?Object.assign(Object.assign({},s.generateNewSession(a)),{hasChanged:!0}):Object.assign(Object.assign({},c),{last_updated:a,hasChanged:!1}),l=new s(t,(0,i.PM)(n,d));return yield l.persistSessionData(d),l}))}}},4026:(e,t,r)=>{r.d(t,{S:()=>m});var n=r(3735),o=r(2688),i=r(787),s=r(5e3),a=r(2652),u=r(4730),c=r(926);class d{constructor(e,t,r){this.config=e,this.namespace=t,this.logger=r,this.prefix="[Data Store]",this.permutiveData={},this.permutiveDataSize=0,this.localStorageQueue=new Set,this.localStorageScheduler=new u.b(e.localStorageWriteDelay,e.localStorageWriteMaxDelay),this.debouncedFlush=this.localStorageScheduler.schedule(this.flushLocalStorageQueue.bind(this)),this.debouncedStorageKeys=new Set(e.localStorageDebouncedKeys),this.localStorageScheduler.scheduleForPageUnload(this.flushLocalStorageQueue.bind(this)),this.permutiveData=this.buildData()}reset(){this.permutiveData={}}getDataSize(){return this.permutiveDataSize}getData(e){return this.permutiveData[e]}setData(e,t){this.permutiveData[e]=t,this.requestWrite(e)}deleteKey(e){delete this.permutiveData[e],this.requestWrite(e)}requestWrite(e){this.debouncedStorageKeys.has(e)?(this.localStorageQueue.add(e),this.debouncedFlush()):this.writeData(e)}flushLocalStorageQueue(){for(let e of this.localStorageQueue)this.writeData(e);this.localStorageQueue.clear()}buildData(){return Object.assign(Object.assign(Object.assign(Object.assign({},this.getDataChunk("misc")),this.getDataChunk("models")),this.getDataChunk("queries")),this.getDataChunk("enrichers"))}getDataChunk(e){const t=this.namespace.getNamespacedStorageKey(this.chunkKeyToStorageKey(e)),r=window.localStorage.getItem(t),n=null===r?null:(0,i.A)(r);return r&&n?(this.permutiveDataSize+=2*r.length,n):{}}chunkKeyToStorageKey(e){switch(e){case"models":return this.config.permutiveDataModelsKey;case"queries":return this.config.permutiveDataQueriesKey;case"enrichers":return this.config.permutiveDataEnrichersKey;case"misc":return this.config.permutiveDataMiscKey;default:throw new Error(`Unhandled chunk key "${e}"`)}}writeData(e){this.logger.debug(`Data Store: Writing ${e} to localStorage`);const[t,r]=this.dataKeyToChunkInfo(e);return s.Y3((()=>window.localStorage.setItem(this.namespace.getNamespacedStorageKey(t),JSON.stringify(r))),(t=>{const r=(0,o.w)(t);return this.logError(`Failed to set ${e}. Got ${r}`),r}))}dataKeyToChunkInfo(e){const t=e=>(0,a.eu)(this.permutiveData,e);switch(e){case"models_data":case"models_last_updated":return[this.chunkKeyToStorageKey("models"),t(l)];case"query_states":case"internal_query_states":case"external_query_states":case"state_offset":case"event-source-id":return[this.chunkKeyToStorageKey("queries"),t(f)];case"enricher:geoip":return[this.chunkKeyToStorageKey("enrichers"),t(p)];case c.Kd:case"identities":case"amp_ready":case"metricsEnabled":case"addon:tradedesk":case"addon:tracking_pixel":case"addon:eyeota_pixel":case"addon:pinterest_pixel":case"addon:facebook_pixel_v2":case"addon:appnexus":case"addon:ddp":case"addon:gigya":case"addon:neustar_fabrick":case"pubmatic":case"lotame":return[this.chunkKeyToStorageKey("misc"),t(g)];default:throw new Error(`Unhandled data key "${e}"`)}}logError(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.error(this.prefix,...t)}}const l=["models_data","models_last_updated"],f=["query_states","internal_query_states","external_query_states","state_offset","event-source-id"],p=["enricher:geoip"],g=[c.Kd,"identities","amp_ready","metricsEnabled","addon:tradedesk","addon:tracking_pixel","addon:eyeota_pixel","addon:pinterest_pixel","addon:facebook_pixel_v2","addon:appnexus","addon:ddp","addon:gigya","addon:neustar_fabrick","pubmatic","lotame"];var _=r(4769);const h=e=>{const{logger:t,consentTracking:r}=e,n=e=>(t.debug(`Data Store: Failed to write ${e} as consent is revoked`),s.F2(void 0));return e=>class extends e{constructor(){super(...arguments),this.writeData=(0,_.v)(super.writeData.bind(this),n,r.isRevoked)}}},m=(e,t,r,o)=>new((0,n.zG)(d,h({consentTracking:o,logger:r})))(e,t,r)},569:(e,t,r)=>{r.d(t,{L:()=>n});class n{constructor(e){this.config=e}getNamespacedStorageKey(e){return`${this.config.stateNamespace}${e}`}}},7575:(e,t,r)=>{r.d(t,{u:()=>n});class n{constructor(e,t){this.metrics=e,this.messages=t,this._isRealtime=!1,this._isReady=!1}isRealtime(){return this._isRealtime}isReady(){return this._isReady}setAsRealtime(e){this._isRealtime=!0,this.messages.emit("permutive:realtime"),this.metrics.trackTimeSinceInit("sdk_realtime_targeting_set_task_duration_seconds",{}),this.metrics.track({name:"sdk_user_segments_count",value:e,labels:{}})}setAsReady(){this._isReady=!0,this.messages.emit("permutive:ready"),this.metrics.trackTimeSinceInit("sdk_initialisation_task_duration_seconds",{}),window.performance&&window.performance.memory&&(this.metrics.track({name:"sdk_heap_memory_bytes_used",value:window.performance.memory.usedJSHeapSize,labels:{}}),this.metrics.track({name:"sdk_heap_memory_limit_fraction_used",value:window.performance.memory.usedJSHeapSize/window.performance.memory.jsHeapSizeLimit,labels:{}}))}}},7256:(e,t,r)=>{r.d(t,{a:()=>s});var n=r(655),o=r(3735),i=r(7927);class s{constructor(e,t,r,n,o,i,s){this.config=e,this.localStorage=t,this.logger=r,this.permutiveData=n,this.eventSourceId=o,this.cookies=i,this.externalData=s}reset(){return(0,n.mG)(this,void 0,void 0,(function*(){return this.logger.log("Resetting State"),(0,o.zG)(this.cookies.deleteCookie(this.config.cookieName),(e=>this.externalData.removeExternalData(this.config.cookieName)),(e=>(0,i.XP)({_paols:!0,_papns:!0,_pcrdbs:!0,_pcrprs:!0,_pdfps:!0,_pfws:!0,_pnativo:!0,_prps:!0,_prubicons:!0,_psegs:!0,_psmart:!0,"permutive-id":!0,"permutive-loaded":!0,"permutive-prebid-rtd":!0,"permutive-events-cache":!0,_pssps:!0}).forEach((e=>this.externalData.removeExternalData(e)))),(e=>this.permutiveData.reset()),(e=>this.eventSourceId.generateAndSet()),(e=>Promise.all([this.localStorage.delete(this.config.permutiveDataModelsKey),this.localStorage.delete(this.config.permutiveDataQueriesKey),this.localStorage.delete(this.config.permutiveDataEnrichersKey),this.localStorage.delete(this.config.permutiveDataMiscKey)])),o.Q1)}))}}},7274:(e,t,r)=>{r.d(t,{u:()=>n});class n{constructor(e,t,r,n,o){this.permutiveData=e,this.permutiveReset=t,this.userId=r,this.viewId=n,this.eventCollection=o}getPermutiveData(e){return this.permutiveData.getData(e)}setPermutiveData(e,t){return this.permutiveData.setData(e,t)}getStateSizeInBytes(){return this.permutiveData.getDataSize()+this.eventCollection.getStateSizeInBytes()}reset(){return this.permutiveReset.reset()}}},9117:(e,t,r)=>{r.d(t,{M:()=>a});var n=r(3735),o=r(6567),i=r(2851),s=r(2652);class a{constructor(e,t,r,o){this.config=e,this.clientContext=t,this.cookies=r,this.externalData=o;const[s,a]=i.Ue(this.getOrGenerateUserId());this.ref=s,this.setUserId=a,(0,n.zG)(s,i.YP((e=>{this.cookies.setCookie(this.config.cookieName,e,!0),this.externalData.setExternalData(this.config.cookieName,e),this.clientContext.updateContext(["user_id",e])})))}isEqual(e){return this.ref.current===e}get(){return this.ref.current}set(e){this.setUserId(e)}getOrGenerateUserId(){return(0,o.fS)((()=>(0,o.fS)(s.k$)(this.getUserIdFromLocalStorage())))(this.getUserIdFromCookie())}getUserIdFromCookie(){return this.getUserIdFromStorageIfValid("cookie")}getUserIdFromLocalStorage(){return this.getUserIdFromStorageIfValid("localStorage")}getUserIdFromStorageIfValid(e){const t=(0,o.DT)(s.Gz);return(0,n.zG)("cookie"===e?this.cookies.getCookie(this.config.cookieName):this.externalData.getExternalData(this.config.cookieName),o.ij,(0,o.tS)(t))}}},9880:(e,t,r)=>{r.d(t,{W:()=>i});var n=r(2851),o=r(2652);class i{constructor(e){this.config=e;const t=e.viewId&&(0,o.Gz)(e.viewId)?e.viewId:(0,o.k$)(),[r,i]=n.Ue(t);this.ref=r,this.set=i}get(){return this.ref.current}generateAndSet(){const e=(0,o.k$)();return this.set(e),e}}},7554:(e,t,r)=>{r.d(t,{E:()=>o});var n=r(8259);const o=(e,t,r)=>{const o=window.localStorage;return(0,n.rK)(o,"[Local Storage]",e,t,r)}},9332:(e,t,r)=>{r.d(t,{u:()=>o});r(6640);var n=r(8259);const o=(e,t,r)=>{const o=window.sessionStorage;return(0,n.rK)(o,"[Session Storage]",e,t,r)}},8259:(e,t,r)=>{r.d(t,{_z:()=>d,oP:()=>c,rK:()=>f});var n=r(655),o=r(2688),i=r(787),s=r(5e3),a=r(3735),u=r(4769);class c{constructor(e,t){this.storage=e,this.namespace=t}put(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){const r=this.namespace.getNamespacedStorageKey(t.toString());return this.storage.setItem(r,JSON.stringify(e)),t}))}get(e){return(0,n.mG)(this,void 0,void 0,(function*(){const t=this.namespace.getNamespacedStorageKey(e.toString()),r=this.storage.getItem(t);return null===r?null:(0,i.A)(r)}))}delete(e){return(0,n.mG)(this,void 0,void 0,(function*(){const t=this.namespace.getNamespacedStorageKey(e.toString());this.storage.removeItem(t)}))}deleteStore(){return(0,n.mG)(this,void 0,void 0,(function*(){}))}}const d=e=>{const{logger:t,consentTracking:r,prefix:n}=e,o=(e,r)=>(t.debug(`${n} Failed to write ${String(r)} as consent is revoked`),Promise.resolve(r));return e=>class extends e{constructor(){super(...arguments),this.put=(0,u.v)(super.put.bind(this),o,r.isRevoked)}}},l=e=>{const{logger:t,prefix:r,storage:i}=e;return e=>class extends e{constructor(){super(...arguments),this.isSupported=null}isStorageSupported(){return null!==this.isSupported||(this.isSupported=s.Y3((()=>{const e="_permutive_ls_test";return i.setItem(e,e),i.getItem(e),i.removeItem(e),!0}),o.w),(0,a.zG)(this.isSupported,s.EQ((e=>{t.warn(`${r} Is NOT supported`,e)}),(()=>{t.debug(`${r} Is supported`)})))),this.isSupported}put(e,t){const r=Object.create(null,{put:{get:()=>super.put}});return(0,n.mG)(this,void 0,void 0,(function*(){return(0,a.zG)(this.isStorageSupported(),s.EQ((e=>{throw e}),(()=>r.put.call(this,e,t))))}))}get(e){const t=Object.create(null,{get:{get:()=>super.get}});return(0,n.mG)(this,void 0,void 0,(function*(){return(0,a.zG)(this.isStorageSupported(),s.EQ((()=>null),(()=>t.get.call(this,e))))}))}delete(e){const t=Object.create(null,{delete:{get:()=>super.delete}});return(0,n.mG)(this,void 0,void 0,(function*(){return(0,a.zG)(this.isStorageSupported(),s.EQ(a.Q1,(()=>t.delete.call(this,e))))}))}deleteStore(){const e=Object.create(null,{deleteStore:{get:()=>super.deleteStore}});return(0,n.mG)(this,void 0,void 0,(function*(){return(0,a.zG)(this.isStorageSupported(),s.EQ(a.Q1,(()=>e.deleteStore.call(this))))}))}}},f=(e,t,r,n,o)=>new((0,a.zG)(c,l({logger:n,prefix:t,storage:e}),d({logger:n,consentTracking:o,prefix:t})))(e,r)},2497:(e,t,r)=>{r.d(t,{Ec:()=>s,_8:()=>i});var n=r(6567),o=r(2652);const i=e=>{const t=e.__tcfapi,r={type:"aborted"},i=["tcloaded","useractioncomplete"];return t?(0,o.a4)((()=>a(t,"getTCData")),(()=>a(t,"getTCData").then((e=>"loaded"===(null==e?void 0:e.cmpStatus)&&i.includes(null==e?void 0:e.eventStatus))))).then((0,n.g_)((()=>r),(e=>({type:"loaded",data:e})))):Promise.resolve({type:"missing"})},s=e=>e.gdprApplies?(0,n.G)(e.vendor.consents):n.YP,a=(e,t)=>new Promise((r=>{e(t,2,(e=>{r(e)}))}))},5165:(e,t,r)=>{r.d(t,{D:()=>n});const n={tradedesk:21,ddp:755,appnexus:32,pubmatic:76,neustar_fabrick:468}},6037:(e,t,r)=>{r.d(t,{C:()=>u});var n=r(655),o=r(1500),i=r(3735);const s=(a=[[{name:"dfp",import:Promise.resolve().then(r.bind(r,4388))}],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[{name:"prebid",import:Promise.resolve().then(r.bind(r,9581))}],[],[],[],[],[],[],[],[],[{name:"web",import:Promise.resolve().then(r.bind(r,4400))}],[],[],[]],(0,i.zG)((0,o.xH)(a),(0,o.u4)({},((e,t)=>Object.assign(Object.assign({},e),{[t.name]:t.import})))));var a;const u=e=>{const t=Object.entries(s).map((t=>{let[r,o]=t;return(0,n.mG)(void 0,void 0,void 0,(function*(){return e.logger.log(`Loading addon ${r}`),(yield o).load(e)}))}));return Promise.all(t)}},9658:(e,t,r)=>{r.r(t),r.d(t,{createAddon:()=>k,getCachedDFPSegments:()=>w});var n=r(655),o=r(2688),i=r(5e3),s=r(3735),a=r(6567),u=r(2851),c=r(9853),d=r(2652);const l="_pdfps";r(5700);var f=r(1500),p=r(2751);let g=!1;let _=null;const h=(e,t)=>{const{logger:r}=t;(0,s.zG)(e,a.UI((e=>{!0!==g&&e.pubadsReady&&(null!=_||(_=n=>{let{slot:o}=n;const{getContentUrl:i}=o;if(!i||"function"!=typeof i)return;(0,s.zG)(i(),(0,p.pn)("&trunc=1"))&&(r.debug("DFP content URL has been truncated!"),(e=>{let{metrics:t,logger:r}=e;g||(t.track({name:"sdk_targeting_size_limit_exceeded_count",value:1,labels:{target:"dfp"}}),g=!0,r.debug("DFP has exceeded targeting limit"))})(t),_&&e.pubads().removeEventListener("slotRenderEnded",_),_=null)}),e.pubads().addEventListener("slotRenderEnded",_))})))},m=(e,t,r,n)=>{const{logger:o}=t;h(e,t);(0,s.zG)(e,a.UI((e=>(e=>{e.cmd.push((()=>{const{getTargeting:t,setTargeting:i}=e.pubads(),s=t("permutive")||[],a=Object.values(r.eligibleSegments).map(String).concat(r.cloudCohorts).concat("rts"),u=(0,f.uK)((e=>a.includes(e))),{left:c}=u(s),d=n.concat(c).concat("rts");o.debug("DFP setting GPT targeting to",d),i("permutive",d)}))})(e))))};var v=r(4388);const b={liveSegments:[],cloudCohorts:[],eligibleSegments:{}},y={segments:b,getGAMKeyValues:()=>({permutive:""})},w=e=>e.getExternalJsonData(l)||[],E=(e,t,r)=>{const{logger:n,externalData:i,api:s}=t;let a=r.map(String).concat(b.cloudCohorts);n.debug("DFP is updating with targeting values",a),m(e,t,b,a);try{i.setExternalJsonData(l,a)}catch(e){const t=(0,o.w)(e),r="DFP failed to set data. Got:";n.error(r,t),s.reportError(`${r} ${t.message}`)}return((e,t)=>{let{api:r,logger:n}=e;(0,c.$S)("sync_segments_cookie",!1)?(n.debug("DFP syncing segment cookie _pdfps"),r.segmentSync({key:l,value:t})):n.debug("DFP sync segments cookie not enabled, skipping sync")})(t,JSON.stringify(a)),n.debug("DFP live segments updated to",r),r},k=e=>(0,n.mG)(void 0,void 0,void 0,(function*(){const{api:t,logger:r,activationManager:n,messages:o,externalData:c,nextGenOutput:f,userId:p,cookies:g}=e,_=yield(0,d.a4)((()=>window.googletag),(()=>!!window.googletag),{waitTimeInMs:10,maxAttempts:200,exponentialBackOff:!1});a.Wi(_)&&r.error("[DFP]: unable to find google tag script on the page"),(0,s.zG)(_,a.UI((e=>(e=>e.cmd.push((()=>e.pubads().setTargeting("prmtvsdk","web"))))(e))));y.getGAMKeyValues=()=>Object.assign(Object.assign({},(0,s.zG)((0,v.generateProjectSpecificKVs)(e),i.Vn((e=>{var r;return r=e,t.reportError(`[DFP] ${r}`,p.get()),e})),i.fS((()=>({}))))),{permutive:y.segments.liveSegments.join(",")}),b.eligibleSegments=(e=>{const t=e.getSpecializedActivations("dfp"),r={};for(const e of t.dfp)r[e]=e;for(const e of Object.keys(t.dfp_legacy)){const n=Number(e);r[n]=t.dfp_legacy[n]}return r})(n);const h=(0,s.zG)(f.queryLanguageCohorts.all,u.UI((e=>(r.debug("DFP received QL segments",{qlSegments:e}),((e,t)=>e.filter((e=>e in t)).map((e=>t[e])))(e,b.eligibleSegments)))),u.D8(d.cO));return(0,s.zG)(u.vP(h,f.cloudCohorts.gam),u.YP((0,d.Z_)(t,p,(t=>{let[n,o]=t;r.debug("DFP received updated cohorts",{filteredQlSegments:n,cloudCohorts:o}),b.cloudCohorts=o,b.liveSegments=E(_,e,n)})))),r.debug("DFP initialised with segments",b),o.on("permutive:reset",(0,d.Z_)(t,p,(()=>{r.debug("DFP received 'permutive:reset' event"),c.removeExternalData(l),g.deleteCookie(l)}))),o.emit("permutive:dfp:ready"),y}))},4388:(e,t,r)=>{r.r(t),r.d(t,{generateProjectSpecificKVs:()=>P,load:()=>d});var n=r(2688),o=r(5e3),i=r(3735),s=r(922),a=r(2652),u=r(9658);const c={},d=e=>{e.q.push({functionName:"addon",arguments:["dfp",{}]});window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.googletag.cmd.push((()=>l(e)))},l=e=>{e.permutive.ready((0,a.Z_)(e.api,e.userId,(()=>y(e.metrics))),"realtime");w(e.externalData);(0,i.zG)(P(e),o.tS((e=>o.Y3((()=>(0,a.qh)(e).forEach((e=>{let[t,r]=e;googletag.pubads().setTargeting(t,r)}))),n.w))),o.Vn((t=>e.api.reportError(`[DFP:load], ${t}`,e.userId.get())))),h(e.permutive),googletag.cmd.push((()=>{m(e.permutive),v(e.permutive)})),window.addEventListener("message",p(e.permutive),!1)},f=e=>{let{advertiserId:t,campaignId:r,lineItemId:n,creativeId:o}=e;return{advertiser_id:(0,a.rH)(t),campaign_id:(0,a.rH)(r),line_item_id:(0,a.rH)(n),creative_id:(0,a.rH)(o)}},p=e=>t=>{var r;try{const n=JSON.parse(t.data);if(!n.permutive_type||"google_ad_click"!==n.permutive_type)return;const{ad_unit_path:o,creative_id:i,advertiser_id:s,order_id:a,line_item_id:u}=null!==(r=null==n?void 0:n.data)&&void 0!==r?r:{},d=f({lineItemId:u,advertiserId:s,campaignId:a,creativeId:i});let l;Object.keys(c).some((e=>{const{slot:t,creative_id:r}=c[e];if((null==t?void 0:t.ad_unit_path)===o&&r===d.creative_id)return l=c[e],!0})),l=null!=l?l:Object.assign(Object.assign({},d),{is_empty:!1}),g(e,l)}catch(e){}},g=(e,t)=>{s.PH&&t&&e.track("SlotClicked",t)},_=(e,t,r)=>{c[t]=r,b(e,r),k(e,t)},h=e=>{const t=googletag.pubadsReady&&googletag.pubads().getSlots();t&&t.forEach((t=>{const r=t.getResponseInformation();if(!r)return;const n=Object.assign(Object.assign({},f(r)),{is_empty:!1,service_name:"publisher_ads",slot:E(t)}),o=t.getSlotElementId();_(e,o,n)}))},m=e=>{googletag.pubads().addEventListener("slotRenderEnded",(t=>{const r=Object.assign(Object.assign({},f(t)),{is_empty:t.isEmpty,service_name:t.serviceName,slot:E(t.slot)});if(t.size){const[e,n]=t.size;"number"==typeof e&&"number"==typeof n&&(r.width=e,r.height=n)}const n=t.slot.getSlotElementId();_(e,n,r)}))},v=e=>{s.EW&&googletag.pubads().addEventListener("impressionViewable",(t=>{let{slot:r,serviceName:n}=t;const o=r.getResponseInformation();if(!o)return;const i=Object.assign(Object.assign({},f(o)),{service_name:n,slot:E(r)});e.track("SlotViewable",i)}))},b=(e,t)=>{if(!s.CL)return;var r;r=Object.assign(Object.assign({},t),{rendered_timestamp:Date.now()}),e.track("SlotRendered",r)},y=e=>{let t=0;const r=googletag.pubadsReady&&googletag.pubads().getSlots();r&&r.forEach((e=>e.getResponseInformation()&&t++));const n=0===t?"sdk_targeting_realtime_success_count":"sdk_targeting_realtime_fail_count";e.track({name:n,value:1,labels:{target:"dfp"}})},w=e=>{const t=(0,u.getCachedDFPSegments)(e);googletag.cmd.push((()=>{const{getTargeting:e,setTargeting:r}=googletag.pubads(),n=e("permutive")||[];r("permutive",[...new Set([...t.map(String),...n])])}))},E=e=>{const t={ad_unit_path:e.getAdUnitPath(),slot_element_id:e.getSlotElementId()};return s.jH?Object.assign(Object.assign({},t),(()=>{const t={},r=[];let n=[];const o=(e,o)=>{const i="slot"===e?e=>t[e]=1:()=>{},s=o.getTargetingKeys();n=s;for(let s=0;s<n.length;s++){const a=n[s];if(void 0!==t[a]&&"service"===e)continue;const u=[],c=o.getTargeting(a);for(let e=0;e<c.length;e++)u.push(c[e].toString());u.length>0&&(i(a),r.push({key:a,value:u}))}};return o("slot",e),o("service",googletag.pubads()),{targeting_keys:r}})()):t},k=(e,t)=>{let r=!1;const n=()=>{r&&"hidden"===document.visibilityState&&g(e,c[t])},o=()=>{r=!0},i=()=>{r=!1};try{document.addEventListener("visibilitychange",n);const e=document.getElementById(t);e&&(e.addEventListener("mouseover",o),e.addEventListener("mouseout",i))}catch(e){}},P=e=>{let{userId:t,viewId:r}=e;return o.Y3((()=>({})),n.w)}},4400:(e,t,r)=>{r.r(t),r.d(t,{WebAddon:()=>P,load:()=>k});var n=r(655),o=r(2688),i=r(5e3),s=r(3735),a=r(4011),u=r(6567),c=r(7209),d=r(6341),l=r(922),f=r(2652),p=r(9853);const g=(0,p.MU)("add_alchemy_entities",!1),_=(0,p.MU)("add_alchemy_taxonomy",!1);function h(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Object.assign(Object.assign(Object.assign({},e&&_?{taxonomy_labels:"$alchemy_taxonomy_labels"}:{}),e&&g?{entity_names:"$alchemy_entity_names"}:{}),{})}function m(e,t,r,n){const o=Object.assign(Object.assign(Object.assign({isp_info:"$ip_isp_info",geo_info:"$ip_geo_info"},{}),e),t);r.track("Pageview",o).then((e=>{e&&n.emit("permutive:event:pageview",e)}))}function v(e,t,r,n,o,i){let s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:u.YP;const c=b(e,t,r,n,o),d=(0,u.fS)((()=>null))(a);let l={useBeacon:s};null!==d&&(l=Object.assign(Object.assign({},l),{unprocessedData:d})),i.track("PageviewComplete",c,l)}function b(e,t,r,n,o){return Object.assign(Object.assign(Object.assign({isp_info:"$ip_isp_info",geo_info:"$ip_geo_info"},n),r),{aggregations:Object.assign({PageviewEngagement:Object.assign({engaged_time:e},l.UW?{completion:t}:{})},l.ED?{SegmentEntry:Array.from(o.segmentEntryQueryCodes),SegmentExit:Array.from(o.segmentExitQueryCodes),CohortEntry:Array.from(o.cohortEntryQueryCodes),CohortExit:Array.from(o.cohortExitQueryCodes)}:{})})}const y=["mousemove","click","scroll"],w=["email","tel","submit","reset","button","file","password","radio","checkbox"],E=["email","e-mail","password","tel","telephone","phone","name_first","name_last","sa_zip"],k=e=>{0};class P{constructor(e){this.dirtyState=!1,this.timerHandle=void 0,this.totalCompletion=0,this.totalEngagedTime=0,this.pageviewCompleteTimeoutHandle=void 0,this.hasPageviewCompleteFired=!1,this.cleanupPageEngagementDetection=s.Q1,this.permutive=e.permutive,this.options=e,this.api=e.api,this.clientContext=e.clientContext,this.logger=e.logger,this.unprocessedPVC=e.unprocessedEvents.PageviewComplete,this.options.customProperties.overrideCustomProps(e.page||{});this.pageEngagementDetected=(()=>{this.dirtyState=!0,l.Uy&&this.resetTimeout()}).bind(this),m(h(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.permutive,this.options.messages),this.enablePageEngagementDetection(),"loading"!==document.readyState?this.attachListeners():window.addEventListener("DOMContentLoaded",this.attachListeners.bind(this),!1),l.t2&&(this.timerHandle=this.registerEngagementInterval(this.getEventInterval())),l.Uy&&(this.setPageviewCompleteTimeout(l.MU),(0,f.aq)((()=>{this.hasPageviewCompleteFired||v(this.totalEngagedTime,this.totalCompletion,h(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.options.queryManager,this.permutive)})))}sendLinkClickEvent(e,t){if(window.location.href&&e.href){const r=0===e.href.indexOf("data:")?"NOT_URL":e.href;this.permutive.track("LinkClick",{dest_url:r},{useBeacon:t})}}sendFormSubmissionEvent(e){{const t=e.currentTarget,r={form:Object.assign(Object.assign(Object.assign({method:t.method||"GET",properties:this.serializeForm(t)},"string"==typeof t.id?{id:t.id}:{}),t.name&&"string"==typeof t.name?{name:t.name}:{}),t.action&&"string"==typeof t.action?{action:t.action}:{})};this.permutive.track("FormSubmission",r)}}trackEngagementInterval(e){return(0,n.mG)(this,void 0,void 0,(function*(){const t=this.updateState(e);!function(e,t,r,n,o,i){const s=Object.assign(Object.assign({isp_info:"$ip_isp_info",geo_info:"$ip_geo_info",engaged_time:e,total_engaged_time:t},o),{completion:r,total_completion:n});i.track("PageviewEngagement",s)}(t.engaged_time,t.total_engaged_time,t.completion,t.total_completion,this.options.customProperties.getCustomProps(),this.permutive),this.hasPageviewCompleteFired||(yield function(e,t,r,n,o,i,s,a,u){const c=b(e,t,s,a,u);return o.then((e=>{const t={props:c,sessionId:r,viewId:n,client:e};i.put(t)}))}(this.totalEngagedTime,this.totalCompletion,this.options.sessionManager.getSessionId(),this.options.viewId.get(),this.clientContext.getClient(),this.unprocessedPVC,h(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.options.queryManager))}))}reset(e){var t;return(0,n.mG)(this,void 0,void 0,(function*(){if(this.disablePageEngagementDetection(),l.Uy){const e=yield this.unprocessedPVC.getIfPresent();this.hasPageviewCompleteFired=!1,v(this.totalEngagedTime,this.totalCompletion,h(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.options.queryManager,this.permutive,!1,e)}this.dirtyState=!1,this.options.state.viewId.generateAndSet(),this.totalCompletion=0,this.totalEngagedTime=0,this.updateWebOptions(e),this.options.customProperties.overrideCustomProps(this.options.page||{}),this.enablePageEngagementDetection();const r={logger:this.logger,config:Object.assign(Object.assign({},this.options.config),{watson:null!==(t=this.options.watson)&&void 0!==t?t:this.options.config.watson}),clientContext:this.clientContext,api:this.api,permutiveData:this.options.permutiveData,metrics:this.options.metrics,sessionManager:this.options.sessionManager,enrichers:this.options.enrichers,network:this.options.network};(0,d.H)(r)().then((()=>{m(h(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.permutive,this.options.messages),l.t2&&(clearInterval(this.timerHandle),this.timerHandle=this.registerEngagementInterval(this.getEventInterval()))}))}))}serializeForm(e){return[...e.getElementsByTagName("input")].filter((e=>!(!e.type||!e.id||e.disabled||e.checked||"fieldset"===e.nodeName.toLowerCase()||-1!==w.indexOf(e.type.toLowerCase())||-1!==E.indexOf(e.name.toLowerCase())))).map((e=>({name:e.name||e.id,value:e.value}))).filter((e=>e.value.length<120))}registerEngagementInterval(e){return setInterval((()=>{this.dirtyState&&this.trackEngagementInterval(e)}),1e3*e)}attachListeners(){const e=e=>"a"===e.tagName.toLowerCase(),t=e=>e instanceof Element,r=t=>e(t)?(0,u.G)(t):t.parentElement?e(t.parentElement)?(0,u.G)(t.parentElement):r(t.parentElement):u.YP;l.eV&&[].slice.call(document.getElementsByTagName("form"),0).forEach((e=>e.addEventListener("submit",(0,s.ls)(u.DT(this.canTrackPermutiveEvent("FormSubmission")),u.UI((0,f.Z_)(this.options.api,this.options.userId,this.sendFormSubmissionEvent.bind(this))))))),l.qr&&document.body.addEventListener("click",(0,s.ls)(u.DT(this.canTrackPermutiveEvent("LinkClick")),u.UI((e=>({event:e,anchor:(0,s.zG)(e.target,u.ij,u.tS(u.DT(t)),u.tS(r))}))),u.DZ((e=>{let{event:t,anchor:r}=e;return u.pC(r)?u.G({event:t,anchor:r.value}):u.YP})),u.UI((e=>{let{event:t,anchor:r}=e;return this.sendLinkClickEvent(r,(n=t,!("_blank"===r.target||n.metaKey||n.ctrlKey||n.shiftKey||2===n.which||3===n.which)));var n}))),{capture:!0})}updateState(e){const t=Math.max(this.totalCompletion,this.getCurrentCompletion()),r=t-this.totalCompletion;return this.totalEngagedTime+=e,this.totalCompletion=t,this.dirtyState=!1,{engaged_time:e,total_engaged_time:this.totalEngagedTime,completion:r,total_completion:this.totalCompletion}}getCurrentCompletion(){if("function"==typeof this.options.getPageCompletion)return(0,s.zG)((0,i.Y3)((0,s.ls)(this.options.getPageCompletion,Number,(e=>isNaN(e)?0:e),(0,c.uZ)(a.Df)(0,1)),o.w),(0,i.EQ)((e=>(this.logger.warn("Web: invoking getPageCompletion threw an error. Got",e),0)),(e=>(this.logger.debug("Web: invoking getPageCompletion returned",e),e))));return(()=>{const e=document.documentElement.scrollHeight,t=window.pageYOffset+window.innerHeight;return t<=0?0:t>=e?1:t/e})()}setPageviewCompleteTimeout(e){return window.setTimeout((()=>{this.hasPageviewCompleteFired||(v(this.totalEngagedTime,this.totalCompletion,h(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.options.queryManager,this.permutive,!1),this.hasPageviewCompleteFired=!0)}),e)}resetTimeout(){clearTimeout(this.pageviewCompleteTimeoutHandle),this.pageviewCompleteTimeoutHandle=this.setPageviewCompleteTimeout(l.MU)}registerPageEngagementCleanup(e){"function"==typeof e?this.cleanupPageEngagementDetection=()=>(0,i.Y3)((()=>{e(),this.cleanupPageEngagementDetection=s.Q1}),(e=>this.logger.warn("Page detection cleanup threw an error",(0,o.w)(e)))):this.logger.warn("No page detection cleanup was registered")}enablePageEngagementDetection(){this.options.addPageEngagementDetection&&(0,s.zG)(this.options.addPageEngagementDetection(this.pageEngagementDetected),(e=>this.registerPageEngagementCleanup(e))),this.setDirtyEventListenersTo(!0,this.getDirtyEvents())}disablePageEngagementDetection(){this.cleanupPageEngagementDetection(),this.setDirtyEventListenersTo(!1,this.getDirtyEvents())}setDirtyEventListenersTo(e,t){const r=e?window.addEventListener:window.removeEventListener;return t.forEach((e=>r(e,this.pageEngagementDetected))),null}getDirtyEvents(){return this.options.dirtyEvents||y}getEventInterval(){return this.options.eventInterval||5}canTrackPermutiveEvent(e){return t=>{var r,n;return(0,s.zG)(null===(n=null===(r=this.options)||void 0===r?void 0:r.filterPermutiveEvent)||void 0===n?void 0:n[e],u.DT((e=>"function"==typeof e)),u.tS((0,s.ls)((e=>i.Y3((()=>e(t)),(e=>new Error(`Threw an unexpected error: ${(0,o.w)(e)}`)))),i.tS(i.DT((e=>"boolean"==typeof e),(()=>new Error("Did not return a boolean")))),(0,f.bw)(i.Vn((t=>this.logger.error(`Filter predicate for "${e}" event failed`,t)))),u.Uo)),u.fS((()=>!0)))}}updateWebOptions(e){e.watson&&"object"==typeof e.watson&&"enabled"in e.watson&&"boolean"==typeof e.watson.enabled||delete e.watson,"object"==typeof e.filterPermutiveEvent&&null!==e.filterPermutiveEvent||delete e.filterPermutiveEvent;const t={addPageEngagementDetection:void 0,dirtyEvents:void 0,eventInterval:void 0,filterPermutiveEvent:void 0,getPageCompletion:void 0,page:void 0,watson:void 0};return this.options=Object.assign(Object.assign(Object.assign({},this.options),t),e)}}},9078:(e,t,r)=>{r.d(t,{a:()=>n});class n{constructor(e){var t;this.messages=e,this.handlers={},this.messageQueue={};null===(t=window.addEventListener)||void 0===t||t.call(window,"message",(e=>{var t;"permutive"===(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.origin)&&this.handle(e)}),!1),this.messages.once("permutive:api:ready",(function(){var e;null===(e=window.postMessage)||void 0===e||e.call(window,{origin:"permutive",type:"sdk-init"},"*")}))}listen(e,t){if(e in this.handlers||(this.handlers[e]=[]),this.handlers[e].push(t),e in this.messageQueue){const t=this.messageQueue[e];if(void 0===t)return;for(let e=0;e<t.length;e++){const r=t[e];this.handle(r)}}}handle(e){var t,r,n;if(e.data.type in this.handlers)this.handlers[e.data.type].forEach((t=>{t(e)}));else{(null!==(t=(r=this.messageQueue)[n=e.data.type])&&void 0!==t?t:r[n]=[]).push(e)}}}},533:(e,t,r)=>{r.d(t,{o:()=>n,s:()=>o});class n extends Error{constructor(){super(n.defaultMessage),this.name=n.errorName}static get defaultMessage(){return"Network request failed"}}n.errorName="NetworkRequestFailedError";class o extends Error{constructor(){super(o.defaultMessage),this.name=o.errorName}static get defaultMessage(){return"Network request timed out"}}o.errorName="NetworkRequestTimeoutError"},7423:(e,t,r)=>{r.d(t,{F:()=>d});var n=r(655),o=r(2688),i=r(3735),s=r(6567),a=r(3328),u=r(3030),c=r(533);class d{constructor(e,t,r,n,o){this.urls=e,this.config=t,this.network=r,this.metricsCollector=n,this.logger=o,this.prefix="[API]"}identify(e,t,r){const n=()=>this.reqWithMetrics(e,"sdk_http_identify_seconds",{url:this.urls.getEndpointUrl("/identify",s.G(this.config.apiVersion)),method:"POST",payload:{user_id:t.get(),aliases:r},contentType:"text/plain",dataType:"json",withCredentials:!0});return this.identifyPromise?this.identifyPromise=this.identifyPromise.then(n):this.identifyPromise=n()}metrics(e){return this.network.req({url:this.urls.getEndpointUrl("/internal/metrics",s.G(this.config.apiVersion)),method:"POST",payload:e,contentType:"text/plain",dataType:"text",withCredentials:!1})}metricsBeacon(e){return this.network.reqWithBeacon({url:this.urls.getEndpointUrl("/internal/metrics",s.G(this.config.apiVersion)),payload:e})}track(e,t,r){const n=this.getTrackUrl(t,{isFullyEnriched:r,useBeacon:!1});return this.reqWithMetrics(e,"sdk_http_events_seconds",{url:n,method:"POST",payload:t,contentType:"text/plain",dataType:"json",withCredentials:!1})}trackBatch(e,t){const r=this.getTrackUrl(t,{isFullyEnriched:!0,useBeacon:!1});return this.reqWithMetrics(e,"sdk_http_events_seconds",{url:r,method:"POST",payload:t,contentType:"text/plain",dataType:"json",withCredentials:!1})}trackBeacon(e,t){const r=this.getTrackUrl(e,{isFullyEnriched:t,useBeacon:!0});return this.network.reqWithBeacon({url:r,payload:e})}trackBatchBeacon(e){const t=this.getTrackUrl(e,{isFullyEnriched:!0,useBeacon:!0});return this.network.reqWithBeacon({url:t,payload:e})}reset(e){return this.reqWithMetrics(e,"sdk_http_reset_seconds",{url:this.urls.getEndpointUrl("/reset",s.G(this.config.apiVersion)),method:"POST",payload:null,contentType:"text/plain",dataType:"json",withCredentials:!0})}segmentSync(e){return this.network.req({url:`https://${this.config.segmentSyncApiHost}/sync/${e.key}`,method:"POST",payload:`value=${encodeURIComponent(e.value)}`,contentType:"application/x-www-form-urlencoded",dataType:"json",withCredentials:!0})}modelsBinary(e){return this.reqWithMetrics(e,"sdk_http_models_seconds",{url:this.getModelsUrl("binary"),method:"GET",contentType:"text/plain",dataType:"binary",withCredentials:!1})}modelsJson(e){return this.reqWithMetrics(e,"sdk_http_models_seconds",{url:this.getModelsUrl("json"),method:"GET",contentType:"text/plain",dataType:"json",withCredentials:!1})}state(e,t,r,n,o,i){return this.reqWithMetrics(e,"sdk_http_reset_seconds",{url:this.urls.getEndpointUrl("/state",s.G("v1.0"),[["fetch_unseen",JSON.stringify(i)]]),method:"POST",payload:{group_id:t,event_source_id:r,state:JSON.stringify(n),last_seen_offset:o},contentType:"text/plain",dataType:"json",withCredentials:!1})}appnexus(e){return this.network.req({url:e,method:"GET",contentType:"text/plain",dataType:"json",withCredentials:!0,timeout:2e3})}pxid(e){return this.network.req({url:this.urls.makeAuthenticatedUrl(e),method:"GET",contentType:"text/plain",dataType:"json",withCredentials:!0,timeout:2e3})}queries(){const e={addons:{dfp:{activations:{dfp:[],dfp_legacy:{}},auto_init:!0,track_slot_rendered:!1,track_slot_viewable:!1,track_slot_clicked:!1,track_targeting_keys:!1,sync_segments_cookie:!1},web:{auto_init:!1,track_pageview_engagement:!0,track_pageview_complete:!0,track_form_submission:!1,track_link_click:!1,engagement_edge_only:!0,segment_transition_edge_only:!1}},queries:{queries:{},eventSegments:{},eventsLookup:[],literalsLookup:[],subexpressionsLookup:[],stateSyncReplays:[],propertiesLookup:[]},queries_metadata:{}},t=`${this.config.cdnBaseUrl.startsWith("dev.local:")?"http":"https"}://${this.config.cdnBaseUrl}/queries/867f8423-d142-4fd1-ae8d-1a9bbbdf2358-amp.json`;return this.network.req({url:t,withCredentials:!1,dataType:"json",method:"GET"}).catch((()=>e))}pxidReset(e){return this.network.req({url:this.urls.makeAuthenticatedUrl(e),method:"POST",payload:null,contentType:"text/plain",dataType:"json",withCredentials:!0})}uploadCohortMemberships(e,t){return this.reqWithMetrics(e,"sdk_http_upload_cohort_memberships_seconds",{url:this.urls.getCCSCohortMembershipEndpointUrl("/amp/cohorts",s.G("alpha"),[["i",t.user_id]]),method:"POST",payload:t,contentType:"text/plain",dataType:"json",withCredentials:!1})}reqWithMetrics(e,t,r){const n=e.startTimer(t,{});return this.network.req(r).then((r=>(0,i.zG)(e.stopTimer(t,n),(e=>r))))}reportError(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date;return(0,n.mG)(this,void 0,void 0,(function*(){const d=(0,o.w)(e);if(this.logError("Reporting error:\n",d),!this.config.sendClientErrors)return void this.logDebug("Send errors not enabled. Skipping");const l=e=>this.network.req({url:this.urls.getSdkErrorsUrl("/errors",s.G(this.config.sdkErrorsApiVersion)),method:"POST",payload:[e],contentType:"text/plain",dataType:"text",withCredentials:!1}),f=e=>{this.metricsCollector.track({name:"sdk_http_generic_network_request_fail_count_total",value:1,labels:{network_error_type:e}})};yield(0,i.zG)([c.o,c.s],a.Ew((e=>d.name===e.errorName||d.message.indexOf(e.errorName)>=0||d.message.indexOf(e.defaultMessage)>=0)),s.g_((()=>{const e=(()=>{var e,n,o,i,s,a,c,l;const f={error_message:null!==(n=null===(e=null==d?void 0:d.message)||void 0===e?void 0:e.toString())&&void 0!==n?n:"",stack_trace:null===(o=null==d?void 0:d.stack)||void 0===o?void 0:o.split("\n")},p=t?{user_id:t}:{};return Object.assign({platform:"web",sdk_version:"v19.92.4",ql_runtime_version:"v5.5.2",timestamp:r,domain:null!==(s=null===(i=null===window||void 0===window?void 0:window.location)||void 0===i?void 0:i.hostname)&&void 0!==s?s:"",url:(0,u.bk)(null===(a=null===window||void 0===window?void 0:window.location)||void 0===a?void 0:a.href),referrer:(0,u.bk)(null===document||void 0===document?void 0:document.referrer),user_agent:null!==(c=null===navigator||void 0===navigator?void 0:navigator.userAgent)&&void 0!==c?c:"",error_message:null!==(l=f.error_message)&&void 0!==l?l:String(d),stack_trace:f.stack_trace},p)})();return l(e).catch((0,i.ls)(o.w,(e=>this.logError(e))))}),(e=>(0,n.mG)(this,void 0,void 0,(function*(){return f(e.errorName)})))))}))}getTrackUrl(e,t){const{isFullyEnriched:r,useBeacon:n}=t,o=Array.isArray(e),i=!r;return this.urls.getEndpointUrl(o?"/batch/events":"/events",s.G(this.config.apiVersion),[["enrich",JSON.stringify(i)],["sdkp",JSON.stringify(!n)]])}getModelsUrl(e){const t=`https://${this.config.cdnBaseUrl}`;switch(e){case"binary":return`${t}/models/v2/867f8423-d142-4fd1-ae8d-1a9bbbdf2358-models.bin`;case"json":return`${t}/models/867f8423-d142-4fd1-ae8d-1a9bbbdf2358-models.json`}}logDebug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.debug(this.prefix,...t)}logError(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.error(this.prefix,...t)}}},4586:(e,t,r)=>{r.d(t,{E:()=>s});var n=r(5e3),o=r(3735),i=r(533);class s{constructor(){}req(e){return this.reqImpl(e).then((e=>(0,o.MZ)(e)))}reqWithBeacon(e){let{url:t,payload:r}=e;return null===navigator||void 0===navigator?void 0:navigator.sendBeacon(t,JSON.stringify(r))}reqImpl(e){const{url:t,dataType:r,contentType:o,method:s,withCredentials:a,timeout:u}=e;return new Promise(((c,d)=>{const l=new XMLHttpRequest,f="POST"===e.method?"string"==typeof(p=e.payload)?p:JSON.stringify(p):null;var p;l.onload=function(){if(this.status>=400){const e="text"===this.responseType||""===this.responseType?this.responseText:"Couldn't access response text";d(`Failed ajax request. Status code was ${this.status}. ${e}`)}else if("json"===r){const e=this.responseText?(0,n.Y3)((()=>JSON.parse(this.responseText)),(e=>`Failed to parse response as JSON. Response was ${JSON.stringify(this.responseText)}. Got ${e}`)):(0,n.F2)(null);(0,n.g_)(d,c)(e)}else c("text"===r?this.responseText:this.response)},l.onerror=()=>d(new i.o),l.ontimeout=()=>d(new i.s),l.open(s,t,!0),o&&l.setRequestHeader("content-type",o),l.timeout=u||l.timeout,l.withCredentials=a||l.withCredentials,l.responseType="binary"===r?"arraybuffer":l.responseType,l.send(f)}))}}},310:(e,t,r)=>{r.d(t,{s:()=>o});var n=r(6567);class o{constructor(e){this.config=e,this.PATH_JOINER_Q="?",this.PATH_JOINER_A="&"}getEndpointUrl(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("base",e,t,r)}getSdkErrorsUrl(e,t){return this.getUrl("sdk-errors",e,t,[])}getAdvertiserEndpointUrl(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("adv",e,t,r)}getClassificationModelsEndpointUrl(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("clm",e,t,r)}getAudienceMatchingEndpointUrl(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];const o=`${e}/${r}/audiences`;return this.getUrl("audience-matching",o,t,n)}getCCSCohortMembershipEndpointUrl(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("ccs",e,t,r)}makeAuthenticatedUrl(e){return this.makeUrlWithQueryParams(e,[["k",this.config.apiKey]])}getUrlPrefix(e){switch(e){case"base":return"";case"adv":return"/adv";case"sdk-errors":return"/sdk-errors";case"clm":return"/clm";case"audience-matching":return"/audience-matching";case"ccs":return"/ccs"}}getUrl(e,t,r,o){const i=this.getUrlPrefix(e),s=(0,n.g_)((()=>""),(e=>`/${e}`))(r),a=`${this.config.apiProtocol}://${this.config.apiHost}${i}${s}${t}`;return this.makeUrlWithQueryParams(a,o.concat([["k",this.config.apiKey]]))}makeUrlWithQueryParams(e,t){const r=t.map((e=>{let[t,r]=e;return`${t}=${r}`})).join(this.PATH_JOINER_A),n=e.includes(this.PATH_JOINER_Q)?this.PATH_JOINER_A:this.PATH_JOINER_Q;return`${e}${n}${r}`}}},8910:(e,t,r)=>{r.d(t,{B:()=>rt});var n=r(655),o=r(2116);class i{constructor(){this.events=[],this.listeners=[]}newEvent(e,t){this.events.push([e,t]),[...this.listeners].forEach((r=>{this.handle(e,t,r)}))}addListener(e){this.listeners.push(e);const t={replay:()=>(this.replay(e),t),remove:()=>(this.remove(e),t)};return t}handle(e,t,r){const n="string"==typeof r.name&&e.name===r.name,o=r.name.test&&r.name.test(e.name),i=n||o;if(i)try{r.callback(e,t)}catch(e){window.console&&window.console.error&&window.console.error("callback error: ",e)}i&&r.once&&this.remove(r)}replay(e){let t=-1!==this.listeners.indexOf(e);for(let r=0;r<this.events.length&&t;r++)this.handle(this.events[r][0],this.events[r][1],e),t=-1!==this.listeners.indexOf(e)}remove(e){const t=this.listeners.indexOf(e);-1!==t&&this.listeners.splice(t,1)}}var s=r(2688),a=r(3735);const u=e=>({id:e.id,name:e.name,time:new Date(e.time),properties:e.properties||{},session_id:e.session_id,view_id:e.view_id}),c=e=>({id:e.id,name:e.name,time:(f(e.time)?e.time:new Date).toISOString(),properties:e.properties||{},session_id:e.session_id,view_id:e.view_id}),d=(e,t)=>({id:e.id,time:new Date(e.time),name:t.name,properties:t.properties,session_id:t.session_id,view_id:t.view_id}),l=e=>void 0!==e.request_id,f=e=>isFinite(e)&&e instanceof Date;var p=r(4730);class g{constructor(e,t,r,n,o){this.eventHandler=e,this.api=t,this.metrics=r,this.userId=n,this.eventsCache=o,this.DEBOUNCE_TIME=500,this.MAX_DEBOUNCE_TIME=5e3,this.batch={requestData:[],requestOptions:[],processingStrategies:[]},this.scheduler=new p.b(this.DEBOUNCE_TIME,this.MAX_DEBOUNCE_TIME),this.debouncedFlushIfNotEmpty=this.scheduler.schedule(this.flush.bind(this)),this.scheduler.scheduleForPageUnload((()=>this.flushWithBeacon.bind(this)(this.batch)))}add(e,t,r){return this.batch.requestData.push(e),this.batch.requestOptions.push(t),this.batch.processingStrategies.push(r),this.debouncedFlushIfNotEmpty(this.batch),Promise.resolve()}flush(e){return this.flushIfNotEmpty(e,!1)}flushWithBeacon(e){return this.flushIfNotEmpty(e,!0)}flushIfNotEmpty(e,t){const{requestData:r,requestOptions:n,processingStrategies:o}=e,i=e=>this.api.reportError(`Error sending events batch. Got ${(0,s.w)(e)}`,this.userId.get()),u=t?(0,a.ls)((e=>this.api.trackBatchBeacon(e)),(e=>Promise.resolve())):e=>this.api.trackBatch(this.metrics,e);return r.length>0?(0,a.zG)(this.resetBatch(),(e=>this.trackMetrics(r)),(e=>u(r).then((e=>this.isBatchResponse(e)?this.onBatchResponseSuccess(e,r,n,o):(0,a.Q1)())).catch(i))):Promise.resolve()}onBatchResponseSuccess(e,t,r,n){const o=(e,t)=>{"never"!==t&&(this.eventHandler.newEvent(c(e),null),this.eventsCache.add(e,{persistOnDisk:!0}))},i=(e,t,r)=>{const n={name:t.name,session_id:t.session_id,view_id:t.view_id,properties:t.properties,time:(new Date).toISOString()};r&&r(e.error.message),console.error(e),this.eventHandler.newEvent(n,e)};return e.forEach(((e,s)=>{let{body:a}=e;const u=t[s],c=r[s],f=n[s];return l(a)?i(a,u,c.error):((e,t,r,n)=>{const i=d(e,t);return n&&n(i),o(i,r)})(a,u,f,c.success)}))}resetBatch(){this.batch={requestData:[],requestOptions:[],processingStrategies:[]}}trackMetrics(e){this.metrics.track({name:"sdk_events_batch_size_total",value:e.length,labels:{}}),this.metrics.track({name:"sdk_events_batch_size_bytes",value:2*JSON.stringify(e).length,labels:{}})}isBatchResponse(e){return!!e}}var _=r(6567),h=r(922);const m=(e,t)=>{switch(v(e.event,e.isEventFullyEnriched,t)){case"immediate":return y(e);case"memoryOnly":return w(e);case"response":return E(e);case"deferred":return k(e);case"never":return P(e)}},v=(e,t,r)=>r?"deferred":b(e.name,t),b=(e,t)=>x.has(e)?"memoryOnly":C.has(e)?"never":t?"immediate":"response",y=e=>{let{event:t,requestData:r,requestOptions:o,queryManager:i,eventsBatch:s,stateSync:u,metrics:c,logger:d}=e;return(0,n.mG)(void 0,void 0,void 0,(function*(){const[e,{segmentsEntered:n,segmentsExited:l,cohortsEntered:f,cohortsExited:p}]=yield I(t,c,i,d),g=(e,t)=>{const r=new Set(e);for(const e of t)r.delete(e);return r},_=g(new Set([...r.segments,...n]),l),h=g(new Set([...r.cohorts,...f]),p);return d.debug(`Batching ${t.name} with`,{segments:_,cohorts:h}),Promise.all([s.add(Object.assign(Object.assign({},r),{segments:[..._],cohorts:[...h]}),o,"immediate"),u.sync(e)]).then(a.Q1)}))},w=e=>{let{event:t,metrics:r,queryManager:n,logger:o}=e;return I(t,r,n,o).then(a.Q1)},E=e=>{let{requestData:t,requestOptions:r,queryManager:n,eventsCache:o,eventHandler:i,api:s,metrics:a,logger:u}=e;return s.track(a,t,!1).then((e=>D(e,t,r,o,a,n,u))).then((e=>{let{event:t,error:r}=e;return O(i,t,r)}))},k=e=>{let{event:t,isEventFullyEnriched:r,requestData:n,api:o,eventHandler:i}=e;return Promise.all([o.trackBeacon(n,r),O(i,t,_.YP)]).then(a.Q1)},P=e=>{let{requestData:t,requestOptions:r,eventsBatch:n}=e;return n.add(t,r,"never")},D=(e,t,r,n,o,i,s)=>l(e)?S(e,t,r):M(e,t,r,n,o,i,s),S=(e,t,r)=>{const n={name:t.name,session_id:t.session_id,view_id:t.view_id,properties:t.properties,time:new Date};return"function"==typeof r.error&&r.error(e.error.message),Promise.resolve({event:n,error:(0,_.G)(e)})},M=(e,t,r,n,o,i,s)=>{const a=void 0!==e.properties?u(Object.assign(Object.assign({},e),{session_id:t.session_id,view_id:t.view_id})):d(e,t);return I(a,o,i,s).then((()=>("function"==typeof r.success&&r.success(a),n.add(a,{persistOnDisk:!0}),{event:a,error:_.YP})))},I=(e,t,r,n)=>q.has(e.name)?(0,a.zG)(t.startTimer("sdk_events_querylanguage_seconds",{}),(o=>r.process(e,!0).then((r=>(0,a.zG)(t.stopTimer("sdk_events_querylanguage_seconds",o),(t=>n.log("Processing event",e,"caused the following update",r)),(e=>r)))))):Promise.resolve([{},{segmentsEntered:new Set,segmentsExited:new Set,cohortsEntered:new Set,cohortsExited:new Set}]),O=(e,t,r)=>{A.has(t.name)||e.newEvent(c(t),(0,a.zG)(r,_.fS((()=>null))))},C=new Set(["ThirdPartySegments","SlotRendered"]),x=new Set([...h.D0?["PageviewEngagement"]:[],...h.ED?["SegmentEntry","SegmentExit"]:[]]),T=new Set(["PageviewComplete"]),A=new Set(["PrebidAuctions"]),q=new Set(["!UpdateLookalikeModels","!UpdateSecondPartyData","Pageview","PageviewComplete","PrebidBid","SegmentEntry","SlotClicked","SlotViewable"]);function U(e,t,r){const{api:s,enrichers:u,logger:c,metrics:d,queryManager:l,stateSync:f,unprocessedPVC:p,userId:h}=e;return o.K4((()=>{const e=new i,o=new g(e,s,d,h,r);return{allEvents:()=>r.all(),getStateSizeInBytes:()=>r.getStateSizeInBytes(),on:(t,r)=>e.addListener({name:t,callback:r,once:!1}),once:(t,r)=>e.addListener({name:t,callback:r,once:!0}),reset:e=>r.reset(e),track:i=>{var{client:g,event:h,useBeacon:v}=i,b=(0,n._T)(i,["client","event","useBeacon"]);const{output:y,isFullyEnriched:w}=u.enrich(h.properties,x.has(h.name)),E=Object.assign(Object.assign({},y),{client:g});d.track({name:w?"sdk_event_enrichment_success_count":"sdk_event_enrichment_fail_count",value:1,labels:{}});const k=(0,a.zG)(t.nonQlCohorts.current,_.fS((()=>[]))),P={user_id:t.userId.current,name:h.name,cohorts:[...k,...t.qlCohorts.current.map(String)],segments:t.qlCohorts.current,properties:E,session_id:h.session_id,view_id:h.view_id};return((e,t)=>m(e,t).then((t=>T.has(e.event.name)?e.unprocessedPVC.reset():(0,a.Q1)())))(Object.assign(Object.assign({},b),{api:s,event:Object.assign(Object.assign({},h),{properties:E}),eventsBatch:o,eventsCache:r,eventHandler:e,isEventFullyEnriched:w,logger:c,metrics:d,queryManager:l,requestData:P,stateSync:f,unprocessedPVC:p}),v)},__deprecated_eventsCache:r}}))}class G{constructor(){this.crypto=window.crypto||window.msCrypto,this.ALG_NAME="AES-GCM"}isAvailable(){var e;return!!(null===(e=this.crypto)||void 0===e?void 0:e.subtle)}generateKey(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.crypto.subtle.generateKey({name:this.ALG_NAME,length:256},e,["encrypt","decrypt"])}encrypt(e,t){const[r,n]=this._encrypt(e,this.str2bytes(t));return r.then((e=>{const t=new Uint8Array(16+e.byteLength);return t.set(n,0),t.set(new Uint8Array(Uint32Array.of(e.byteLength).buffer),12),t.set(new Uint8Array(e),16),t.buffer}))}decrypt(e,t){const r=new Uint8Array(t,0,12),n=new Uint32Array(t,12,1)[0],o=t.slice(16,16+n);return this._decrypt(e,r,o).then(this.bytes2str)}_encrypt(e,t){const r=this.crypto.getRandomValues(new Uint8Array(12));return[this.crypto.subtle.encrypt({name:this.ALG_NAME,iv:r},e,t),r]}_decrypt(e,t,r){return this.crypto.subtle.decrypt({name:this.ALG_NAME,iv:t},e,r)}str2bytes(e){return(new TextEncoder).encode(e).buffer}bytes2str(e){return(new TextDecoder).decode(e)}}var j=r(5e3),L=r(6934);var R=r(7554);class z extends Error{constructor(e){super(e),this.name="StoreClosingError"}}class B{constructor(e,t,n,o,i,s,a,u,c,d){this.version=3;{const l=r(2546);this.db=l.make(e,t,n,o,i,s,a,u,this.version,c,d)().then((0,j.fS)((e=>(0,R.E)(t,c,d))))}}shouldThrowStoreClosingError(e){return"NotFoundError"===e.name||"InvalidStateError"===e.name}makeStoreClosingDuringOpertationError(e){return new z(`Attempted ${e} when the current store is closing.`)}put(e,t){return(0,L.Y3)((()=>this.db.then((r=>r.put(e,t)))),(e=>{const t=(0,s.w)(e);return this.shouldThrowStoreClosingError(t)?this.makeStoreClosingDuringOpertationError("put"):t}))}get(e){return(0,L.Y3)((()=>this.db.then((t=>t.get(e))).then(_.ij)),(e=>{const t=(0,s.w)(e);return this.shouldThrowStoreClosingError(t)?this.makeStoreClosingDuringOpertationError("get"):t}))}delete(e){return(0,L.Y3)((()=>this.db.then((t=>t.delete(e)))),(e=>String(e)))}deleteStore(){return(0,L.Y3)((()=>this.db.then((e=>e.deleteStore()))),(e=>String(e)))}}var W=r(1500),$=r(3328),K=r(5151),N=r(2652);const F="permutive-events-cache",Y="permutive-events-for-page",Q="[EVENTSCACHE]";class V{constructor(e,t,r,n,o,i,s,u){this.config=e,this.namespace=t,this.logger=r,this.api=n,this.trace=o,this.metrics=i,this.userId=s,this.makeEventsStore=u,this.eventPutQueue=Promise.resolve(j.F2(null)),this.eventsCache=this.makeEventsRepository(F),this.eventsForPage=this.makeEventsRepository(Y),this.debouncedReportError=(()=>new p.b(5e3,5e3).schedule((e=>this.api.reportError(e.errorMessage,e.userId))))(),this.eventStore=u(),this.eventsTTLInMilliseconds=(0,a.zG)((0,_.ij)(this.config.eventsTTLInDays),(0,_.tS)((e=>"number"==typeof e&&e>0?(0,_.G)(24*e*3600):_.YP))),this.eventsCache.events=(0,N.PQ)((()=>{const e=this.trace.startSpan("load_event_cache");return this.loadFromDisk().then((t=>(e.finish(),this.logDebug(`Event cache loaded, #e ${t.length}`),t)))})),this.readiness=this.eventsCache.events.then((()=>this.migratePreviousPagesEvents()))}migratePreviousPagesEvents(){return(0,n.mG)(this,void 0,void 0,(function*(){const e=this.trace.startSpan("migrate_previous_for_page_events"),t=(0,K.pE)((e=>(0,L.Y3)((()=>e.flush()),s.w)));return(0,a.zG)([this.eventsForPage,this.eventsCache],t,(0,K.UI)((t=>{const r=$.bj(t);return r.length>0&&this.api.reportError(`Migrate previous events failed. Got:\n${r.join("\n ")}`,this.userId.get()),e.finish()})),(e=>e()))}))}all(){return Promise.all([this.eventsCache.events,this.eventsForPage.events]).then(W.xH)}add(e,t){let{persistOnDisk:r}=t;return(0,n.mG)(this,void 0,void 0,(function*(){this.logDebug("Adding to cache",e);return(yield this.eventsForPage.events).push(e),r&&this.readiness.then((()=>this.eventsForPage.flush())),e}))}filterEventsByWorkspace(e){return e}pruneEventsToSizeLimit(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.config.eventsCacheLimitBytes;if(r<=0||t<=r)return this.logDebug(`Event size of ${t} less than limit of ${r}`),{events:e,sizeInBytes:t};this.logDebug(`Events before pruning ${e.length}`),this.logDebug(`Pruning events with current size ${t}`,`to ${r}`);let n=1;for(;t>r;)e.splice(0,n),n*=2,t=2*JSON.stringify(e).length;return this.logDebug(`Events after pruning ${e.length}`),this.logDebug(`Events size after pruning ${t}`),{events:e,sizeInBytes:t}}loadFromDisk(){this.logLog("Loading event cache...");const e=this.metrics.startTimer("sdk_load_events_cache_task_duration_seconds",{}),t=e=>{this.metrics.track({name:"sdk_events_cache_byte_total",value:e.sizeInBytes,labels:{}}),this.metrics.track({name:"sdk_events_cache_size_total",value:e.events.length,labels:{}})},r=(0,a.zG)(this.eventsTTLInMilliseconds,(0,_.g_)((0,a.a9)(a.yR),(e=>(0,W.hX)((t=>e>Date.now()-t.time.getTime()))))),o=(0,a.ls)((0,_.fS)((()=>[])),K.of),i=(0,L.g_)((e=>{const t=(0,K.of)([]);return e instanceof z?t:(this.api.reportError(`Error fetching data from store. Got ${e}`,this.userId.get()),()=>(0,n.mG)(this,void 0,void 0,(function*(){return yield this.reset("historical"),t()})))}),o);return(0,a.zG)([this.eventStore.get(F),this.eventStore.get(Y)],(0,W.UI)(i),(0,W.vP)(K.oE),(0,K.UI)((t=>(this.logDebug("Read events from store:",t),this.metrics.stopTimer("sdk_load_events_cache_task_duration_seconds",e),t))),(0,K.UI)((0,a.ls)(W.xH,this.filterEventsByWorkspace,(e=>this.pruneEventsToSizeLimit(e,2*JSON.stringify(e).length)),(e=>(this.eventsCache.sizeInBytes=e.sizeInBytes,this.eventsCache.sizeInBytesLastSuccessfulWrite=e.sizeInBytes,e.events.length>0&&t(e),e.events)),(0,W.UI)(u),r)),(e=>e()))}reset(e){return(0,n.mG)(this,void 0,void 0,(function*(){return this.logDebug("Resetting Events Cache"),(0,a.zG)(this.eventStore.deleteStore(),(0,L.UI)((()=>(this.eventStore=this.makeEventsStore(),"historical"===e?Promise.all([this.eventsCache.reset(),this.eventsForPage.flush()]):Promise.all([this.eventsCache.reset(),this.eventsForPage.reset()])))),(0,L.UI)((()=>this.all())),(0,L.g_)((()=>(0,K.of)([])),(e=>(0,a.a9)(e))),(e=>e()))}))}getStateSizeInBytes(){return this.eventsForPage.sizeInBytes+this.eventsCache.sizeInBytes}makeEventsRepository(e){const t=e=>(0,n.mG)(this,void 0,void 0,(function*(){return this.logDebug(`Writing ${e.length} events to ${u.key}`),this.eventPutQueue=this.eventPutQueue.then((t=>this.eventStore.put(e.map(c),u.key)()))})),r=()=>(0,n.mG)(this,void 0,void 0,(function*(){return this.logDebug(`Deleting events for ${u.key}`),this.eventStore.delete(u.key)()})),o=()=>(0,n.mG)(this,void 0,void 0,(function*(){const e=this.trace.startSpan(`write_${u.key}`),r=e=>(0,n.mG)(this,void 0,void 0,(function*(){const t=`Events cache failed to put ${u.key}. Got ${e}`;return e instanceof z?this.logError(t):(e=>"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)(e)?(this.logError(t),u.retryAttempts<9?(u.retryAttempts+=1,this.logDebug(`Attempt #${u.retryAttempts} to write ${u.key} to EventsStore`),yield a(),o()):(this.logDebug(`Attempted ${u.retryAttempts} rewrite attempts and reached limit of 9 max writes.`,"Reporting QuotaExceededError to API"),this.debouncedReportError({errorMessage:t,userId:this.userId.get()}))):void 0})),i=()=>(this.logDebug(`Successfully wrote events for ${u.key} after ${u.retryAttempts} attempts`),u.retryAttempts=0,u.sizeInBytes=2*JSON.stringify(s).length,u.sizeInBytesLastSuccessfulWrite=2*JSON.stringify(s).length,Promise.resolve()),s=yield u.events;return t(s).then((e=>(0,j.EQ)(r,i)(e))).then((t=>e.finish()))})),i=(e,t)=>(0,n.mG)(this,void 0,void 0,(function*(){const r=yield e.events,n=2*JSON.stringify(r).length,o=this.pruneEventsToSizeLimit(r,n,t);return e.events=Promise.resolve(o.events),e.sizeInBytes=o.sizeInBytes,t-e.sizeInBytes})),s=(e,t)=>(0,n.mG)(this,void 0,void 0,(function*(){if(0===e.length||0===t)return;const[r,...n]=e,o=yield i(r,t);return this.logDebug(`${o} left after pruning ${r.key}`),s(n,o)})),a=()=>(0,n.mG)(this,void 0,void 0,(function*(){const e=this.eventsForPage.sizeInBytes-this.eventsForPage.sizeInBytesLastSuccessfulWrite;if(e<=0)return void this.logWarn(`${this.eventsForPage.key} failed to write the same or smaller events cache of size ${e}`);const t=1.2*e,r=[this.eventsCache,this.eventsForPage];this.logDebug(`Pruning ${t} bytes from`,r),yield s(r,t)})),u={key:e,events:Promise.resolve([]),sizeInBytes:0,sizeInBytesLastSuccessfulWrite:0,retryAttempts:0,flush:o,reset:()=>(0,n.mG)(this,void 0,void 0,(function*(){u.events=Promise.resolve([]),u.sizeInBytes=0,u.sizeInBytesLastSuccessfulWrite=0,yield r()}))};return u}logDebug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.debug(Q,...t)}logWarn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.warn(Q,...t)}logError(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.error(Q,...t)}logLog(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.log(Q,...t)}}class H extends V{constructor(e,t,r,n,o,i,s,a){super(e,t,r,n,o,i,s,(()=>new B(e,t,i,new G,"867f8423-d142-4fd1-ae8d-1a9bbbdf2358",`events_${s.get()}`,`keys_${s.get()}`,"events",r,a)))}}function J(e,t){return U(e,t,new H(e.config,e.namespace,e.logger,e.api,e.trace,e.metrics,e.userId,e.consentTracking))}var X=r(7826),Z=r(2851);const ee="_pnativo",te=function(e){let{externalData:t}=e;return o.K4((()=>{t.removeExternalData(ee)}))};var re=r(4011),ne=r(7927),oe=r(6017);function ie(e,t){const r=function(e){const t=function(e){let{logger:t,messages:r,queryManager:n}=e;const o="[Ref: QL segments]",i=()=>[...n.userSegments.getAllAsList()],[s,u]=Z.Ue(i());return t.debug(o,"initialised",{segments:s.current}),r.on("permutive:segments:updated",(()=>{const e=i();t.debug(o,"updated",{segments:e}),u(e)})),r.on("permutive:reset",(()=>{const e=i();t.debug(o,"reset"),u(e)})),(0,a.zG)(s,Z.D8($.Eh(re.Eq)))}(e);return(0,a.zG)(t,Z.UI((0,a.ls)($.uK((e=>e<1e7)),(e=>{let{left:t,right:r}=e;return{custom:r,standard:t}}))),(e=>({all:t,custom:(0,a.zG)(e,Z.UI((e=>{let{custom:t}=e;return t}))),standard:(0,a.zG)(e,Z.UI((e=>{let{standard:t}=e;return t})))})))}(e),n=function(e){let{messages:t,queryManager:r}=e;const[n,o]=Z.Ue(_.YP);return t.on("permutive:segments:updated",(()=>{o(_.G(r.stateMap.value))})),t.on("permutive:reset",(()=>o(_.YP))),Z.UI(_.UI(se),n)}(e);return e.queryManager.setLalRef(t.lookalikeModels),e.queryManager.setTpdRef(t.thirdPartyData),o.K4((()=>({cohorts:r,tpdUsage:n})))}const se=(0,a.ls)(ne.UI((e=>{var t;return null!==(t=e.activations)&&void 0!==t?t:{}})),ne.hX((0,a.zG)(Boolean,(0,oe.xD)((0,oe.ff)(ne.xb)))));var ae=r(926),ue=r(4923);const ce=(e,t)=>((e,t,r)=>{const{activationManager:i,externalData:s,metrics:u,permutiveData:c,queryManager:d,stateSync:l,trace:f}=e;return(0,a.zG)(ie(e,{lookalikeModels:t.lookalikeModels,thirdPartyData:(0,a.zG)(t.thirdPartyData,Z.UI(_.UI(ue.UI((e=>{const t={};for(const r of e)t[r]=!0;return t})))))}),o.YO("queryLanguage"),o.ak("eventCollection",(n=>{let{queryLanguage:o}=n;return r(e,{nonQlCohorts:t.nonQlCohorts,qlCohorts:o.cohorts.all,userId:t.userId})})),o.ak("nativo",(e=>{let{queryLanguage:r}=e;return te(Object.assign({activationManager:i,externalData:s,metrics:u,queryLanguageCohorts:r.cohorts.all},t))})),o.ak("twitterPixel",(e=>{let{queryLanguage:r}=e;return(0,ae.eJ)(Object.assign({activationManager:i,metrics:u,permutiveData:c,queryLanguageCohorts:r.cohorts.all},t))})),o.ak("prebidJS",(()=>(0,X.dN)(e))),o.ak("reset",(e=>{let{eventCollection:t}=e;return o.of((e=>(0,n.mG)(void 0,void 0,void 0,(function*(){d.reset();const r=e.preserveEventsFromCurrentView?"historical":void 0,n=yield t.reset(r),o=f.startSpan("ss_reset_sync");e.downloadState?yield l.resetSync():l.reset(),yield d.bootstrap(n),o.finish()}))))})))})(e,t,J);function de(e){return"consentTracking"in e?e.consentTracking.consentRef:Z.a9(!0)}function le(e){let{messages:t}=e;const[r,n]=Z.Ue(new Set);return t.on("permutive:addon:preinit",(e=>n(new Set([...r.current,e])))),r}function fe(e){let{messages:t,realtime:r}=e;var n;const[o,i]=Z.Ue(null!==(n=r.isRealtime())&&void 0!==n&&n);return t.on("permutive:realtime",(()=>i(!0))),o}function pe(){const e=()=>Math.floor(Date.now()/1e3),[t,r]=Z.Ue(e());return setInterval((()=>r(e())),1e3),t}function ge(e,t){const r=function(e){const{activationManager:t,api:r,config:n,enrichers:o,externalData:i,logger:s,messages:a,metrics:u,permutiveData:c,namespace:d,network:l,queryManager:f,stateSync:p,trace:g,track:_,unprocessedPVC:h,urls:m,userId:v}=e,b="consentTracking"in e?e.consentTracking:{consentRef:Z.a9(!0),listenForConsent:()=>0,isRevoked:()=>!1,isGiven:()=>!0};return{activationManager:t,api:r,config:n,consentTracking:b,enrichers:o,externalData:i,logger:s,messages:a,metrics:u,permutiveData:c,namespace:d,permutiveApi:l,permutiveUrls:m,queryManager:f,reportError:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r.reportError(e,null==t?void 0:t.userId,null==t?void 0:t.timestamp)},stateSync:p,trace:g,track:_,unprocessedPVC:h,userId:v}}(e),o=function(e){return{addonsLoaded:e.addonsLoaded,consent:de(e),currentTimestampSecs:pe(),enabledAddons:le(e),identities:e.identities,realtime:fe(e),sessionId:Z.a9(e.sessionManager.getSessionId()),userId:e.userId.ref,viewId:e.viewId.ref}}(e);return function(e,t,r){const o=5e3;return(0,a.zG)(e,(i=o,e=>t=>{var{onServiceStop:r}=t,o=(0,n._T)(t,["onServiceStop"]);let s=[];const{value:a,state:u}=e(Object.assign(Object.assign({},o),{onServiceStop:e=>s.push(e)})),[c,d]=Z.Ue(u.current),l=()=>d(u.current),f=setInterval(l,i);let p=!1;return(0,N.aq)((()=>!p&&l()),navigator.userAgent),r((()=>{p=!0,s.forEach((e=>e())),l(),clearInterval(f)})),{value:a,state:c}}),_e,function(e){return t=>(0,a.ls)((0,N.rO)({previousState:t=>e.current?t:void 0}),t,(0,N.rO)({state:(0,a.ls)((t=>Z.vP(e,t)),Z.UI((e=>{let[t,r]=e;return t?r:void 0})))}))}(r),function(e){return t=>(0,a.ls)((0,N.rO)({previousState:()=>localStorage.getItem(e)}),t,(0,N.rO)({state:(0,N.bw)(Z.YP((t=>{switch(typeof t){case"string":localStorage.setItem(e,t);break;case"undefined":localStorage.removeItem(e);break;case"object":if(null===t){localStorage.removeItem(e);break}throw new Error("Permutive app raised an invalid state.");default:throw new Error("Permutive app raised an invalid state.")}})))}))}(t))({onServiceStop:a.Q1}).value;var i}(t(r,o),e.namespace.getNamespacedStorageKey("permutive-app"),o.consent)}function _e(e){return(0,a.ls)((0,N.rO)({previousState:e=>{if("string"!=typeof e)return{};try{return JSON.parse(e)}catch(e){return{}}}}),e,(0,N.rO)({state:Z.UI(JSON.stringify)}))}const he=e=>o.dQ((t=>{let{onServiceStop:r,previousState:n}=t;const o=function(e){if("object"!=typeof e||null===e)return{validityKey:"",inFlight:_.YP,lastSuccess:_.YP};return e}(n),i=(0,a.zG)(e,Z.BT(r),Z.UI((e=>"currentTimestampSecs"in e&&"freshness"in e&&"validity"in e?e:{currentTimestampSecs:0,validity:{key:e.validityKey,maxAge:Number.MAX_SAFE_INTEGER},freshness:{key:e.freshnessKey,maxAge:Number.MAX_SAFE_INTEGER},refresh:e.refresh})),Z.g_(Z.a9(o),((e,t)=>{const r=t.validity.key(),n=_.hX((e=>t.currentTimestampSecs-e.timestamp<=t.validity.maxAge)),o=(0,N.HP)(t.freshness.key),i=_.hX((e=>t.currentTimestampSecs-e.timestamp<=t.freshness.maxAge&&e.freshnessKey===o())),s=(0,a.zG)(e,Z.UI((0,a.ls)(_.DT((e=>e.validityKey===r)),_.EQ((()=>({validityKey:r,inFlight:_.YP,lastSuccess:_.YP})),(0,N.rO)({inFlight:n,lastSuccess:n})))),Z.D8(me));if((0,a.zG)(s.current,(e=>(0,a.zG)(e.inFlight,_.wp((()=>e.lastSuccess)),i,_.pC))))return s;const u=()=>({timestamp:t.currentTimestampSecs,freshnessKey:o(),output:_.YP});return(0,a.zG)(t.refresh(),_.EQ((()=>s),(0,a.ls)(Z.p4,Z.VS(_.EQ((()=>(0,a.zG)(s,Z.UI((e=>Object.assign(Object.assign({},e),{inFlight:_.G(u())}))))),j.EQ((e=>s),(e=>Z.a9({validityKey:r,inFlight:_.YP,lastSuccess:_.G(Object.assign(Object.assign({},u()),{output:_.G(e)}))}))))))))})),Z.xH,Z.D8(me));return{value:Z.UI((0,a.ls)((0,N.vg)("lastSuccess"),_.tS((0,N.vg)("output"))),i),state:Z.UI((e=>Object.assign(Object.assign({},e),{inFlight:_.YP})),i)}}));const me=(e,t)=>e.validityKey===t.validityKey&&e.inFlight===t.inFlight&&e.lastSuccess===t.lastSuccess;function ve(e){return t=>(0,a.zG)(Z.oQ(e),Z.UI((0,N.rO)({backoffAfterErrorMs:e=>null!=e?e:0,backoffAfterSuccessMs:e=>null!=e?e:0})),(e=>o.dQ((r=>{let{previousState:n}=r;const[o,i]=Z.Ue(function(e){if("object"!=typeof e||null===e)return{lastSuccess:0,lastError:0};return e}(n)),s=(0,a.zG)(Z.vP(o,e),Z.UI((e=>{let[t,r]=e;return Math.max(t.lastError+r.backoffAfterErrorMs,t.lastSuccess+r.backoffAfterSuccessMs)})));return{state:o,value:(0,a.ls)(_.DT((()=>Date.now()>=s.current)),_.UI(t),_.UI((0,N.bw)((e=>e.then((()=>i(Object.assign(Object.assign({},o.current),{lastSuccess:Date.now()}))),(()=>i(Object.assign(Object.assign({},o.current),{lastError:Date.now()}))))))))}}))))}const be="clean_room";const ye=function(e,t){return o.K4((()=>({segments:{all:Z.a9([]),direct_buy:Z.a9([]),programmatic:Z.a9([])}})))};var we=r(7241),Ee=r(2197),ke=r(4870),Pe=r(9853);const De="[Prebid Monitoring]",Se=(e,t)=>{e.metrics.track({name:"sdk_prebid_monitoring_key_flag_count_total",labels:t,value:1})},Me=(e,t)=>{e.metrics.track({name:"sdk_prebid_monitoring_key_bidder_flag_count_total",labels:t,value:1})},Ie=function(e,t){const r=Oe(e);return o.K4((()=>(0,a.zG)(t,Z.UI((0,a.ls)(_.DT((e=>e.consent)),_.UI((e=>e.prebidJS)))),Z.D8(_.Eh((0,N.Or)())),Z.bw((0,a.ls)(_.tS((e=>e.completedChecks?e.mainPair:_.YP)),_.UI((t=>Se(e,{flag:"prebid_main_key",prebid_key:t.windowPropertyKey}))))),Z.UI(_.UI((e=>(0,a.zG)(e.mainPair,_.UI((t=>[t,...e.otherPairs])),_.fS((()=>e.otherPairs)))))),Z.g_(new Set,((t,n)=>(0,a.zG)(n,_.UI($.hX((e=>!t.has(e.windowPropertyKey)))),_.hX($.Od),(0,N.bw)(_.EQ((()=>e.logger.debug(De,"Nothing to report")),(t=>e.logger.debug(De,"Reporting",t)))),_.fS((()=>[])),$.UI((t=>(0,a.zG)((t=>(0,a.zG)(j.Y3((function(){var r,n;const{pbjs:o,windowPropertyKey:i}=t;e.logger.log(De,`Reporting on "${i}"`,t);const s=Ce(o);e.logger.debug(De,`Version ${o.version} parsed as`,s);const u=(0,X.zi)(o);e.logger.debug(De,"Read config",u);const c=(0,a.zG)(null!==(n=null===(r=u.realTimeData)||void 0===r?void 0:r.dataProviders)&&void 0!==n?n:[],$.Ew((e=>"permutive"===e.name)));return e.logger.debug(De,"Read data provider config",c),{pbjs:o,config:u,dataProviderConfig:c,installedModules:o.installedModules||[],version:s,windowPropertyKey:i}}),s.w),j.ak("bidders",(e=>r.acBidders(e))),j.ak("permutiveRTDProvider",(e=>r.permutiveRTDProvider(e))),j.ak("consent",(e=>r.consent(e))),j.ak("targeting",(e=>r.targeting(e)))))(t),j.Pd((r=>e.reportError(`[Prebid Monitoring] Failed to report pair "${t.windowPropertyKey}", ${r.message}`)),(()=>t.windowPropertyKey))))),$.hp,(e=>new Set([...t,...e]))))),(e=>({reportedKeys:e})))))};const Oe=e=>({acBidders:t=>j.Y3((()=>{const r=(0,Pe.Hn)("prebid")("data_provider_config",{ac_bidders:[]}),n=t.version.major>=7&&t.version.minor>=13?r.ac_bidders:[],o=(0,a.zG)(t.dataProviderConfig,_.UI((e=>{var t,r;return null!==(r=null===(t=null==e?void 0:e.params)||void 0===t?void 0:t.acBidders)&&void 0!==r?r:[]})),_.fS((()=>[]))),i=[...new Set([...n,...o])];return e.logger.debug(De,"Determined acBidders as",{acBidders:i,dynamicBidders:n,staticBidders:o}),i.forEach((r=>{Me(e,{flag:"prebid_ac_bidder",prebid_key:t.windowPropertyKey,prebid_bidder:r})})),{acBidders:i,dynamicBidders:n,readBidders:o}}),s.w),consent:t=>j.Y3((()=>{var r,n,o,i,s,a;const u=t.windowPropertyKey;t.config.consentManagement&&"object"==typeof t.config.consentManagement&&Se(e,{prebid_key:u,flag:"prebid_has_consent_management"});const c=t.installedModules.includes("gdprEnforcement");c&&Se(e,{prebid_key:u,flag:"prebid_gdpr_enforcement_module"});const d=(null===(a=null===(s=null===(i=null===(o=null===(n=null===(r=t.config)||void 0===r?void 0:r.consentManagement)||void 0===n?void 0:n.gdpr)||void 0===o?void 0:o.rules)||void 0===i?void 0:i.find((e=>"storage"===(null==e?void 0:e.purpose))))||void 0===s?void 0:s.vendorExceptions)||void 0===a?void 0:a.includes("permutive"))||!1;return d&&Se(e,{prebid_key:u,flag:"prebid_storage_exception"}),{hasGDPREnforcementModule:c,addedAsStorageException:d}}),s.w),permutiveRTDProvider:t=>j.Y3((()=>{const r=t.installedModules.includes("permutiveRtdProvider");return r&&Se(e,{prebid_key:t.windowPropertyKey,flag:"prebid_permutive_rtd"}),r}),s.w),targeting:t=>{const r=(0,a.ls)($.UI((e=>[e,null])),ue.sq),n=(t,r)=>(0,a.zG)(t,(0,N.bw)((t=>e.logger.debug(De,`Processing ${t.length} bidder request(s)`,t))),$.hX((e=>r.hasOwnProperty(e.bidderCode)&&null===r[e.bidderCode])),we.vM((e=>e.bidderCode)),ue.DZ($.f2((0,N.lo)([[e=>(e=>{var t,r,n;const o=null===(r=null===(t=null==e?void 0:e.user)||void 0===t?void 0:t.data)||void 0===r?void 0:r.find((e=>"permutive.com"===e.name));return!!(null===(n=null==o?void 0:o.segment)||void 0===n?void 0:n.length)})(e.ortb2),()=>_.G("ortb2")],[e=>{return t=e.params,["permutive","p_standard"].some((e=>{var r,n,o,i;return(null===(n=null===(r=null==t?void 0:t.visitor)||void 0===r?void 0:r[e])||void 0===n?void 0:n.length)||(null===(i=null===(o=null==t?void 0:t.keywords)||void 0===o?void 0:o[e])||void 0===i?void 0:i.length)}));var t},()=>_.G("params")],()=>_.YP]))),(0,N.bw)((t=>e.logger.debug(De,"Bidders targeting method's updated",t)))),o=o=>{e.logger.debug(De,"Bidders found with no targeting method",o);let i=r(o);const s=r=>(0,a.zG)(n([r],i),(0,N.bw)((e=>{i=Object.assign(Object.assign({},i),e)})),(0,N.bw)(ue.Su(((r,n)=>Me(e,{flag:`prebid_${n}_targeting_success`,prebid_key:t.windowPropertyKey,prebid_bidder:r})))),(0,N.bw)((()=>{Object.values(i).includes(null)||(e.logger.debug(De,`Cleaning up "bidRequested" listener for ${t.windowPropertyKey}`),t.pbjs.offEvent("bidRequested",s))})));t.pbjs.onEvent("bidRequested",s)};return j.Y3((()=>{const i=(0,a.zG)(t.pbjs.getEvents(),$.DZ((0,a.ls)(_.DT((e=>"bidRequested"===e.eventType)),_.UI((0,N.vg)("args")))));return(0,a.zG)(t.bidders.acBidders,_.DT($.Od),_.EQ((()=>e.logger.debug(De,"No bidders for targeting")),(0,a.ls)(r,(e=>Object.assign(Object.assign({},e),n(i,e))),ue.uK(Ee.ff((e=>null===e))),ke.Pd((0,a.ls)(ue.XP,_.DT($.Od),_.UI(o)),ue.Su(((r,n)=>Me(e,{prebid_bidder:r,prebid_key:t.windowPropertyKey,flag:`prebid_${n}_targeting_success`})))))))}),s.w)}}),Ce=e=>{const[t,r,n]=e.version.split("-")[0].replace("v","").split(".").map((e=>parseInt(e)));return{major:t,minor:r,patch:n}},xe=(e,t)=>(0,a.zG)(function(e,t){return(0,a.zG)(t,Z.UI((e=>{var{initdAddons:t}=e,r=(0,n._T)(e,["initdAddons"]);return Object.assign(Object.assign({},r),{isInitd:t.has(be)})})),(t=>ye(e,t)))}(e,Z.vP(t)),o.YO("segmentation"),o.ak("prebidMonitoring",(()=>Ie(e,Z.vP({consent:t.consent,prebidJS:t.prebidJS})))),o.UI((e=>e.segmentation))),Te=function(e,t){return o.K4((()=>(e.removeExternalData(Ae),Z.a9({cohorts:[],ssps:[],gamTargetingValues:[]}))))};const Ae="_pssps",qe=function(e){let{externalData:t}=e;return o.K4((()=>{t.removeExternalData(Ue)}))};const Ue="_pfws";const Ge=()=>({allCohorts:[],gam:[],xandrSsp:[]}),je=function(e,t){return o.K4((()=>Z.a9(Ge())))};const Le=(e,t,r,n)=>t+(r-t)*n/(Math.pow(2,e)-1),Re=(e,t)=>{const r=(e,t)=>{const r=e.toString(16);return("0".repeat(t)+r).slice(Math.min(-t,-r.length))};return`${r(e.getUint32(t),8)}-${r(e.getUint16(t+4),4)}-${r(e.getUint16(t+6),4)}-${r(e.getUint16(t+8),4)}-${r(e.getUint32(t+10),8)}${r(e.getUint16(t+14),4)}`},ze=e=>{const t=[1,2],r=e.getInt8(0);if(1===r)return Be(e);if(2===r)return We(e);{const n=(0,_.Y3)((()=>Re(e,1))),o=(0,_.g_)((()=>"Couldn't decode model id"),(e=>`Model id was ${e}`))(n);throw new Error(`Decoding only supported for version(s): ${t}; Supplied version was ${r}; ${o}`)}},Be=e=>$e(e,1),We=e=>$e(e,2),$e=(e,t)=>{const r=Re(e,1),n=((e,t)=>{switch(String.fromCharCode(e.getInt8(t))){case"1":return"1p";case"3":return"3p"}})(e,17),o=e.getInt8(18),i=e.getFloat32(19),s=e.getFloat32(23),[a,u]=((e,t,r,n,o,i)=>{const s={};let a=0;do{let r;1===i?(a=e.getUint16(t),r=e.getUint16(t+2),t+=4):(a=e.getUint32(t),r=e.getUint16(t+4),t+=6),s[0===a?"const":a]=r.toString(36)}while(0!==a);return[s,t]})(e,27,0,0,0,t);return[{version:t,id:r,data_preference:n,weights:a,precision:o,min:i,max:s},u]};class Ke{constructor(e,t,r,o,i){this.network=e,this.logger=t,this.api=r,this.metrics=o,this.permutiveData=i,this.MODELS_LAST_UPDATED_KEY="models_last_updated",this.MODELS_DATA_KEY="models_data",this.MODELS_SYNC_TIMEOUT_IN_SECONDS=86400;const s=i.getData(this.MODELS_LAST_UPDATED_KEY),a=o.startTimer("sdk_load_lookalike_models_task_duration_seconds",{}),u=()=>this.fetchModels().then((e=>(this.permutiveData.setData(this.MODELS_DATA_KEY,e),this.permutiveData.setData(this.MODELS_LAST_UPDATED_KEY,(new Date).getTime()),e))).catch((e=>(this.api.reportError("Failed decoding binary models.\nError: "+e),{}))),c=()=>(0,n.mG)(this,void 0,void 0,(function*(){return this.permutiveData.getData(this.MODELS_DATA_KEY)}));this.models=(()=>(!s||isNaN(s)||(new Date).getTime()>s+1e3*this.MODELS_SYNC_TIMEOUT_IN_SECONDS?u():c().then((e=>e||u()))).then((e=>(e=>{const t=Object.keys(e);return t.length>0&&e[t[0]].hasOwnProperty("precision")})(e)?(e=>{const t={},r=Object.keys(e),n=e=>{const t={"1p":{}},{precision:r,min:n,max:o}=e,i=e["1p"],s=Object.keys(i);for(let e=0;e<s.length;e++){const a=s[e],u=parseInt(i[a],36);t["1p"][a]=Le(r,n,o,u)}return t};for(let o=0;o<r.length;o++){const i=r[o],s=e[i];t[i]=n(s)}return t})(e):e)))().then((e=>(this.metrics.stopTimer("sdk_load_lookalike_models_task_duration_seconds",a),e)))}getModels(){return this.models}extractModelsFromJsonArray(e,t){const r={};for(let n=0;n<e.length;n++){const o=e[n],{id:i,weights:s}=o;if(void 0===i||void 0===s)continue;const a=t(o);Object.keys(s).forEach((e=>{a["1p"][e]=s[e]})),r[i]=a}return r}fetchModels(){const e=()=>this.api.modelsJson(this.metrics).then((e=>this.extractModelsFromJsonArray(e.models,(()=>({"1p":{}}))))).catch((e=>(this.api.reportError("Failed fetching json models.\nError: "+e),{})));return(()=>this.api.modelsBinary(this.metrics).then((e=>this.extractModelsFromJsonArray(function(e){const t=[];let r=0;for(;r<e.byteLength;){const[n,o]=ze(new DataView(e,r));t.push(n),r+=o}return t}(e),(e=>{let{precision:t,max:r,min:n}=e;return{"1p":{},precision:t,min:n,max:r}})))).catch((t=>(this.logger.log("Failed fetching binary models, reverting to JSON.\nError: "+t),this.metrics.track({name:"sdk_binary_models_missing_count",value:1,labels:{}}),e()))))()}}const Ne=function(e){return o.K4((()=>{const t=new Ke(e.permutiveApi,e.logger,e.api,e.metrics,e.permutiveData);return(0,a.zG)(t.getModels(),Z.p4,Z.UI(_.tS(_.Uo)))}))};const Fe=(e,t)=>(0,a.zG)(o.vP({classificationModels:je(e,t)}),o.UI((e=>e.classificationModels))),Ye=function(e,t){return(0,a.zG)(Qe(e),ve({backoffAfterErrorMs:6e5}),o.VS((e=>he(Z.UI((t=>{let{tpdUsage:r,userId:n}=t;return{validityKey:()=>n,freshnessKey:(0,a.ls)((()=>r),_.EQ((()=>0),(0,a.ls)(JSON.stringify,N.vp))),refresh:(0,a.ls)((()=>r),_.hX((e=>Object.keys(e).length>0)),_.tS((t=>e({user_id:n,time:new Date,tpd_segments:t}))))}}),t)))),o.UI(a.Q1))};const Qe=e=>t=>{const{config:r,metrics:n,permutiveApi:o,permutiveUrls:i}=e,s=n.startTimer("sdk_http_tpd_usage_seconds",{});return o.req({url:i.getEndpointUrl("/tpd/usage",_.G(r.apiVersion)),method:"POST",payload:t,contentType:"text/plain",dataType:"json",withCredentials:!1}).then((e=>(n.stopTimer("sdk_http_tpd_usage_seconds",s),e)))};function Ve(e,t){const[r,n]=Z.Ue(0);let i=!1;const s=()=>{try{i=!0,n(r.current+1)}finally{i=!1}},u=["amp","gigya","pxid","sailthru"],c=(0,a.zG)(t.identities,Z.UI(ue.z7((e=>!u.includes(e)))));return(0,a.zG)(o.vP({fetchFromNewEndpoint:(0,a.zG)(He(e),ve({backoffAfterErrorMs:6e5})),fetchFromLegacyEndpoint:(0,a.zG)(Je(e),ve({backoffAfterErrorMs:6e5}))}),o.VS((n=>{let{fetchFromNewEndpoint:o,fetchFromLegacyEndpoint:s}=n;const u=t=>(0,a.zG)(o(t),_.UI((e=>e.catch((()=>(0,a.zG)(s(t.identities),_.fS((()=>e))))))),_.wp((()=>s(t.identities))),_.UI((0,N.bw)((t=>{const r=e.metrics.startTimer("sdk_get_third_party_data_task_duration_seconds",{});t.catch(a.Q1).then((()=>{e.metrics.stopTimer("sdk_get_third_party_data_task_duration_seconds",r)}))}))));return he((0,a.zG)(Z.vP(r,t.userId,t.sessionId,c),Z.UI((e=>{let[t,r,n,o]=e;return{validityKey:()=>r,freshnessKey:()=>`${Xe(o)},${n}`,refresh:()=>(0,a.zG)({userId:r,identities:o},_.DT((e=>{let{identities:t}=e;return i&&!ue.xb(t)})),_.tS(u))}}))))})),o.UI((e=>({refresh:s,data:e}))))}const He=e=>t=>(0,n.mG)(void 0,void 0,void 0,(function*(){return(yield e.api.reqWithMetrics(e.metrics,"sdk_http_audience_matching_seconds",{url:e.permutiveUrls.getAudienceMatchingEndpointUrl("/id",_.G("v1"),t.userId),payload:{identities:(0,a.zG)(t.identities,ue.Yz,$.UI((e=>{let[t,r]=e;return{tag:t,id:r}})))},method:"POST",withCredentials:!1,dataType:"json"})).items})),Je=e=>t=>e.api.reqWithMetrics(e.metrics,"sdk_http_tpd_seconds",{url:e.permutiveUrls.getEndpointUrl("/tpd",_.G(e.config.apiVersion)),method:"POST",payload:{user_id:t},contentType:"text/plain",dataType:"json",withCredentials:!1}),Xe=(0,a.ls)(JSON.stringify,N.vp);const Ze=(e,t)=>(0,a.zG)(o.vP({data:Ve(e,{identities:t.identities,sessionId:t.sessionId,userId:t.userId}),usageReporting:Ye(e,Z.vP({tpdUsage:t.tpdUsage,userId:t.userId})),removeLegacyDataFromLocalStorage:o.dQ((t=>{let{previousState:r}=t;if(!r){const t=e.namespace.getNamespacedStorageKey("permutive-data-tpd");localStorage.removeItem(t)}return{value:null,state:Z.a9(!0)}}))}),o.ak("analytics",(r=>{let{data:{data:n}}=r;return function(e,t){return o.dQ((r=>{let{previousState:n}=r;var o;return{state:(0,a.zG)(Z.vP(t.userId,t.providerSegments),Z.g_(null!==(o=n)&&"object"==typeof o?o:{userId:"",providerHashes:{}},((t,r)=>{let[n,o]=r;const i=(0,a.zG)(o,_.fS((()=>({})))),s=(0,a.zG)(i,ue.UI((0,N.SL)(N.vp))),u=(0,a.zG)(t,_.DT((e=>e.userId===n)),_.UI((e=>e.providerHashes)),_.fS((()=>({}))));return(0,a.zG)(i,ue.z7((e=>s[e]!==(u[e]||0))),ue.Su(((t,r)=>{e("ThirdPartySegments",{data_provider:t,segments:[...r]})}))),{userId:n,providerHashes:s}}))),value:void 0}}))}(e.track,{providerSegments:n,userId:t.userId})})),o.UI((e=>{let{data:t}=e;return{data:t.data,refreshData:t.refresh}})));var et=r(5619);Z.a9([]),Z.a9([]),Z.a9([]),Z.a9([]),Z.a9([]),Z.a9([]),Z.a9(et.b()),Z.a9(_.YP);function tt(e,t,r){const{addonsLoaded:n,consent:i,currentTimestampSecs:s,enabledAddons:u,identities:c,realtime:d,sessionId:l,userId:f,viewId:p}=t,[g,h]=(0,a.zG)(Z.Ue(_.YP),(e=>{let[t,r]=e;return[(0,a.zG)(t,Z.VS(_.EQ((()=>Z.a9(_.YP)),Z.UI(_.G)))),r]})),[m,v]=(0,a.zG)(Z.Ue(Z.a9(_.YP)),(e=>{let[t,r]=e;return[Z.xH(t),r]}));return(0,a.zG)(o.vP({lookalikeModels:Ne(e),metricContext:et.X({sessionId:l,userId:f,viewId:p})}),o.ak("sdkql",(t=>{let{lookalikeModels:o}=t;return r(e,{addonsLoaded:n,consent:i,initdAddons:u,lookalikeModels:o,nonQlCohorts:g,thirdPartyData:m,userId:f})})),o.ak("demandPartners",(t=>{let{sdkql:{queryLanguage:r}}=t;return((e,t)=>(0,a.zG)(o.vP({ssp:Te(e.externalData,t)}),o.UI((e=>{let{ssp:t}=e;return t}))))(e,{addonsLoaded:n,consent:i,initdAddons:u,standardCohorts:r.cohorts.standard})})),o.ak("mediaAndEntertainment",(t=>{let{sdkql:{queryLanguage:r}}=t;return((e,t)=>(0,a.zG)(o.vP({freewheel:qe(Object.assign({activationManager:e.activationManager,externalData:e.externalData},t))}),o.UI((0,a.a9)({}))))(e,{addonsLoaded:n,consent:i,initdAddons:u,queryLanguageCohorts:r.cohorts.all})})),o.ak("publishers",(t=>{let{sdkql:{queryLanguage:r}}=t;return((e,t)=>(0,a.zG)(o.vP({addressability:Fe(e,Z.vP(t)),audienceMatching:Ze(e,{identities:t.identities,sessionId:t.sessionId,tpdUsage:t.tpdUsage,userId:t.userId})}),o.UI((e=>{let{addressability:t,audienceMatching:r}=e;return{cohorts:{all:Z.UI((e=>e.allCohorts),t),gam:Z.UI((e=>e.gam),t),xandrSsp:Z.UI((e=>e.xandrSsp),t)},refreshThirdPartyData:r.refreshData,thirdPartyData:r.data}}))))(e,{addonsLoaded:n,consent:i,currentTimestampSecs:s,identities:c,initdAddons:u,queryLanguageCohorts:r.cohorts.all,realtime:d,sessionId:l,tpdUsage:r.tpdUsage,userId:f})})),o.ak("advertisers",(t=>{let{demandPartners:r,sdkql:o}=t;return xe(e,{addonsLoaded:n,consent:i,currentTimestampSecs:s,customCohorts:o.queryLanguage.cohorts.custom,demandPartnerCohorts:Z.UI((e=>e.cohorts),r),initdAddons:u,prebidJS:o.prebidJS,sessionId:l,standardCohorts:o.queryLanguage.cohorts.standard,userId:f,viewId:p})})),o.bw((e=>{let{publishers:t}=e;return v(t.thirdPartyData)})),o.UI((e=>{let{advertisers:t,demandPartners:r,metricContext:n,publishers:o,sdkql:i}=e;return{cloudCohorts:{all:(0,a.zG)(Z.vP(o.cohorts.all,t.segments.all,Z.UI((e=>e.cohorts),r)),Z.UI($.xH)),gam:(0,a.zG)(Z.vP(o.cohorts.gam,t.segments.all,Z.UI((e=>e.gamTargetingValues),r)),Z.UI($.xH)),xandrSsp:o.cohorts.xandrSsp},eventCollection:i.eventCollection,metricContext:n,pbjsPair:Z.UI((e=>e.mainPair),i.prebidJS),queryLanguageCohorts:i.queryLanguage.cohorts,refreshThirdPartyData:o.refreshThirdPartyData,resetQL:i.reset}})),o.bw((e=>{let{cloudCohorts:t}=e;return h(_.G(t.all))})))}function rt(e){return ge(e,nt)}function nt(e,t){return tt(e,t,ce)}},6640:(e,t,r)=>{r.d(t,{B9:()=>g,iq:()=>l,ti:()=>h});var n=r(2688),o=r(787),i=r(5e3),s=r(6567),a=r(3735),u=r(2652),c=r(3030);const d="__permutive.",l="__permutiveConfigQueryParams";const f={default:{windowKey:"permutive",environment:"default",apiHost:"api.permutive.com",apiKey:"",cdnBaseUrl:"cdn.permutive.com",pxidHost:"prmutv.co",apiVersion:"v2.0",sdkErrorsApiVersion:"v2",advertiserApiVersion:"v2",classificationModelsApiVersion:"v1",apiProtocol:"https",loggingEnabled:!1,tracingEnabled:!1,requestTimeout:5e3,cookieDomain:"."+(0,c._Y)(window.location.hostname),cookieName:"permutive-id",cookieExpiry:function(){const e=new Date;return e.setMonth(e.getMonth()+6),e.toUTCString()}(),eventsTTLInDays:null,permutiveDataMiscKey:"permutive-data-misc",permutiveDataModelsKey:"permutive-data-models",permutiveDataQueriesKey:"permutive-data-queries",permutiveDataEnrichersKey:"permutive-data-enrichers",stateNamespace:"",sendClientErrors:!0,metricsSamplingPercentage:20,eventsCacheLimitBytes:25e5,segmentSyncApiHost:"867f8423-d142-4fd1-ae8d-1a9bbbdf2358.partner.permutive.app",consentRequired:!1,sdkType:"stable",viewId:null,localStorageDebouncedKeys:["internal_query_states"],localStorageWriteDelay:1e3,localStorageWriteMaxDelay:1500,watson:{enabled:!0}},production:{},development:{apiProtocol:"http",loggingEnabled:!0,tracingEnabled:!0,sendClientErrors:!1}},p=e=>{const t={consentRequired:!0,loggingEnabled:!0,sendClientErrors:!0,tracingEnabled:!0},r={eventsTTLInDays:!0,eventsCacheLimitBytes:!0,metricsSamplingPercentage:!0,requestTimeout:!0,localStorageWriteDelay:!0,localStorageWriteMaxDelay:!0};return Object.keys(e).reduce(((n,o)=>{if(t.hasOwnProperty(o)){const t="true"===e[o];return Object.assign(Object.assign({},n),{[o]:t})}if(r.hasOwnProperty(o)){const t=Number(e[o]);return isNaN(t)?n:Object.assign(Object.assign({},n),{[o]:t})}return Object.assign(Object.assign({},n),{[o]:e[o]})}),{})},g=function(){let{getQueryParams:e=c.zM}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e=>Object.entries(e).reduce(((e,t)=>{let[r,n]=t;if(!(0===r.indexOf(d)))return e;const o=r.replace(d,"");return[...e,[o,n]]}),[]);return(0,a.zG)(i.Y3((()=>(0,a.zG)(e(),t,(e=>(0,u.m8)(...e)),p,(e=>_({queryConfig:e})))),(e=>`Failed to parse query params. Got ${(0,n.w)(e).message}`)))},_=e=>{let{queryConfig:t}=e;const r=(0,a.zG)(s.Y3((()=>window.sessionStorage.getItem(l))),s.tS(s.ij),s.tS((0,a.ls)(o.A,s.ij)),s.fS((()=>({}))));return(0,u.PM)(r,t)},h=(e,t)=>{var r;const n=null!==(r=e.environment&&f[e.environment])&&void 0!==r?r:{};return(0,u.PM)(f.default,n,e,t)}},4564:(e,t,r)=>{r.d(t,{NY:()=>h,vk:()=>p,qA:()=>f});var n=r(655),o=r(2688),i=r(5e3),s=r(3735),a=r(6934),u=r(8259),c=r(1410),d=r(2851);var l=r(30);const f=()=>({opt_in:!0,token:c.L}),p=()=>({opt_in:!1,token:""}),g=e=>{return(0,s.ls)((t=e,e=>(0,s.zG)((0,l.J)(t.consentRequired,e),(e=>{let{consentData:r,isValid:n}=e;return t.consentDatabase.put(r,c.L),n}))),(e=>{let{logger:t,messages:r}=e;return e=>{const n=e?"given":"revoked";return t.log("Consent has been",n),r.emit(`permutive:consent:${n}`),e}})(e));var t},_=e=>(t,r)=>{e.on("permutive:consent:revoked",t),e.on("permutive:consent:given",r)},h=e=>(0,n.mG)(void 0,void 0,void 0,(function*(){const{logger:t,namespace:r,consentRequired:n,messages:f}=e,p=new u.oP(window.localStorage,r),h=(0,l.J)(n,yield p.get(c.L)),m=yield(0,s.zG)(a.Y3((()=>p.put(h.consentData,c.L)),(e=>new Error(`LocalStorage access is required. ${(0,o.w)(e).message}`))),(e=>e()));if(i.nM(m))return m;const{consentRef:v,giveConsent:b,revokeConsent:y,isRevoked:w,isGiven:E}=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const[t,r]=d.Ue(e),n=()=>!0===t.current;return{consentRef:t,revokeConsent:()=>(r(!1),t.current),giveConsent:()=>(r(!0),t.current),isRevoked:()=>!n(),isGiven:n}}(h.isValid),k={consentRef:v,isGiven:E,isRevoked:w,listenForConsent:_(f)};k.listenForConsent(y,b);const P=g({consentDatabase:p,consentRequired:n,logger:t,messages:f});return i.F2({consentTracking:k,consentValidation:P,consentDatabase:p})}))},1410:(e,t,r)=>{r.d(t,{L:()=>n});const n="permutive-consent"},7708:(e,t,r)=>{r.d(t,{D:()=>l});var n=r(1500),o=r(5e3),i=r(3735),s=r(6567),a=r(5151),u=r(4922),c=r(1410),d=r(30);const l=e=>{const{partialTagWithKey:t}=e,r=t.key;var l;window[r].consent=(l=e,(0,i.ls)(l.consentModule.consentValidation,s.DT(Boolean),s.UI((0,u.H)(l)),i.Q1));const f=(0,s.EQ)((()=>{return t={consentDatabase:e.consentModule.consentDatabase,consentRequired:e.tag.config.consentRequired},(0,i.zG)((0,i.a9)(t.consentDatabase.get(c.L)),(0,a.UI)((e=>(0,d.J)(t.consentRequired,e).isValid)));var t}),a.of);return(0,i.zG)((0,i.zG)((e=>{let{consentModule:t,tag:r}=e;const o=(0,n.Ew)((function(e){return"consent"===e.functionName}))(r.q);return(0,s.UI)((e=>t.consentValidation(e.arguments[0])))(o)})(e),f),(0,a.UI)((e=>e?(0,o.F2)(!0):(0,o.t$)("No consent to run on the page"))))}},4769:(e,t,r)=>{r.d(t,{v:()=>n});const n=(e,t,r)=>function(){const n=r()?t:e;return n(...arguments)}},30:(e,t,r)=>{r.d(t,{J:()=>s});var n=r(3735),o=r(6567),i=r(4564);const s=(e,t)=>(0,n.zG)((0,o.ij)(t),(t=>!1===e&&(0,o.Wi)(t)?{isValid:!0,consentData:(0,i.qA)()}:(e=>(0,o.pC)(e)&&(e=>null!==e&&"object"==typeof e)(e.value)&&(e=>{var t;return!0===e.opt_in&&"string"==typeof e.token&&(null===(t=e.token)||void 0===t?void 0:t.length)>0})(e.value))(t)?{isValid:!0,consentData:t.value}:{isValid:!1,consentData:(0,i.vk)()}))},3298:(e,t,r)=>{r.d(t,{S:()=>m});var n=r(3735),o=r(655),i=r(6567),s=r(1500),a=r(2851),u=r(1540),c=r(2497),d=r(5165);var l=r(2652);class f{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.wait_prev=t.wait_prev||!1,this.block_next=t.block_next||!1,this.started=!1,this.complete=!1,this.task=e}waits(){return this.wait_prev}blocks(){return this.block_next}execute(e){this.started=!0,this.task((()=>{this.complete=!0,e()}))}}var p=r(6315);class g{constructor(e,t,r,n,o,i,s,a,u,c,d,l,f,p,g,_,h,m,v,b,y,w,E,k,P,D,S,M){this.logger=e,this.api=t,this.activationManager=r,this.sessionManager=n,this.metrics=o,this.viewId=i,this.userId=s,this.network=a,this.enrichers=u,this.clientContext=c,this.unprocessedEvents=d,this.queryManager=l,this.taskQueue=f,this.identities=p,this.permutiveReset=g,this.messages=_,this.addons=h,this.trace=m,this.permutiveRealtime=v,this.state=b,this.customProperties=y,this.config=w,this.permutiveData=E,this.externalData=k,this.cookies=P,this.identitiesIngestor=D,this.global=S,this.nextGen=M,this.initialisedAddons=[],this.triggerListeners=[]}identify(e){const t="[Identify]";this.logger.debug("<call> identify",e);const r=(0,l.b2)(),a=this.identities.parseCustomerDefinedIdentities(e),c=Object.assign(Object.assign({},this.identities.getIdentitiesMap()),a.reduce(((e,t)=>{let{tag:r,id:n,priority:o,expiry:i}=t;return Object.assign(Object.assign({},e),{[r]:Object.assign(Object.assign({id:n},void 0!==o?{priority:o}:{}),void 0!==i?{expiry:i}:{})})}),{})),d=(0,n.zG)(Object.values(c),s.DZ((e=>i.ij(e.id)))),g=this.identities.getPrioritizedIdentities(c);if("string"==typeof e&&(0,u.Bt)("867f8423-d142-4fd1-ae8d-1a9bbbdf2358","867f8423-d142-4fd1-ae8d-1a9bbbdf2358",d,window.location.hostname,this.userId.get()))return r.resolve(),r.promise;const _=()=>(0,o.mG)(this,void 0,void 0,(function*(){this.nextGen.refreshThirdPartyData()})),h=e=>(0,o.mG)(this,void 0,void 0,(function*(){yield(0,p.Yj)({clientContext:this.clientContext,global:this.global,identities:this.identities,logger:this.logger,nextGen:this.nextGen,reset:this.permutiveReset,userId:this.userId},e.user_id)}));return this.taskQueue.add(new f((e=>(0,o.mG)(this,void 0,void 0,(function*(){this.logger.debug("<task> identify",a);const n=()=>(0,o.mG)(this,void 0,void 0,(function*(){this.logger.log(t,"request identity");const e=yield this.api.identify(this.metrics,this.userId,g);this.userId.isEqual(e.user_id)?(this.metrics.track({name:"sdk_identity_remained_total",value:1,labels:{identify_reason:"identify_call"}}),yield _()):(this.metrics.track({name:"sdk_identity_changed_total",value:1,labels:{identify_reason:"identify_call"}}),yield h(e))}));this.identities.setIdentities(a).identifyRequestRequired()?yield n():this.logger.log(t,"skip request"),this.logger.debug("<done> identify",a),e(),r.resolve(),yield this.identitiesIngestor.ingestIfEligible(a).catch((e=>this.api.reportError(`Couldn't ingest identities, got ${e}`,this.userId.get())))}))),{wait_prev:!0,block_next:!0})),r.promise}on(e,t){return this.nextGen.eventCollection.on(e,t)}once(e,t){return this.nextGen.eventCollection.once(e,t)}track(){var e,t,r;const[n,o,i]=[arguments.length<=0?void 0:arguments[0],(arguments.length<=1?void 0:arguments[1])||{},(arguments.length<=2?void 0:arguments[2])||{}],s=this.trace.startSpan("track_event");this.logger.log("<call> track",n);const a=(0,l.b2)(),u=null!==(e=i.unprocessedData)&&void 0!==e?e:{},c=null!==(t=u.sessionId)&&void 0!==t?t:this.sessionManager.getSessionId(),d=null!==(r=u.viewId)&&void 0!==r?r:this.viewId.get(),p={success:i.success||(e=>{}),error:i.error||((e,t)=>{})};return this.taskQueue.add(new f((e=>{this.logger.log("<task> track",n);return(u.client?Promise.resolve(u.client):this.clientContext.getClient()).then((t=>{var r;const u={name:n,properties:o,session_id:c,view_id:d,time:new Date};return this.nextGen.eventCollection.track({client:o.client?(0,l.PM)(t,o.client):t,event:u,requestOptions:p,useBeacon:null!==(r=i.useBeacon)&&void 0!==r&&r}).then((t=>{this.logger.log("<done> track",u.name),a.resolve(u),e(),s.finish()})).catch((e=>{var t;null===(t=p.error)||void 0===t||t.call(p,e),this.api.reportError(e,this.userId.get()),a.reject(e)}))}))}))),a.promise}trigger(e,t,r){const n=(0,l.b2)();this.logger.log("<call> trigger",e),this.triggerListeners=this.triggerListeners||[];return this.taskQueue.add(new f((t=>{this.logger.log("<task> trigger",e);const o=this.messages.on("permutive:query:changed",(function(t){t.queryCode===e&&(r(t.result),n.resolve(t.result))}));this.triggerListeners.push(o),this.logger.log("<done> trigger",e),t()}))),n.promise}query(){return Promise.resolve({result:!1})}segment(e,t){const r=(0,l.b2)();this.logger.log("<call> segment",e);return this.taskQueue.add(new f((n=>{var o;this.logger.log("<task> segment",e);const i=this.queryManager.stateMap.value[e];t((null===(o=null==i?void 0:i.result)||void 0===o?void 0:o.result)||!1),r.resolve(),this.logger.log("<done> segment",e),n()}))),r.promise}segments(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";const r=(0,l.b2)();this.logger.log("<call> segments");return this.taskQueue.add(new f((n=>{this.logger.log("<task> segments ("+t+")");const o=o=>{e(o),r.resolve(o),this.logger.log("<done> segments ("+t+")"),n()};"dfp"===t?this.messages.once("permutive:dfp:ready",(()=>{this.addons.dfp&&o([...this.addons.dfp.segments.liveSegments])})):o([...this.nextGen.queryLanguageCohorts.all.current])}))),r.promise}reset(){return Promise.all([this.api.reset(this.metrics),this.identities.reset(),this.permutiveReset.reset(),this.unprocessedEvents.PageviewComplete.reset(),this.nextGen.resetQL({downloadState:!1,preserveEventsFromCurrentView:!1})]).then((e=>{let[t]=e;this.userId.set(t.id)})).then((()=>{this.messages.emit("permutive:reset")})).catch((e=>{this.api.reportError(`Error resetting internals. Got ${e}`)}))}addon(e,t){const s=Object.assign(Object.assign({},t),{permutive:this,api:this.api,activationManager:this.activationManager,network:this.network,clientContext:this.clientContext,logger:this.logger,unprocessedEvents:this.unprocessedEvents,metrics:this.metrics,state:this.state,queryManager:this.queryManager,messages:this.messages,userId:this.userId,viewId:this.viewId,customProperties:this.customProperties,config:this.config,permutiveData:this.permutiveData,sessionManager:this.sessionManager,addons:this.addons,enrichers:this.enrichers,externalData:this.externalData,cookies:this.cookies,nextGenOutput:this.nextGen}),u=(0,n.zG)(this.nextGen.pbjsPair,a.UI(i.UI((0,l.vg)("pbjs"))));if(-1===this.initialisedAddons.indexOf(e))switch(this.initialisedAddons.push(e),this.messages.emit("permutive:addon:preinit",e),e){case"web":Promise.resolve().then(r.bind(r,4400)).then((e=>this.addons.web=new e.WebAddon(s))).then((()=>this.messages.emit("permutive:web:ready")));break;case"publishers":case"overlays":case"scriptrunner":case"nativo":case"freewheel":case"facebook_pixel_v2":case"eyeota_pixel":case"rubicon":case"rubicon_ssp":case"tracking_pixel":case"twitter_pixel":case"pinterest_pixel":case"local_storage":case"appnexus_adserver":case"classification_models":case"clean_room":case"gam_log":case"smart":case"tradedesk":case"ddp":case"dbm":case"appnexus":case"pubmatic":case"ctv":case"ssp":0;break;case"dfp":Promise.resolve().then(r.bind(r,9658)).then((e=>(0,o.mG)(this,void 0,void 0,(function*(){return this.addons.dfp=yield e.createAddon(s)}))));break;case"prebid":Promise.resolve().then(r.bind(r,9581)).then((e=>this.addons.prebid=new e.PrebidAddon(Object.assign(Object.assign({},s),{pbjs:u}))))}else"web"===e&&!0!==t.auto_init?((e,t,r,n)=>new Promise(((o,s)=>{var a;const u=(0,i.Y3)(e);if((0,i.pC)(u))return o(u.value);r.once(t,(()=>(0,i.g_)((()=>s(new Error(`Error after waiting for event ${t}`))),o)((0,i.Y3)(e))));const c=null!==(a=null==n?void 0:n.timeout)&&void 0!==a?a:1e4;setTimeout((()=>s(new Error(`Event ${t} was not received within the timeout period ${c}ms`))),c)})))((()=>{if(!this.addons.web)throw new Error('"web" addon not ready');return this.addons.web.reset(t)}),"permutive:web:ready",this.messages).catch((e=>{this.api.reportError(`Got error while trying to reset web. Got ${e.message}`,this.state.userId.get())})):"ctv"===e&&(null==t||t.auto_init)}addonIfTCFConsent(e,t){const r=()=>{switch(e.key){case"tradedesk":this.addons.tradedesk=new e.Addon(t);break;case"ddp":this.addons.ddp=new e.Addon(t);break;case"appnexus":this.addons.appnexus=new e.Addon(t);break;case"pubmatic":this.addons.pubmatic=new e.Addon(t)}},o=t=>t[d.D[e.key]]?r():(0,n.Q1)();return(0,c._8)(window).then((e=>{switch(e.type){case"missing":return r();case"aborted":return(0,n.Q1)();case"loaded":return(0,n.zG)((0,c.Ec)(e.data),(0,i.g_)(r,o))}}))}ready(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"initialised";const r=(0,l.b2)(),n=()=>{e(),r.resolve()};switch(t){case"initialised":this.permutiveRealtime.isReady()?n():this.messages.on("permutive:ready",n);break;case"realtime":this.permutiveRealtime.isRealtime()?n():this.messages.once("permutive:realtime",n)}return r.promise}}var _=r(4769);const h=e=>{const{logger:t,consentTracking:r}=e,i=function(){return t.debug("Methods[track]: Cannot track as consent is revoked"),Promise.resolve(null)};return e=>class extends e{constructor(){super(...arguments),this.track=(0,_.v)(super.track.bind(this),i,r.isRevoked),r.listenForConsent((()=>this.consentRevoked()),n.Q1)}consentRevoked(){return(0,o.mG)(this,void 0,void 0,(function*(){return yield this.sessionManager.reset(),this.reset()}))}}},m=(e,t,r,o,i,s,a,u,c,d,l,f,p,_,m,v,b,y,w,E,k,P,D,S,M,I,O,C,x)=>new((0,n.zG)(g,h({consentTracking:C,logger:e})))(e,t,r,o,i,s,a,u,c,d,l,f,p,_,m,v,b,y,w,E,k,P,D,S,M,I,O,x)},6416:(e,t,r)=>{r.d(t,{O:()=>u});var n=r(1828),o=r(5e3),i=r(3735);const s=e=>(0,i.zG)((e=>"function"==typeof e.Map?(0,o.F2)(new e.Map([["a",1]])):(0,o.t$)("Maps not supported"))(e),o.tS((e=>1===e.size?(0,o.F2)(null):(0,o.t$)("Iterable Maps not supported")))),a=e=>(0,i.zG)((e=>"function"==typeof e.Set?(0,o.F2)(new e.Set([1,2])):(0,o.t$)("Sets not supported"))(e),o.tS((e=>2===e.size?(0,o.F2)(null):(0,o.t$)("Iterable Sets not supported")))),u=e=>(0,i.zG)((0,n.gz)(o.G5)(s(e),a(e),(e=>e.Worker&&e.Blob?(0,o.F2)(null):(0,o.t$)("WebWorkers not supported"))(e)),(e=>(0,o.UI)(i.Q1)(e)))},6315:(e,t,r)=>{r.d(t,{Yj:()=>f,TZ:()=>d});var n=r(655),o=r(2688),i=r(3735),s=r(6567),a=r(2652);var u=r(1540);const c=e=>(0,n.mG)(void 0,void 0,void 0,(function*(){yield e.identities.thirdParty,yield function(e,t){return(0,u.Bt)("867f8423-d142-4fd1-ae8d-1a9bbbdf2358","867f8423-d142-4fd1-ae8d-1a9bbbdf2358",e.identities.getPrioritizedIdentities(e.identities.getIdentitiesMap()).map((e=>e.id)),window.location.hostname,e.userId.get())?t.reset():Promise.resolve()}(e,e.permutiveMethods);const t=yield function(e){const t=e.trace.startSpan("identify");0;return(e=>(0,n.mG)(void 0,void 0,void 0,(function*(){const t="[Identify Init]",{logger:r,api:n,userId:o,identities:i,metrics:s,identitiesIngestor:u,messages:c,sessionManager:d}=e,l=yield i.thirdParty,f=i.extractIdentifyFromQueue(e),p=i.getIdentitiesMap(),g=f.reduce(((e,t)=>{let{tag:r,id:n,priority:o,expiry:i}=t;return Object.assign(Object.assign({},e),{[r]:Object.assign(Object.assign({id:n},i?{expiry:i}:{}),void 0!==o?{priority:o}:{})})}),{}),_=Object.assign(Object.assign({},p),g),h=i.setIdentities(Object.entries(_).map((e=>{let[t,{id:r,priority:n,expiry:o}]=e;return Object.assign(Object.assign({tag:t,id:r},o?{expiry:o}:{}),void 0!==n?{priority:n}:{})}))),m=i.getPrioritizedIdentities(_);r.log("Begin identification");const v=e.sessionCount>1&&d.sessionHasChanged()||l.identifyRequestRequired()||h.identifyRequestRequired()?yield(r.debug(t,"request identity"),n.identify(s,o,m).then((e=>{const n=e.user_id;return o.isEqual(n)?{identityChanged:!1}:(r.debug(t,"fetch received new user id",n),{identityChanged:!0,userId:n})})).catch((e=>(n.reportError(`${t} Fetch failed. Got ${e}`,o.get()),{identityChanged:!1}))).then((0,a.bw)((t=>e.metrics.track({name:`sdk_identity_${t.identityChanged?"changed":"remained"}_total`,value:1,labels:{identify_reason:"sdk_init"}}))))):(r.debug(t,"skip request"),{identityChanged:!1});return u.ingestIfEligible(m).catch((e=>n.reportError(`Couldn't ingest identities, got ${e}`,v.identityChanged?v.userId:o.get()))),c.emit("permutive:user:ready"),r.debug(t,"result",v),v})))(e).catch((t=>(e.api.reportError(`Failed to identify. Got ${(0,o.w)(t)}`),{identityChanged:!1}))).then((e=>(t.finish(),e)))}(e);return t.identityChanged?yield f(e,t.userId):(e.logger.log("Identity has not changed"),e.nextGen.refreshThirdPartyData()),t})),d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>{};return(0,n.mG)(void 0,void 0,void 0,(function*(){c(e).then(t),yield l(e.logger,e.trace,e.permutiveMethods,e.unprocessedEvents,e.queryManager,e.eventCollection,e.metrics),p(e.global,e.clientContext)}))};function l(e,t,r,o,a,u,c){e.log("Assuming identity hasn't changed");const d=a.hasNewOrModifiedQueries,l=t.startSpan(`qm_bootstrap_${d}`);return Promise.resolve().then((()=>d?u.allEvents().then((e=>a.bootstrap(e))):a.bootstrap([]))).then((()=>o.PageviewComplete.getIfPresent())).then((0,s.g_)((()=>e.log("No unprocessed PVC data detected")),(t=>(0,i.zG)(e.log("Unprocessed PVC data detected",t),(e=>{const{props:r}=t;return{props:r,unprocessedData:(0,n._T)(t,["props"])}}),(e=>{let{props:t,unprocessedData:n}=e;return r.track("PageviewComplete",t,{unprocessedData:n}).finally((()=>o.PageviewComplete.reset()))}))))).then((()=>l.finish()))}function f(e,t){return(0,n.mG)(this,void 0,void 0,(function*(){e.logger.log("Identity has changed"),yield e.reset.reset(),e.userId.set(t),p(e.global,e.clientContext),e.nextGen.refreshThirdPartyData(),e.identities.setIdentities([]),yield e.nextGen.resetQL({downloadState:!0,preserveEventsFromCurrentView:!0})}))}function p(e,t){return e.context=t.getContext()}},5919:(e,t,r)=>{function n(e,t,r,n,o){o.debug("set SDK as ready"),e.setAsReady(),t.emit("permutive:api:ready"),r.track({name:"sdk_local_storage_byte_total",value:n.getStateSizeInBytes(),labels:{}}),r.track({name:"sdk_query_states_byte_total",value:e.getStateSizeInBytes(),labels:{}})}r.d(t,{R:()=>n})},7985:(e,t,r)=>{r.d(t,{$o:()=>s,je:()=>a});var n=r(5e3),o=r(3735),i=r(6640);const s=e=>{var t,r;const i="867f8423-d142-4fd1-ae8d-1a9bbbdf2358",s=void 0!==(null===(t=e[i])||void 0===t?void 0:t.q)&&void 0!==(null===(r=e[i])||void 0===r?void 0:r.config)?i:"permutive";return(0,o.zG)(e[s],(0,n.ij)("Can't find permutive tag on the page"),(0,n.UI)((e=>({tag:e,key:s}))))},a=(e,t)=>{let{tag:r,key:n}=e;return Object.assign(Object.assign({},r),{config:(0,i.ti)(Object.assign(Object.assign({},r.config),{windowKey:n}),t)})}},7078:(e,t,r)=>{r.d(t,{LA:()=>a});var n=r(1500),o=r(7209),i=r(2652);const s=(e,t,r)=>{let{api:n,state:o}=r;n.reportError(`Function "permutive.${t.functionName}" caused an error: ${e.message}`,o.userId.get())};function a(e,t,r,n,o,i){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:l;const c=u(e),d=i.startSpan("queued_methods"),f={api:o,state:t},p=e=>{if(e.functionName in r){r[e.functionName].apply(n,e.arguments)}else s(new Error("Does not exist."),e,f)},g=e=>!a.includes(e);c.forEach((e=>{try{g(e.functionName)&&p(e)}catch(t){const r=t instanceof Error?t:new Error("Unknown error.");s(r,e,f)}})),d.finish()}function u(e){const t=(0,n.uK)((e=>-1!==d.indexOf(e.functionName)))(e),r=t.right,s=t.left.filter((e=>"consent"!==e.functionName)),a=(0,o.Zt)(((e,t)=>c(e)&&c(t)?(0,i.lW)(f).compare(e.arguments[0],t.arguments[0]):(0,i.lW)(d).compare(e.functionName,t.functionName)));return(0,n.DY)(a)(r).concat(s)}const c=e=>"addon"===e.functionName,d=["identify","trigger","addon","track"],l=["identify"],f=["dfp","appnexus_adserver","web"]},4922:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{H:()=>initialiseWebSDK,f:()=>initialisationSequence});var tslib__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(655),_permutive_permutive_utils_ts_error__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(2688),fp_ts_Either__WEBPACK_IMPORTED_MODULE_48__=__webpack_require__(5e3),fp_ts_function__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(3735),fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(6934),_framework_ref__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2851),_identity_legacy_NeustarFabrickIdentitiesIngestor__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6967),_identity_legacy_PermutiveIdentities__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1540),_identity_legacy_PermutiveIdentitiesIngestorNoOp__WEBPACK_IMPORTED_MODULE_40__=__webpack_require__(7658),_sdkql_blockers__WEBPACK_IMPORTED_MODULE_49__=__webpack_require__(122),_core_activations_PermutiveActivationManagerWeb__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(8975),_core_activations_PermutiveAddons__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(9853),_core_context_PermutiveClientContextWeb__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__(2836),_sdkql_event_collection_events_cache_store_crypto_HashcodeDigest__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(6197),_sdkql_event_collection_PermutiveEventCustomProps__WEBPACK_IMPORTED_MODULE_44__=__webpack_require__(7748),_core_events_unprocessed_UnprocessedPageviewComplete__WEBPACK_IMPORTED_MODULE_42__=__webpack_require__(389),_core_events_unprocessed_UnprocessedPrebidAuctions__WEBPACK_IMPORTED_MODULE_43__=__webpack_require__(5865),_core_internals_CookiesWeb__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(5461),_core_internals_ExternalDataWeb__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__(9773),_core_internals_PermutiveLogger__WEBPACK_IMPORTED_MODULE_54__=__webpack_require__(342),_core_internals_SDKMessages__WEBPACK_IMPORTED_MODULE_57__=__webpack_require__(8491),_core_metrics_MetricReporter__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(7594),_core_metrics_Metrics__WEBPACK_IMPORTED_MODULE_58__=__webpack_require__(4074),_sdkql_query_language_query_manager_QueryManagerWeb__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(1628),_core_session_SessionManager__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(8317),_core_state_PermutiveDataStoreWeb__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(4026),_sdkql_state_sync_PermutiveEventSourceId__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(3622),_core_state_PermutiveNamespace__WEBPACK_IMPORTED_MODULE_56__=__webpack_require__(569),_core_state_PermutiveRealtime__WEBPACK_IMPORTED_MODULE_41__=__webpack_require__(7575),_core_state_PermutiveReset__WEBPACK_IMPORTED_MODULE_45__=__webpack_require__(7256),_sdkql_state_sync_PermutiveStateSyncWeb__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(1229),_core_state_PermutiveStateWeb__WEBPACK_IMPORTED_MODULE_47__=__webpack_require__(7274),_core_state_PermutiveUserId__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(9117),_core_state_PermutiveViewId__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(9880),_core_store_LocalStorage__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__(7554),_core_store_SessionStorage__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(9332),_core_tcf_TCF__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(2497),_dynamic_addons_LoadAddons__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(6037),_sdkql_event_collection_enrichment_Enrichers_GlobalEnricher__WEBPACK_IMPORTED_MODULE_39__=__webpack_require__(7200),_sdkql_event_collection_enrichment_RegisterEnrichers__WEBPACK_IMPORTED_MODULE_51__=__webpack_require__(6341),_dynamic_messages_PermutiveMessages__WEBPACK_IMPORTED_MODULE_50__=__webpack_require__(9078),_http_PermutiveApi__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(7423),_http_PermutiveNetwork__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(4586),_http_PermutiveUrls__WEBPACK_IMPORTED_MODULE_55__=__webpack_require__(310),_utils_PermutiveUtils__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(2652),_utils_task_queue_PermutiveTaskQueue__WEBPACK_IMPORTED_MODULE_46__=__webpack_require__(4996),_utils_Trace__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(6574),_utils_urls_UrlHelpers__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__(3030),_Config__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(6640),_Consent_Consent__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(4564),_Consent_InitialisationCheckWeb__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(7708),_initialisation_browserFeatures__WEBPACK_IMPORTED_MODULE_53__=__webpack_require__(6416),_initialisation_identity__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(6315),_initialisation_initialisationLifecycle__WEBPACK_IMPORTED_MODULE_52__=__webpack_require__(5919),_initialisation_permutiveTag__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(7985),_sdkql_query_language_queryWorkerInit__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(8318),_initialisation_queuedMethods__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(7078),_PermutiveMethodsWeb__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(3298),_next_gen_index_web__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(8910);const prefix="[Initialisation Web]",sdkInitTimestamp=window.performance.now(),initialiseWebSDK=_ref=>{let{consentModule,logger,messages,metrics,namespace,network,partialTagWithKey,permutiveData,queryWorker,tag,sessionStorage,configFromQueryParams,urls}=_ref;return(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_30__.Y3)((()=>(0,tslib__WEBPACK_IMPORTED_MODULE_31__.mG)(void 0,void 0,void 0,(function*(){const windowKey=partialTagWithKey.key,permutiveGlobal=window[windowKey],config=tag.config,viewId=new _core_state_PermutiveViewId__WEBPACK_IMPORTED_MODULE_14__.W(config),trace=new _utils_Trace__WEBPACK_IMPORTED_MODULE_32__.l(config),sdkReadySpan=trace.startSpan("sdk_ready"),{consentTracking,consentValidation}=consentModule;(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_33__.zG)(consentTracking.consentRef,_framework_ref__WEBPACK_IMPORTED_MODULE_0__.YP((e=>{e?sessionStorage.put(configFromQueryParams,_Config__WEBPACK_IMPORTED_MODULE_21__.iq).then(fp_ts_function__WEBPACK_IMPORTED_MODULE_33__.Q1,(e=>{logger.warn(prefix,`Failed to cache "${_Config__WEBPACK_IMPORTED_MODULE_21__.iq}".`,(0,_permutive_permutive_utils_ts_error__WEBPACK_IMPORTED_MODULE_34__.w)(e))})):sessionStorage.delete(_Config__WEBPACK_IMPORTED_MODULE_21__.iq)}))),window[windowKey].consent=consentValidation;const context=(0,_utils_PermutiveUtils__WEBPACK_IMPORTED_MODULE_20__.PM)(tag.context||{},{path:window.location.pathname,url:(0,_utils_urls_UrlHelpers__WEBPACK_IMPORTED_MODULE_35__.bk)(window.location.href),referrer:(0,_utils_urls_UrlHelpers__WEBPACK_IMPORTED_MODULE_35__.bk)(document.referrer),view_id:viewId.get()}),createInternalsSpan=trace.startSpan("internals"),cookieStore=(0,_core_internals_CookiesWeb__WEBPACK_IMPORTED_MODULE_6__.S)(namespace,config,logger,consentTracking),localStorage=(0,_core_store_LocalStorage__WEBPACK_IMPORTED_MODULE_36__.E)(namespace,logger,consentTracking),externalData=(0,_core_internals_ExternalDataWeb__WEBPACK_IMPORTED_MODULE_37__.S)(namespace,logger,consentTracking),clientContext=new _core_context_PermutiveClientContextWeb__WEBPACK_IMPORTED_MODULE_38__.z(context);(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_33__.zG)(viewId.ref,_framework_ref__WEBPACK_IMPORTED_MODULE_0__.YP((e=>clientContext.updateContext(["view_id",e]))));const userId=new _core_state_PermutiveUserId__WEBPACK_IMPORTED_MODULE_13__.M(config,clientContext,cookieStore,externalData),eventSourceId=new _sdkql_state_sync_PermutiveEventSourceId__WEBPACK_IMPORTED_MODULE_11__.$(permutiveData),enrichers=new _sdkql_event_collection_enrichment_Enrichers_GlobalEnricher__WEBPACK_IMPORTED_MODULE_39__.J,api=new _http_PermutiveApi__WEBPACK_IMPORTED_MODULE_18__.F(urls,config,network,metrics,logger),identityProviderEnv={permutive:permutiveGlobal,network,api,userId,metrics,permutiveData,messages,config,cookies:cookieStore,logger},identities=new _identity_legacy_PermutiveIdentities__WEBPACK_IMPORTED_MODULE_2__.lg(metrics,trace,permutiveData,identityProviderEnv,logger),identitiesIngestor=new _identity_legacy_PermutiveIdentitiesIngestorNoOp__WEBPACK_IMPORTED_MODULE_40__.z,permutiveRealtime=new _core_state_PermutiveRealtime__WEBPACK_IMPORTED_MODULE_41__.u(metrics,messages),sessionManager=yield _core_session_SessionManager__WEBPACK_IMPORTED_MODULE_9__.S.initialise(cookieStore,localStorage,logger),unprocessedArgs={consentTracking,logger,namespace},unprocessedEvents={PageviewComplete:new _core_events_unprocessed_UnprocessedPageviewComplete__WEBPACK_IMPORTED_MODULE_42__.p(unprocessedArgs),PrebidAuctions:new _core_events_unprocessed_UnprocessedPrebidAuctions__WEBPACK_IMPORTED_MODULE_43__.J(unprocessedArgs)},customProperties=new _sdkql_event_collection_PermutiveEventCustomProps__WEBPACK_IMPORTED_MODULE_44__.X,queryManagerTransitionDebounceTime=1e3,queryManagerTransitionMaxDebounceTime=1e4,queryManager=new _sdkql_query_language_query_manager_QueryManagerWeb__WEBPACK_IMPORTED_MODULE_8__.c({customProperties,externalData,logger,messages,api,permutive:permutiveGlobal,permutiveData,queryWorker,realtime:permutiveRealtime,sessionManager,transitionDebounceMaxTime:queryManagerTransitionMaxDebounceTime,transitionDebounceTime:queryManagerTransitionDebounceTime,userId,viewId,metrics}),permutiveReset=new _core_state_PermutiveReset__WEBPACK_IMPORTED_MODULE_45__.a(config,localStorage,logger,permutiveData,eventSourceId,cookieStore,externalData),taskQueue=new _utils_task_queue_PermutiveTaskQueue__WEBPACK_IMPORTED_MODULE_46__.i(messages),stateSync=new _sdkql_state_sync_PermutiveStateSyncWeb__WEBPACK_IMPORTED_MODULE_12__.N(api,network,sessionManager,permutiveData,queryManager,metrics,userId,eventSourceId,(0,_sdkql_state_sync_PermutiveStateSyncWeb__WEBPACK_IMPORTED_MODULE_12__.e)()),activationManager=new _core_activations_PermutiveActivationManagerWeb__WEBPACK_IMPORTED_MODULE_3__.v(logger,permutiveGlobal,clientContext),[addonsLoadedRef,setAddonsLoaded]=_framework_ref__WEBPACK_IMPORTED_MODULE_0__.Ue(!1),nextGen=(0,_next_gen_index_web__WEBPACK_IMPORTED_MODULE_29__.B)({activationManager,addonsLoaded:addonsLoadedRef,api,config,consentTracking,enrichers,externalData,identities:identities.ref,logger,messages,metrics,namespace,network,permutiveData,queryManager,realtime:permutiveRealtime,sessionManager,stateSync,trace,track:function(){return permutiveGlobal.track(...arguments)},unprocessedPVC:unprocessedEvents.PageviewComplete,urls,userId,viewId});(0,_core_metrics_MetricReporter__WEBPACK_IMPORTED_MODULE_7__.p)({api,context:nextGen.metricContext,enrichers,logger,messages,metrics});const state=new _core_state_PermutiveStateWeb__WEBPACK_IMPORTED_MODULE_47__.u(permutiveData,permutiveReset,userId,viewId,nextGen.eventCollection),addons={},permutiveMethods=(0,_PermutiveMethodsWeb__WEBPACK_IMPORTED_MODULE_28__.S)(logger,api,activationManager,sessionManager,metrics,viewId,userId,network,enrichers,clientContext,unprocessedEvents,queryManager,taskQueue,identities,permutiveReset,messages,addons,trace,permutiveRealtime,state,customProperties,config,permutiveData,externalData,cookieStore,identitiesIngestor,permutiveGlobal,consentTracking,nextGen);createInternalsSpan.finish(),[].forEach((s=>{fp_ts_Either__WEBPACK_IMPORTED_MODULE_48__.Y3((()=>eval(s)),(e=>{api.reportError(Object.assign(Object.assign({},e),{message:`Error running custom script ${s}`}),userId.get())}))}));const blockers=(0,_sdkql_blockers__WEBPACK_IMPORTED_MODULE_49__.X)({logger,messages});blockers.addBlocker("permutive:queries:initialised"),messages.on("permutive:user:ready",(()=>{permutiveGlobal.identify=permutiveMethods.identify.bind(permutiveMethods);const e=identities.extractIdentifyFromQueue({global:permutiveGlobal});e.length>0&&permutiveGlobal.identify(e)})),messages.on("permutive:blockers:empty",(()=>{permutiveGlobal.on=permutiveMethods.on.bind(permutiveMethods),permutiveGlobal.once=permutiveMethods.once.bind(permutiveMethods),permutiveGlobal.track=permutiveMethods.track.bind(permutiveMethods),permutiveGlobal.trigger=permutiveMethods.trigger.bind(permutiveMethods),permutiveGlobal.query=permutiveMethods.query.bind(permutiveMethods),permutiveGlobal.segment=permutiveMethods.segment.bind(permutiveMethods),permutiveGlobal.segments=permutiveMethods.segments.bind(permutiveMethods),permutiveGlobal.reset=permutiveMethods.reset.bind(permutiveMethods),permutiveGlobal.ready=permutiveMethods.ready.bind(permutiveMethods),permutiveGlobal.addon=permutiveMethods.addon.bind(permutiveMethods),permutiveGlobal.context=clientContext.getContext(),permutiveGlobal.addons=addons,permutiveGlobal.config=config,permutiveRealtime.setAsReady(),(0,_initialisation_queuedMethods__WEBPACK_IMPORTED_MODULE_27__.LA)(permutiveGlobal.q,state,permutiveGlobal,permutiveMethods,api,trace),setAddonsLoaded(!0)}));const loadAddonsSpan=trace.startSpan("load_addons");(0,_dynamic_addons_LoadAddons__WEBPACK_IMPORTED_MODULE_17__.C)({extMessages:new _dynamic_messages_PermutiveMessages__WEBPACK_IMPORTED_MODULE_50__.a(messages),nextGen,messages,viewId,state,sessionManager,api,clientContext,externalData,logger,metrics,network,permutive:permutiveGlobal,q:permutiveGlobal.q,userId}),loadAddonsSpan.finish();const loadEnrichersSpan=trace.startSpan("load_enrichers"),enricherEnv={api,config,clientContext,logger,permutiveData,metrics,sessionManager,enrichers,network},loadEnrichersPromise=(0,_sdkql_event_collection_enrichment_RegisterEnrichers__WEBPACK_IMPORTED_MODULE_51__.H)(enricherEnv)();loadEnrichersPromise.then((()=>{loadEnrichersSpan.finish()})),yield(0,_initialisation_identity__WEBPACK_IMPORTED_MODULE_24__.TZ)({api,clientContext,eventCollection:nextGen.eventCollection,externalData,global:permutiveGlobal,identities,identitiesIngestor,logger,messages,metrics,network,nextGen,permutiveMethods,queryManager,reset:permutiveReset,stateSync,trace,unprocessedEvents,userId,sessionManager,sessionCount:nextGen.metricContext.current.session_count}),yield loadEnrichersPromise,(0,_initialisation_initialisationLifecycle__WEBPACK_IMPORTED_MODULE_52__.R)(queryManager,messages,metrics,state,logger),sdkReadySpan.finish()}))),(e=>`Exception during initialisation. Got ${e}`))},initialisationSequence=(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_33__.zG)(fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_30__.Do,(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_30__.ak)("support",(()=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_30__.Uo)((0,_initialisation_browserFeatures__WEBPACK_IMPORTED_MODULE_53__.O)(window)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_30__.ak)("queryWorker",(()=>_sdkql_query_language_queryWorkerInit__WEBPACK_IMPORTED_MODULE_26__.F)),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_30__.ak)("partialTagWithKey",(()=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_30__.Uo)((0,_initialisation_permutiveTag__WEBPACK_IMPORTED_MODULE_25__.$o)(window)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_30__.ak)("configFromQueryParams",(()=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_30__.Uo)((0,_Config__WEBPACK_IMPORTED_MODULE_21__.B9)()))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_30__.ak)("tag",(e=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_30__.F2)((0,_initialisation_permutiveTag__WEBPACK_IMPORTED_MODULE_25__.je)(e.partialTagWithKey,e.configFromQueryParams)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_30__.ak)("logger",(e=>{let{tag:t}=e;return(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_30__.F2)((0,_core_internals_PermutiveLogger__WEBPACK_IMPORTED_MODULE_54__.SX)(t.config))})),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_30__.ak)("urls",(e=>{let{tag:t}=e;return(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_30__.F2)(new _http_PermutiveUrls__WEBPACK_IMPORTED_MODULE_55__.s(t.config))})),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_30__.ak)("network",(()=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_30__.F2)(new _http_PermutiveNetwork__WEBPACK_IMPORTED_MODULE_19__.E))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_30__.ak)("namespace",(e=>{let{tag:t}=e;return(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_30__.F2)(new _core_state_PermutiveNamespace__WEBPACK_IMPORTED_MODULE_56__.L(t.config))})),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_30__.ak)("messages",(e=>{let{logger:t}=e;return(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_30__.F2)(new _core_internals_SDKMessages__WEBPACK_IMPORTED_MODULE_57__.Q(t))})),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_30__.ak)("consentModule",(e=>(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_33__.zG)((()=>(0,_Consent_Consent__WEBPACK_IMPORTED_MODULE_22__.NY)(Object.assign(Object.assign({},e),{consentRequired:e.tag.config.consentRequired}))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_30__.Vn)((e=>e.message))))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_30__.ak)("sessionStorage",(e=>(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_30__.F2)((0,_core_store_SessionStorage__WEBPACK_IMPORTED_MODULE_15__.u)(e.namespace,e.logger,e.consentModule.consentTracking)))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_30__.ak)("permutiveData",(e=>{let{tag:t,namespace:r,logger:n,consentModule:o}=e;return(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_30__.F2)((0,_core_state_PermutiveDataStoreWeb__WEBPACK_IMPORTED_MODULE_10__.S)(t.config,r,n,o.consentTracking))})),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_30__.ak)("metrics",(e=>{let{tag:t,messages:r,logger:n,permutiveData:o}=e;return(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_30__.F2)((0,_core_metrics_Metrics__WEBPACK_IMPORTED_MODULE_58__.g)(sdkInitTimestamp,t.config,o,r,n))})),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_30__.ak)("consent",(e=>(0,_Consent_InitialisationCheckWeb__WEBPACK_IMPORTED_MODULE_23__.D)(e))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_30__.tS)((e=>initialiseWebSDK(e))))},2652:(e,t,r)=>{r.d(t,{G6:()=>P,Gz:()=>b,HP:()=>x,Or:()=>M,PM:()=>d,PQ:()=>D,SL:()=>f,Z_:()=>O,a4:()=>g,aq:()=>m,b0:()=>y,b2:()=>p,bw:()=>A,cO:()=>S,eu:()=>_,fl:()=>E,k$:()=>v,lW:()=>I,lo:()=>q,m8:()=>w,qh:()=>c,rH:()=>G,rO:()=>T,vg:()=>C,vp:()=>l});var n=r(1500),o=r(3735),i=r(6567),s=r(7209),a=r(6017),u=r(2751);const c=e=>Object.entries(e);function d(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(((e,t)=>Object.assign(Object.assign({},e),t)),{})}function l(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t&=t;return t}function f(e){return t=>{let r=0;for(let n of t){r=r+e(n)|0}return r}}a.ff(u.xb);function p(){let e,t;return{promise:new Promise(((r,n)=>{e=r,t=n})),reject:t,resolve:e}}function g(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n={waitTimeInMs:50,exponentialBackOff:!1,maxAttempts:20},{waitTimeInMs:s,exponentialBackOff:a,maxAttempts:u}=d(n,r);let c=0;const l=r=>new Promise((n=>Promise.resolve(t()).then((t=>t?Promise.resolve(e()).then((e=>n((0,i.G)(e)))):(0,o.zG)(c++,(e=>e<u?setTimeout((()=>n(l(r*(a?2:1)))),r):n(i.YP)))))));return l(s)}function _(e,t){const r=Object.create(null);for(const n of t)r[n]=e[n];return r}let h=[];function m(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:navigator.userAgent;if(h.unshift(e),h.length>1)return;const r=["beforeunload","pagehide"],n=r.concat(["visibilitychange"]),o=e=>{if(!i&&e){i=!0;const e=h;h=[],e.forEach((e=>{try{e()}catch(e){}}))}};let i=!1;n.forEach((e=>{window.addEventListener(e,(()=>{const r=("visibilitychange"!==e||document.hidden)&&k(t);o(r)}))})),r.forEach((e=>{window.addEventListener(e,(()=>o(!0)))}))}function v(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(e=>(e^(window.crypto||window.msCrypto).getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))}function b(e){return 36===e.length&&/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i.test(e)}function y(e,t){const r=Object.keys(e),n=r.length,o={};for(let s=0;s<n;s++){const n=r[s],a=t(n,e[n]);(0,i.pC)(a)&&(o[n]=a.value)}return o}function w(){const e={},t=arguments.length;for(let r=0;r<t;r++){const[t,n]=r<0||arguments.length<=r?void 0:arguments[r];e[t]=n}return e}function E(e,t){return y(e,((e,r)=>t(e)?(0,i.G)(r):i.YP))}function k(e){return/Mobi|Android/i.test(e)}function P(e){return/^((?!chrome|android).)*safari/i.test(e)}function D(e,t){return new Promise((r=>{var n;setTimeout((()=>{Promise.resolve(e()).then(r)}),null!==(n=null==t?void 0:t.timeout)&&void 0!==n?n:0)}))}function S(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}const M=()=>({equals:(e,t)=>Object.is(e,t)});function I(e){return(0,s.Zt)(((t,r)=>{const n=e.indexOf(t),o=e.indexOf(r);switch(!0){case-1===n&&-1===o:return 0;case-1!==n&&-1===o:return-1;case-1===n&&-1!==o:return 1;default:return n<=o?-1:1}}))}function O(e,t,r){return function(){try{return r(...arguments)}catch(r){e.reportError(r,t.get())}}}function C(e){return t=>null!=t&&e in t?t[e]:void 0}function x(e){let t=i.YP;const r=(0,i.fS)((()=>{const r=e();return t=(0,i.G)(r),r}));return()=>r(t)}const T=e=>t=>{var r;const n=Object.assign({},t);for(const o in e)n[o]=null===(r=e[o])||void 0===r?void 0:r.call(e,t[o]);return n};function A(e){return t=>(e(t),t)}const q=e=>t=>{const r=e.slice(0,-1),s=e.slice(-1)[0];return(0,o.zG)(r,n.f2((e=>{let[r,n]=e;return(0,o.zG)(t,i.DT(r),i.UI(n))})),i.fS((()=>s(t))))},U=e=>t=>{if("number"==typeof t)return t;if("string"==typeof t){const r=e(t);return Number.isNaN(r)?void 0:r}},G=U(parseInt);U(parseFloat)},6574:(e,t,r)=>{r.d(t,{l:()=>n});class n{constructor(e){var t;this.config=e,this.shouldUsePerformanceMark=!1,this.placeholderSpan={spanId:null,finish:()=>({})},this.shouldUsePerformanceMark=(null===(t=null===window||void 0===window?void 0:window.performance)||void 0===t?void 0:t.mark)&&this.config.tracingEnabled}startSpan(e){var t;if(this.shouldUsePerformanceMark){const r=this.generateId(),n=`permutive_${e}`,o=`${n}${r}_start`;return null===(t=null===window||void 0===window?void 0:window.performance)||void 0===t||t.mark(o),{spanId:o,finish:()=>{var e,t;null===(t=null===(e=null===window||void 0===window?void 0:window.performance)||void 0===e?void 0:e.measure)||void 0===t||t.call(e,n,o)}}}return this.placeholderSpan}generateId(){return"_"+Math.random().toString(36).substr(2,9)}}},4730:(e,t,r)=>{r.d(t,{b:()=>o});var n=r(2652);class o{constructor(e,t){this.timeoutDurationInMilliseconds=e,this.maxTimeOutDurationInMilliseconds=t}schedule(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeoutDurationInMilliseconds,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.maxTimeOutDurationInMilliseconds;return this.debounce(e,t,r)}scheduleAccumulated(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeoutDurationInMilliseconds,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.maxTimeOutDurationInMilliseconds;return this.debounce(e,r,n,t)}scheduleForPageUnload(e){return(0,n.aq)(e)}debounce(e,t,r,o){let i,s,a,u=[];return c=>{o&&(a=o.concat(null!=a?a:o.empty,c));const d=(0,n.b2)();u.push(d);return i&&window.clearTimeout(i),i=window.setTimeout((()=>{window.clearTimeout(s),s=void 0;const t=e(a||c);u.forEach((e=>e.resolve(t))),a=null==o?void 0:o.empty,u=[]}),t),s||(s=window.setTimeout((()=>{window.clearTimeout(i),s=void 0;const t=e(a||c);u.forEach((e=>e.resolve(t))),a=null==o?void 0:o.empty,u=[]}),r)),d.promise}}}},4996:(e,t,r)=>{r.d(t,{i:()=>n});class n{constructor(e){this.messages=e,this.queue=[],this.nextNotify=null,e.on("permutive:taskQueue:update",(()=>{this.execute()}))}add(e){this.queue.push(e),this.notify()}notify(){const e=()=>{this.messages.emit("permutive:taskQueue:update")},t=(new Date).getTime();null===this.nextNotify||this.nextNotify<t-50?(this.nextNotify=t,e()):this.nextNotify<=t&&(this.nextNotify=t+50,window.setTimeout(e,50))}execute(){if(0===this.queue.length)return;let e=!1,t=!1,r=0;for(let n=0;n<this.queue.length;n++){const o=this.queue[n];if(o.complete)r+=1;else if(o.started)t=!0,e=e||o.blocks();else{if(o.waits()&&t)break;e||(t=!0,e=e||o.blocks(),o.execute((()=>{this.notify()})))}}this.queue.splice(0,r)}size(){return this.queue.length}}},3030:(e,t,r)=>{r.d(t,{_Y:()=>s,bk:()=>i,zM:()=>o});var n=r(3735);const o=()=>{var e,t;const r=null===(t=null===(e=window.location.href.split("?")[1])||void 0===e?void 0:e.split("#")[0])||void 0===t?void 0:t.split("&");return void 0===r?{}:r.reduce(((e,t)=>{const[r,n]=t.split("=");return Object.assign(Object.assign({},e),{[r]:n})}),{})},i=e=>{if(!e)return"";return(0,n.zG)(e,(e=>{const t=e.length-1;return"/"===e[t]?e.slice(0,t):e}))};function s(e){const t=e.match(/\b(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b/),r=e.match(/[a-z0-9][a-z0-9-]+\.[a-z.]{2,24}$/i),n=e.match(/localhost/);if(r&&r.length>0){const t=e.split(".").reverse();return t.length>=3&&t[1].match(/^(com|edu|gov|net|mil|org|nom|co|ac|name|info|biz)$/i)?t[2]+"."+t[1]+"."+t[0]:t[1]+"."+t[0]}return t&&(null==t?void 0:t.length)>0?t[0]:n&&(null==n?void 0:n.length)>0?"localhost":""}},7826:(e,t,r)=>{r.d(t,{$7:()=>h,Cg:()=>p,Qd:()=>_,cs:()=>g,dN:()=>l,zi:()=>f});var n=r(5e3),o=r(3735),i=r(6567),s=r(3328),a=r(2116),u=r(2851),c=r(2652);const d="[PrebidJS]";function l(e){const t=(()=>{const e=["pbjs",...window._pbjsGlobals||[]];return[...new Set(e)]})();e.logger.debug(d,"Found keys",t);return a.K4((()=>(0,o.zG)(t,s.UI((0,o.ls)((e=>(e=>{const t={maxAttempts:100,waitTimeInMs:50};let r;return{windowPropertyKey:e,pbjs:(0,c.a4)((()=>r),(()=>{const t=(0,o.zG)(window,(0,c.vg)(e));return!(!(null==t?void 0:t.que)||"function"!=typeof(null==t?void 0:t.getEvents)||(r=t,0))}),t)}})(e)),(t=>(0,o.zG)(u.p4(t.pbjs),u.UI((r=>{const s=n.pF((r=>(r.message=`Failed to resolve key "${t.windowPropertyKey}". ${r.message}`,e.reportError(`${d} ${r.toString()}`),i.YP)));return(0,o.zG)(r,(0,c.bw)(i.UI((r=>e.logger.debug(d,`Completed check for key "${t.windowPropertyKey}"`,{result:r})))),i.UI(s),i.UI(i.UI((e=>({windowPropertyKey:t.windowPropertyKey,pbjs:e})))))})))))),(e=>u.vP(...e)),u.UI((e=>({completedChecks:e.every(i.pC),pbjsKeyPairs:e.map(i.xH)}))),u.UI((e=>{let{pbjsKeyPairs:t,completedChecks:r}=e;const n=t.filter(i.pC),[a,...u]=n;return{completedChecks:r,mainPair:null!=a?a:i.YP,otherPairs:(0,o.zG)(u,s.DZ(o.yR))}})))))}const f=e=>"function"==typeof e.readConfig?e.readConfig():e.getConfig();function p(e){var t;const r=null===(t=e.meta)||void 0===t?void 0:t.advertiserDomains;if("string"==typeof r)return[r];if(Array.isArray(r)){const e=r.filter((e=>"string"==typeof e));return e.length>0?e:void 0}}const g=e=>{var t;const r=e.appnexus&&"object"==typeof e.appnexus&&"buyerMemberId"in e.appnexus&&e.appnexus.buyerMemberId,n=e.rubicon&&"object"==typeof e.rubicon&&"networkId"in e.rubicon&&e.rubicon.networkId,o=r||n||(null===(t=null==e?void 0:e.meta)||void 0===t?void 0:t.networkId);return o?`${o}`:void 0},_=e=>{var t;const r=e=>isNaN(e)?void 0:e;try{return"number"==typeof e.cpm?r(e.cpm):(0,o.zG)(null!==(t=e.cpm)&&void 0!==t?t:"",parseFloat,r)}catch(e){return}},h=e=>e.dealId?`${e.dealId}`:void 0},122:(e,t,r)=>{r.d(t,{X:()=>n});const n=e=>{let t=!0;const r=[];return{addBlocker:n=>{r.push(n),e.logger.log("<blockers> added blocker "+n),e.messages.on(n,(()=>{if(t){const o=r.indexOf(n);o>=0&&(r.splice(o,1),e.logger.log("<blockers> removed blocker "+n)),0===r.length&&(t=!1,e.messages.emit("permutive:blockers:empty"),e.logger.log("<blockers> complete"))}}))}}}},7748:(e,t,r)=>{r.d(t,{X:()=>n});class n{constructor(){this.properties={}}overrideCustomProps(e){this.properties=e}getCustomProps(){return this.properties}}},7200:(e,t,r)=>{r.d(t,{J:()=>o});var n=r(6308);class o{constructor(){this.replacementMap={}}register(e){this.replacementMap=Object.assign(Object.assign({},this.replacementMap),e.getReplacementMap)}enrich(e,t){return this.enrichRecursive(e,t)}enrichRecursive(e,t){const r={output:{},isFullyEnriched:!0},o=Object.keys(e);for(let i=0;i<o.length;i++){const s=o[i],a=e[s];switch(!0){case(0,n.t)(a):const[e,o]=this.isPropertyReplaceable(a);r.output[s]=e?o:a,this.replacementMap.hasOwnProperty(a)&&o===a&&t&&delete r.output[s],r.isFullyEnriched=!!e&&r.isFullyEnriched;break;case null!==a&&"object"==typeof a&&a.constructor===Object:const i=this.enrichRecursive(a,t);r.output[s]=i.output,r.isFullyEnriched=r.isFullyEnriched&&i.isFullyEnriched;break;default:r.output[s]=a}}return r}isPropertyReplaceable(e){const t=this.replacementMap[e];return[this.replacementMap.hasOwnProperty(e)&&t!==e,t]}}},6341:(e,t,r)=>{r.d(t,{B:()=>a,H:()=>u});var n=r(3735),o=r(5151),i=r(6934);const s=[],a=e=>{s.push(e)},u=e=>{const t=s.map((t=>(0,i.Y3)((()=>t.load(e)),(t=>{e.api.reportError(t)}))));return(0,n.zG)((0,o.RD)(t),(0,o.UI)(n.Q1))}},6308:(e,t,r)=>{r.d(t,{t:()=>n});const n=e=>"string"==typeof e&&"$"===e[0]},2546:(e,t,r)=>{r.r(t),r.d(t,{make:()=>A});var n=r(3735),o=r(655);let i,s;const a=new WeakMap,u=new WeakMap,c=new WeakMap,d=new WeakMap,l=new WeakMap;let f={get(e,t,r){if(e instanceof IDBTransaction){if("done"===t)return u.get(e);if("objectStoreNames"===t)return e.objectStoreNames||c.get(e);if("store"===t)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return _(e[t])},set:(e,t,r)=>(e[t]=r,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function p(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(s||(s=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(h(this),t),_(a.get(this))}:function(...t){return _(e.apply(h(this),t))}:function(t,...r){const n=e.call(h(this),t,...r);return c.set(n,t.sort?t.sort():[t]),_(n)}}function g(e){return"function"==typeof e?p(e):(e instanceof IDBTransaction&&function(e){if(u.has(e))return;const t=new Promise(((t,r)=>{const n=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",i),e.removeEventListener("abort",i)},o=()=>{t(),n()},i=()=>{r(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",o),e.addEventListener("error",i),e.addEventListener("abort",i)}));u.set(e,t)}(e),t=e,(i||(i=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,f):e);var t}function _(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,r)=>{const n=()=>{e.removeEventListener("success",o),e.removeEventListener("error",i)},o=()=>{t(_(e.result)),n()},i=()=>{r(e.error),n()};e.addEventListener("success",o),e.addEventListener("error",i)}));return t.then((t=>{t instanceof IDBCursor&&a.set(t,e)})).catch((()=>{})),l.set(t,e),t}(e);if(d.has(e))return d.get(e);const t=g(e);return t!==e&&(d.set(e,t),l.set(t,e)),t}const h=e=>l.get(e);function m(e,t,{blocked:r,upgrade:n,blocking:o,terminated:i}={}){const s=indexedDB.open(e,t),a=_(s);return n&&s.addEventListener("upgradeneeded",(e=>{n(_(s.result),e.oldVersion,e.newVersion,_(s.transaction))})),r&&s.addEventListener("blocked",(()=>r())),a.then((e=>{i&&e.addEventListener("close",(()=>i())),o&&e.addEventListener("versionchange",(()=>o()))})).catch((()=>{})),a}function v(e,{blocked:t}={}){const r=indexedDB.deleteDatabase(e);return t&&r.addEventListener("blocked",(()=>t())),_(r).then((()=>{}))}const b=["get","getKey","getAll","getAllKeys","count"],y=["put","add","delete","clear"],w=new Map;function E(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(w.get(t))return w.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,o=y.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!o&&!b.includes(r))return;const i=async function(e,...t){const i=this.transaction(e,o?"readwrite":"readonly");let s=i.store;return n&&(s=s.index(t.shift())),(await Promise.all([s[r](...t),o&&i.done]))[0]};return w.set(t,i),i}f=(e=>({...e,get:(t,r,n)=>E(t,r)||e.get(t,r,n),has:(t,r)=>!!E(t,r)||e.has(t,r)}))(f);var k=r(2688),P=r(5e3),D=r(5151),S=r(6934),M=r(2652);function I(e){return"development"===e.environment?window.isSecureContext:"https:"===window.location.protocol}const O="[IDB]",C=(e,t,r,i,s,a)=>(0,n.zG)((0,D.of)(e.getNamespacedStorageKey(s)),(0,D.tS)((e=>(0,S.Y3)((()=>(0,o.mG)(void 0,void 0,void 0,(function*(){return r.put(i,a,e)}))),k.w))),(0,D.UI)((0,P.g_)((e=>{throw t.error(O,`Failed to store crypto key to ${i} due to unexpected error,\n`,e),e}),(()=>a))),(e=>e()));class x{constructor(e,t,r,n,o,i,s,a){this.namespace=e,this.logger=t,this.cryptoAlg=r,this.idb=n,this.mainObjectStore=o,this.keyObjectStore=i,this.keyObjectKey=s,this.cryptoKey=a,this.MAX_CONSECUTIVE_PUTS=30,this.puts=1,this.hasForcedCompaction=!1,this.logDebug("Created",this.idb)}static initialise(e,t,r,i,s,a,u,c,d,l){const f=(0,M.G6)(navigator.userAgent)&&!1,p=[I(e),s.isAvailable(),!f].every((e=>!0===e)),g=(e,r,a)=>(0,o.mG)(this,void 0,void 0,(function*(){return(0,n.zG)(yield e.get(a,t.getNamespacedStorageKey(r)),(e=>(0,o.mG)(this,void 0,void 0,(function*(){return null!=e?e:s.generateKey(!1)}))),(r=>(0,o.mG)(this,void 0,void 0,(function*(){return C(t,i,e,c,d,yield r)})))).catch((e=>{const t=(0,k.w)(e);throw i.error(O,"Get crypto key failed. Got\n",t),t}))})),_=(e,t,r)=>t.includes(r)?(0,n.Q1)():e.createObjectStore(r),h=p?(0,P.Y3)((()=>function(e){if(!(0,M.G6)(navigator.userAgent)||!indexedDB.databases)return Promise.resolve();let t,r=0;return new Promise((e=>{const n=()=>(r++,indexedDB.databases().finally(e));t=window.setInterval(n,100),n()})).finally((()=>{clearInterval(t),e.track({name:"sdk_idb_conn_attempt_safari_count",value:r,labels:{}})}))}(r).then((()=>m(a,l,{upgrade:e=>{const t=[...e.objectStoreNames];_(e,t,u),_(e,t,c)}})))),String):(0,P.t$)("Connection not attempted. Default to localStorage");return(0,P.g_)((e=>(0,S.t$)(e)),(e=>(0,n.zG)((0,S.Y3)((()=>e.then((e=>(0,o.mG)(this,void 0,void 0,(function*(){return{db:e,cryptoKey:yield g(e,d,c)}}))))),String),(0,S.UI)((e=>{let{db:r,cryptoKey:n}=e;return new x(t,i,s,r,u,c,d,n)})))))(h)}put(e,t){return(0,o.mG)(this,void 0,void 0,(function*(){return(0,n.zG)((()=>(0,o.mG)(this,void 0,void 0,(function*(){return(0,n.bc)(JSON.stringify(e),this.cryptoKey)}))),(0,D.tS)((e=>{let[t,r]=e;return(0,D.of)(this.cryptoAlg.encrypt(r,t))})),(0,D.tS)((e=>()=>(0,o.mG)(this,void 0,void 0,(function*(){return yield this.resetIfRequired(this.puts++),e})))),(0,D.tS)((e=>(0,S.Y3)((()=>this.idb.put(this.mainObjectStore,e,this.namespace.getNamespacedStorageKey(String(t)))),k.w))),(0,D.UI)((0,P.g_)((r=>{throw this.logError(`Failed to put "${t.toString()}" value`,e,". Got \n",r),"QuotaExceededError"===r.name&&this.forceCompaction(),r}),(()=>t))),(e=>e()))}))}get(e){return(0,n.zG)(this.namespace.getNamespacedStorageKey(String(e)),(t=>this.idb.get(this.mainObjectStore,t).then((e=>(0,o.mG)(this,void 0,void 0,(function*(){return e?JSON.parse(yield this.cryptoAlg.decrypt(this.cryptoKey,e)):null})))).catch((t=>{const r=(0,k.w)(t);throw this.logError(`Get ${e.toString()} failed. Got`,r),r}))))}delete(e){return(0,n.zG)(this.namespace.getNamespacedStorageKey(String(e)),(e=>this.idb.delete(this.mainObjectStore,e)))}deleteStore(){return this.logDebug("Deleting",this.idb),this.idb.close(),v(this.idb.name)}forceCompaction(){if(this.hasForcedCompaction)return null;this.hasForcedCompaction=!0,this.logDebug("Attempting to force compaction");const e=`__${this.mainObjectStore}`;return m(e).then((t=>(t.close(),v(e))))}resetIfRequired(e){return(0,M.G6)(navigator.userAgent)&&e%this.MAX_CONSECUTIVE_PUTS==0?this.reset():Promise.resolve()}reset(){return(0,o.mG)(this,void 0,void 0,(function*(){const e=this.idb.name,t=this.idb.version;yield this.deleteStore(),this.idb=yield m(e,t),this.idb.createObjectStore(this.mainObjectStore),this.idb.createObjectStore(this.keyObjectStore),yield C(this.namespace,this.logger,this.idb,this.keyObjectStore,this.keyObjectKey,this.cryptoKey),this.logDebug("Reset to",this.idb)}))}logDebug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.debug(O,...t)}logError(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.error(O,...t)}}var T=r(8259);const A=(e,t,r,o,i,s,a,u,c,d,l)=>(0,n.zG)(x,(0,T._z)({logger:d,consentTracking:l,prefix:O})).initialise(e,t,r,d,o,i,s,a,u,c)},6197:(e,t,r)=>{r(2652)},9581:(e,t,r)=>{r.r(t),r.d(t,{PrebidAddon:()=>y,load:()=>b});var n=r(9853),o=r(655),i=r(1500),s=r(5e3),a=r(3735),u=r(6567),c=r(2851),d=r(2652),l=r(7826);const f="prebidAddonLoadingtime",p="prebidAddonInitStart",g="prebidAddonInitEnd",_=(0,n.Hn)("prebid")("revenue_insights_enabled",!1);class h{constructor(e){this.trackedBids=[],this.logger=e.logger,this.permutive=e.permutive,this.options=e,this.startRevenueInsights()}startRevenueInsights(){return(0,o.mG)(this,void 0,void 0,(function*(){if(this.logger.debug("[Revenue Insights]","revenue insights enabled",_),!1===_)return;performance.mark(p);const e={maxAttempts:200,waitTimeInMs:50};(0,a.zG)(this.options.pbjs,c.UI(u.UI((t=>(0,d.a4)((()=>this.runRevenueInsights(t)),(()=>{var e;return!!(null===(e=window.googletag)||void 0===e?void 0:e.pubads)}),e)))))}))}runRevenueInsights(e){this.trackMetrics();const t=()=>{e.getAllWinningBids().forEach((e=>r(e,!0))),e.onEvent("bidWon",(e=>r(e,!0)))},r=(e,t)=>(0,s.Y3)((()=>c(e,t)),(e=>{})),n=e=>{var t,r,n,o,i,s;const a=(null===(t=null==e?void 0:e.meta)||void 0===t?void 0:t.brandName)||(null===(r=null==e?void 0:e.meta)||void 0===r?void 0:r.clickUrl)||(null===(n=null==e?void 0:e.adomain)||void 0===n?void 0:n[0])||(null===(o=null==e?void 0:e.meta)||void 0===o?void 0:o.advertiserName)||(null!==(i=(0,l.Cg)(e))&&void 0!==i?i:[])[0]||(null===(s=null==e?void 0:e.adserverTargeting)||void 0===s?void 0:s.hb_adomain);return a?`${a}`:void 0},o=e=>{var t,r,n;const o=e.rubicon&&"object"==typeof e.rubicon&&"advertiserId"in e.rubicon&&e.rubicon.advertiserId||(null===(t=null==e?void 0:e.meta)||void 0===t?void 0:t.brandId)||(null===(r=null==e?void 0:e.meta)||void 0===r?void 0:r.buyerId)||(null===(n=null==e?void 0:e.meta)||void 0===n?void 0:n.advertiserId);return o?`${o}`:void 0},a={equals:(e,t)=>e.ad_unit_code===t.ad_unit_code&&e.ad_id===t.ad_id&&e.auction_id===t.auction_id&&e.winning_bid===t.winning_bid},u=e=>!(0,i.t9)(a)(e,this.trackedBids),c=(t,r)=>{const{bidderTimeout:i}=(0,l.zi)(e),s=((e,t,r)=>{var i,s;return{ad_id:null!==(i=e.adId)&&void 0!==i?i:"",ad_unit_code:null!==(s=e.adUnitCode)&&void 0!==s?s:"",bidder:e.bidder,bidder_timeout:r,deal_id:(0,l.$7)(e),cpm:(0,l.Qd)(e),hb_pb:e.adserverTargeting&&e.adserverTargeting.hb_pb,height:(0,d.rH)(e.height),width:(0,d.rH)(e.width),time_to_respond:e.timeToRespond,bid_available:"string"==typeof e.statusMessage&&e.statusMessage.indexOf("empty")<0,winning_bid:t,advertiser_id:o(e),advertiser_name:n(e),dsp_id:(0,l.cs)(e),auction_id:e.auctionId}})(t,r,i);u(s)&&(s.cpm&&s.cpm>0&&r&&this.permutive.track("PrebidBid",s),this.updateTrackedBids(s))};e.que.push((()=>{window.googletag.cmd.push(t)}))}trackMetrics(){performance.mark(g),performance.measure(f,p,g);const e=performance.getEntriesByName(f)[0].duration;this.options.metrics.track({name:"sdk_addon_init_duration_seconds",value:e,labels:{addon:"prebid"}})}updateTrackedBids(e){const t=this.trackedBids.findIndex((t=>e.ad_id===t.ad_id&&e.winning_bid!==t.winning_bid));t>-1?this.trackedBids[t]=Object.assign(Object.assign({},this.trackedBids[t]),e):this.trackedBids.push(e)}}const m="prebid",v=(0,n.Hn)("prebid")("data_provider_config",{ac_bidders:[]}),b=e=>{e.q.push({functionName:"addon",arguments:[m,{}]})};class y extends h{constructor(e){super(e),this.dataProviderParamsFromIntegrationConfig={},this.logger=e.logger,this.externalData=e.externalData,this.parsePrebidConfig()}getPermutiveRtdConfig(){return this.logDebug("RTD config retrieved",this.dataProviderParamsFromIntegrationConfig),this.dataProviderParamsFromIntegrationConfig}storeAndSetPermutiveRtdConfig(e){this.externalData.setExternalJsonData("permutive-prebid-rtd",e),this.dataProviderParamsFromIntegrationConfig=e}parsePrebidConfig(){this.logDebug("data provider config",v);const{ac_bidders:e}=v;this.storeAndSetPermutiveRtdConfig({acBidders:e})}logDebug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.log("[prebid]",...t)}}},8036:(e,t,r)=>{r.d(t,{AG:()=>a,UC:()=>i,Yh:()=>s});var n=r(6567),o=r(2652);const i=(e,t,r)=>e in t||(()=>{const t="number"==typeof e?e:parseInt(e);return!1===isNaN(t)&&r.has(t)})(),s=e=>(0,o.b0)(e,((e,t)=>t.state?(0,n.G)({[t.checksum]:t.state}):n.YP));function a(e){var t;return["SegmentEntry","SegmentExit"].includes(e.name)&&void 0!==(null===(t=e.properties)||void 0===t?void 0:t.segment_number)}},1628:(e,t,r)=>{r.d(t,{c:()=>ze,e:()=>Le});var n=r(7183),o=r(3735),i=r(4386),s=r(655);const a=()=>({kind:"null",value:null}),u=e=>({kind:"string",value:e}),c=e=>({kind:"number",value:e}),d=e=>({kind:"array",value:e}),l=e=>({kind:"object",value:e}),f=e=>e,p=()=>({kind:"bottom"}),g=e=>({kind:"inner",a:e}),_=e=>({kind:"top",error:e}),h=e=>({kind:"unbounded",group:e}),m=(e,t)=>({kind:"windowed",key:t,group:e}),v=(e,t,r)=>({kind:"countLimit",n:r,limit:t,group:e}),b=(e,t,r)=>({kind:"uniqueLimit",n:r,limit:t,group:e}),y=e=>({kind:"numberGroup",group:e}),w=e=>({kind:"stringGroup",group:e}),E=e=>({kind:"tuple",tuple:e}),k=e=>({state:e}),P=(e,t)=>({commands:e,payload:t});var D=r(7209),S=r(2751);const M=(e,t)=>{switch(e.kind){case"bottom":return{kind:"bottom"};case"inner":return g(t(e.a));case"top":return _(e.error)}},I=e=>(0,D.Zt)(((t,r)=>{if("bottom"===t.kind&&"bottom"===r.kind)return 0;if("bottom"===t.kind)return-1;if("bottom"===r.kind)return 1;if("top"===t.kind&&"top"===r.kind)return S.Df.compare(t.error,r.error);if("top"===t.kind)return 1;if("top"===r.kind)return-1;if("inner"===t.kind&&"inner"===r.kind)return e.compare(t.a,r.a);throw new Error("Non exhaustive match in extendedAlgebraOrd")}));var O=r(6567),C=r(1885),x=r(1500),T=r(5e3),A=function(e){return-1===e?1:1===e?-1:0};function q(e,t){return(0,x.oA)(e.map(t))}function U(e,t,r,n){const o=(e,t)=>{if(0===e.length)return(0,x.oA)(t.map((e=>(0,O.G)({1:e[1],2:r(O.YP,(0,O.G)(e[2]))}))));if(0===t.length)return(0,x.oA)(e.map((e=>(0,O.G)({1:e[1],2:r((0,O.G)(e[2]),O.YP)}))));if(e.length>0&&t.length>0&&(0,D.lt)(n)(e[0][1],t[0][1])){const[n,...i]=e,s=n[1],a=n[2];return(0,x.Ce)({1:s,2:r((0,O.G)(a),O.YP)})(o(i,t))}if(e.length>0&&t.length>0&&(0,D.gt)(n)(e[0][1],t[0][1])){const[n,...i]=t,s=n[1],a=n[2];return(0,x.Ce)({1:s,2:r(O.YP,(0,O.G)(a))})(o(e,i))}if(e.length>0&&t.length>0){const[n,...i]=e,[s,...a]=t,u=n[1],c=n[2],d=s[2];return(0,x.Ce)({1:u,2:r((0,O.G)(c),(0,O.G)(d))})(o(i,a))}throw new Error("Non exhaustive match in mapOption2")},i=(0,D.Uz)((e=>e[1]))(n),s=(e=>{const t=q(e,(e=>(0,O.pC)(e[2])?(0,O.G)({1:e[1],2:e[2].value}):O.YP));return 0===t.length?O.YP:(0,O.G)(t)})(o((0,x.DY)(i)([...e].map((e=>({1:e[0],2:e[1]})))),(0,x.DY)(i)([...t].map((e=>({1:e[0],2:e[1]}))))));return(0,O.UI)((e=>new Map(e.map((e=>[e[1],e[2]])))))(s)}function G(e,t,r,n){const o=(0,D.Uz)((e=>e[0]))(n),i=(0,x.DY)(o)([...t]).reduceRight(((e,t)=>{if((0,T.nM)(e)){const n=r(t[1],e.left);return(0,O.pC)(n)?(0,T.t$)(n.value):(0,T.F2)(t[0])}return e}),(0,T.t$)(e));return(0,O.Uo)(i)}function j(e,t){return new Map([...e].map(t))}function L(e,t){return new Map([...e].filter(t))}var R=r(4268),z=r(4011);function B(e){return JSON.stringify(W(e))}function W(e){switch(e.kind){case"null":return N.encode(e);case"string":return F.encode(e);case"number":return Y.encode(e);case"array":return Q.encode(e);case"object":return V.encode(e)}}function $(e){return null===e?N.decode(e):"number"==typeof e?Y.decode(e):"string"==typeof e?F.decode(e):Array.isArray(e)?Q.decode(e):V.decode(e)}const K=(e,t)=>(0,T.t$)(`Failed to decode. Input was ${JSON.stringify(e)}. Codec type was ${t}`),N={encode:e=>null,decode:e=>null===e?(0,T.F2)({kind:"null",value:null}):K(e,"SimpleNull")},F={encode:e=>e.value,decode:e=>"string"==typeof e?(0,T.F2)(u(e)):K(e,"SimpleString")},Y={encode:e=>e.value,decode:e=>"number"==typeof e?(0,T.F2)(c(e)):K(e,"SimpleNumber")},Q={encode:e=>e.value.map(W),decode:e=>{if(Array.isArray(e)){const t=(0,x.fw)(T.g1)($)(e);return(0,T.UI)(d)(t)}return K(e,"SimpleArray")}},V={encode:e=>{const t=[...e.value.entries()];return Object.assign({},...Array.from(t,(([e,t])=>({[e]:W(t)}))))},decode:e=>{if(e&&e.constructor===Object){const t=(0,x.fw)(T.g1)((([e,t])=>(0,o.zG)($(t),(0,T.UI)((t=>(0,o.bc)(e,t))))))(Object.entries(e));return(0,T.UI)((e=>l(new Map([...e]))))(t)}return K(e,"SimpleObject")}};function H(e){return(0,o.zG)(e,X,(0,O.UI)(B),(0,O.fS)((()=>"<encode error>")))}function J(e){return(0,O.UI)(oe)(function(e){switch(e.state.kind){case"top":return(0,O.G)(u(e.state.error));case"bottom":return O.YP;case"inner":return X(e.state.a)}}(e))}function X(e){return function(e){switch(e.kind){case"numberGroup":case"stringGroup":return Z(e.group);case"tuple":return e.tuple.length>0}}(e.payload)?(0,O.G)(d(function(e,t){const r=(0,O.UI)((e=>(0,x.Ce)(e)(t)))(e);return(0,O.fS)((()=>t))(r)}((0,O.UI)((e=>u(function(e){const t=e=>{switch(e){case"add":return"p";case"mul":return"m";case"max":return"v";case"min":return"n"}},r=e=>1===e[2]?t(e[1]):t(e[1])+JSON.stringify(e[2]);return e.map(r).join("")}(e))))(e.commands),function(e){const t=e=>{switch(e.kind){case"bottom":return{kind:"null",value:null};case"top":return u(e.error);case"inner":return c(e.a)}},r=e=>q([ee,te,e=>(0,o.zG)(e,ne,l,O.G)],(t=>t(e))),n=e=>q([ee,re,e=>(0,o.zG)(e,ne,(e=>j(e,(([e,t])=>[JSON.stringify(e),t]))),l,O.G)],(t=>t(e)));switch(e.kind){case"tuple":return e.tuple.map(t);case"stringGroup":return r(e.group);case"numberGroup":return n(e.group)}}(e.payload)))):O.YP}function Z(e){switch(e.kind){case"unbounded":return e.group.size>0;case"windowed":return e.group.size>0||(0,O.pC)(e.key);case"countLimit":case"uniqueLimit":return e.group.size>0||(0,O.pC)(e.limit)}}function ee(e){switch(e.kind){case"unbounded":return O.YP;case"windowed":return(0,O.G)(u("w"));case"countLimit":return(0,O.G)(u(1===e.n?"x":`x${e.n}`));case"uniqueLimit":return(0,O.G)(u(1===e.n?"u":`u${e.n}`))}}function te(e){switch(e.kind){case"unbounded":return O.YP;case"windowed":return(0,O.G)(u((0,O.pC)(e.key)?e.key.value:""));case"countLimit":case"uniqueLimit":return(0,O.G)(u((0,O.pC)(e.limit)?e.limit.value:""))}}function re(e){switch(e.kind){case"unbounded":return O.YP;case"windowed":return(0,O.pC)(e.key)?(0,O.G)(c(e.key.value)):(0,O.G)({kind:"null",value:null});case"countLimit":case"uniqueLimit":return(0,O.pC)(e.limit)?(0,O.G)(c(e.limit.value)):(0,O.G)({kind:"null",value:null})}}function ne(e){switch(e.kind){case"unbounded":case"windowed":case"countLimit":case"uniqueLimit":return e.group}}function oe(e){switch(e.kind){case"array":return 0===e.value.length?{kind:"null",value:null}:1===e.value.length?oe(e.value[0]):d(e.value.map(oe));case"object":return(0,o.zG)(L(e.value,(([e,t])=>"null"!==t.kind)),(e=>j(e,(e=>[e[0],oe(e[1])]))),l);default:return e}}function ie(e){const t=e=>{if(0===e.length)return{kind:"bottom"};const t=(e=>{if(4!==e.length)return O.YP;const[t,r,n,o]=e;if("string"===t.kind&&"string"===r.kind&&"object"===o.kind){const e=(0,O.DT)((e=>se(e[1].value)&&ae(e[2].value)))({1:t,2:r});return(0,O.UI)((e=>({prim:e[1].value,grp:e[2].value,cutoff:n,m:o.value})))(e)}return O.YP})(e);if((0,O.pC)(t)){const{prim:e,grp:r,cutoff:n,m:o}=t.value,i=ue(n,o,ce(r));return"string"==typeof i?_(i):g(P(de(e),i))}const r=(e=>{if(3!==e.length)return O.YP;const[t,r,n]=e;if("string"===t.kind&&"object"===n.kind){const e=(0,O.DT)((e=>ae(e.value)))(t);return(0,O.UI)((e=>({grp:e.value,cutoff:r,m:n.value})))(e)}return O.YP})(e);if((0,O.pC)(r)){const{grp:e,cutoff:t,m:n}=r.value,o=ue(t,n,ce(e));return"string"==typeof o?_(o):g(P(O.YP,o))}const n=(e=>{if(2!==e.length)return O.YP;const[t,r]=e;if("string"===t.kind&&"object"===r.kind){const e=(0,O.DT)((e=>se(e.value)))(t);return(0,O.UI)((e=>({prim:e.value,m:r.value})))(e)}return O.YP})(e);if((0,O.pC)(n)){const{prim:e,m:t}=n.value;return g(P(de(e),w(h(t))))}const o=(e=>{if(1!==e.length)return O.YP;const[t]=e;return"object"===t.kind?(0,O.G)({m:t.value}):O.YP})(e);if((0,O.pC)(o)){const{m:e}=o.value;return g(P(O.YP,w(h(e))))}const i=(e=>{if(e.length<1)return O.YP;const[t,...r]=e;if("string"===t.kind){const e=(0,O.DT)((e=>se(e.value)))(t);return(0,O.UI)((e=>({prim:e.value,rest:r})))(e)}return O.YP})(e);if((0,O.pC)(i)){const{prim:e,rest:t}=i.value;return g(P(de(e),fe(t)))}return g(P(O.YP,fe(e)))},r=e=>"array"===e.kind?(0,x.tS)(r)(e.value):[e];return"null"===e.kind?k({kind:"bottom"}):k(t(r(e)))}function se(e){const t=e.split("");if(!0==(0===t.length))return!1;{const[e,...r]=t;return-1!=="pmvn".indexOf(e)&&r.every((e=>-1!=="pmvn0123456789".indexOf(e)))}}function ae(e){const t=e.split("");switch(!0){case 0===t.length:return!1;case"w"===t[0]&&void 0===t[1]:return!0;default:{const[e,...r]=t;return-1!=="ux".indexOf(e)&&-1===r.map((e=>!isNaN(parseInt(e)))).indexOf(!1)}}}function ue(e,t,r){switch(e.kind){case"string":return w(r({1:(0,O.G)(e.value),2:t}));case"number":case"null":return y(r({1:"null"===e.kind?O.YP:(0,O.G)(e.value),2:L(j(t,(([e,t])=>[Number(e),t])),(e=>!isNaN(e[0])))}));default:return"{bad cutoff}"}}function ce(e){const t=e=>t=>b(t[2],t[1],e),r=e=>t=>v(t[2],t[1],e),n=e.split("");switch(!0){case"w"===n[0]&&void 0===n[1]:return e=>m(e[2],e[1]);case"u"===n[0]&&void 0===n[1]:return t(1);case"u"===n[0]&&void 0!==n[1]:return t(parseInt(n.slice(1).join("")));case"x"===n[0]&&void 0===n[1]:return r(1);case"x"===n[0]&&void 0!==n[1]:return r(parseInt(n.slice(1).join("")));default:throw new Error("This should never happen if you use isGroupCommand")}}function de(e){return(0,O.UI)(f)((0,C.nI)(le(e,(e=>{const t=e.split("");if(0===t.length)return O.YP;const[r,...n]=t,o=(e=>{switch(e){case"p":return(0,O.G)("add");case"m":return(0,O.G)("mul");case"v":return(0,O.G)("max");case"n":return(0,O.G)("min");default:return O.YP}})(r);return(0,O.UI)((e=>{const{init:t,rest:r}=(0,x.zT)((e=>{return"number"==typeof(t=parseInt(e))&&isFinite(t)&&Math.floor(t)===t;var t}))(n);return{1:{1:e,2:0===t.length?1:parseInt(t.join(""))},2:r.join("")}}))(o)}))))}function le(e,t){const r=t(e);return(0,O.fS)((()=>[]))((0,O.UI)((e=>[e[1]].concat(le(e[2],t))))(r))}function fe(e){return E(e.map(pe))}function pe(e){switch(e.kind){case"number":return g(e.value);case"string":return _(e.value);case"null":return{kind:"bottom"};case"object":return _("{object}");case"array":return _("{array}")}}const ge={strategy:(e,t,r)=>n=>{if((0,O.Wi)(r))return t;if("delta"===e&&(0,O.Wi)(t))return O.YP;if((0,O.Wi)(t))return r;if((0,O.pC)(t)&&(0,O.pC)(r))return n(t.value,r.value);throw new Error("Non exhaustive match in combineCommand.strategy")},operation:(e,t,r,n,o,i)=>{const s=(0,x.pR)(I(i));if("append"===e&&"add"===t)return(0,x.yL)(r,n,we("append",o.plus));if("append"===e&&"mul"===t)return(0,x.yL)(r,n,we("append",o.times));if("append"===e&&"max"===t)return(0,D.Fp)(s)(r,n);if("join"===e&&"add"===t)return(0,x.yL)(r,n,we("join",(0,D.Fp)(i)));if("join"===e&&"mul"===t)return(0,x.yL)(r,n,we("join",(0,D.Fp)(i)));if("join"===e&&"max"===t)return(0,D.Fp)(s)(r,n);if("min"===t)return ge.operation(e,"max",r,n,o,function(e){return(0,D.Zt)(((t,r)=>A(e.compare(t,r))))}(i));if("delta"===e&&"max"===t)return(0,D.gt)(s)(r,n)?r:n.map(p);if("delta"===e)return(0,x.yL)(r,n,((e,t)=>(0,D.gt)(I(i))(e,t)?e:{kind:"bottom"}));throw new Error("Non exhaustive match in combineCommand.operation")},extend:(e,t,r,n)=>{if("delta"===e&&"top"===r.kind&&"top"===n.kind)return(0,D.gt)(S.Df)(r.error,n.error)?_(r.error):{kind:"bottom"};if("delta"===e&&"bottom"===n.kind)return r;if("delta"===e&&"bottom"===r.kind)return{kind:"bottom"};if("top"===r.kind&&"top"===n.kind)return _((0,D.Fp)(S.Df)(r.error,n.error));if("top"===r.kind)return r;if("top"===n.kind)return n;if("inner"===r.kind&&"inner"===n.kind)return t(r.a,n.a);if("bottom"===r.kind)return n;if("bottom"===n.kind)return r;throw new Error("Non exhaustive match in extend")}},_e={plus:(e,t)=>e+t,times:(e,t)=>e*t};function he(e,t,r,n){if("unbounded"===e.kind&&"unbounded"===t.kind){const o=e.group,i=t.group;return(0,O.fS)(p)((0,O.UI)((e=>g(h(e))))(U(o,i,r,n)))}if("windowed"===e.kind&&"windowed"===t.kind){const o=e.key,i=e.group,s=t.key,a=t.group,u=(0,D.Fp)((0,O.pR)(n))(o,s);return(0,O.fS)(p)((0,O.UI)((e=>g(m(e,u))))(U(i,a,r,n)))}if("countLimit"===e.kind&&"countLimit"===t.kind){const o=e.n,i=t.n;if(o===i){const i=e.limit,s=e.group,a=t.limit,u=t.group,c=(0,D.Fp)((0,O.pR)(n))(i,a);return(0,O.fS)(p)((0,O.UI)((e=>g(v(e,c,o))))(U(s,u,r,n)))}return _("Non matching counts")}if("uniqueLimit"===e.kind&&"uniqueLimit"===t.kind){const o=e.n,i=t.n;if(o===i){const i=e.limit,s=e.group,a=t.limit,u=t.group,c=(0,D.Fp)((0,O.pR)(n))(i,a);return(0,O.fS)(p)((0,O.UI)((e=>g(b(e,c,o))))(U(s,u,r,n)))}return _("Non matching counts")}return _("Non matching group types")}function me(e,t,r){return(0,O.fS)(a)(ve(e,O.YP)(t,r))}function ve(e,t){const r=t=>(r,n)=>ge.strategy(e,r,n)(ve(e,t)),n=(t,n,o)=>{if("stringGroup"===n.kind&&"stringGroup"===o.kind){const e=he(n.group,o.group,r(t),S.Df);return M(e,(e=>w(ye(e,S.Df))))}if("numberGroup"===n.kind&&"numberGroup"===o.kind){const e=he(n.group,o.group,r(t),z.Df);return M(e,(e=>y(ye(e,z.Df))))}if("tuple"===n.kind&&"tuple"===o.kind){const r=(0,O.pC)(t)?t.value:[];return g(E(function(e,t,r,n,o,i){const s=(e,t)=>({1:(0,x.ke)(e)(t).concat((0,x.KB)(Math.max(0,e-t.length),p)),2:(0,x.md)(e)(t)}),a=(t,r,n)=>{if(0===t.length)return ge.operation(e,"max",r,n,o,i);if(t.length>0){const[u,...c]=t,d=s(u[2],r),l=d[1],f=d[2],p=s(u[2],n),g=p[1],_=p[2];return ge.operation(e,u[1],l,g,o,i).concat(a(c,f,_))}throw new Error("Non exhaustive match in recurse")};return(0,x.GY)((0,x.Qp)((e=>"bottom"===e.kind))((0,x.GY)(a(t,r,n))))}(e,r,n.tuple,o.tuple,_e,z.Df)))}throw new Error(`Non matching payload. Got ${n.kind} and ${o.kind}`)},o=(e,r)=>{if((0,O.Eh)((0,C.Eh)((0,R.n_)({1:S.Eq,2:z.Eq}))).equals(e.commands,r.commands)){const o=(0,O.Wi)(e.commands)?t:e.commands,i=n(o,e.payload,r.payload);return M(i,(t=>P(e.commands,t)))}throw new Error(`Non matching primitive strings. Got ${H(e)} and ${H(r)}`)};return(t,r)=>J(k(ge.extend(e,o,ie(t).state,ie(r).state)))}function be(e,t,r){const n=(0,O.UI)((t=>L(e,(([e,n])=>(0,D.gf)(r)(e,t)))))(t);return(0,O.fS)((()=>e))(n)}function ye(e,t){switch(e.kind){case"unbounded":return e;case"windowed":return(0,O.Wi)(e.key)?e:m(be(e.group,e.key,t),e.key);case"countLimit":{const r=e.limit,n=e.n,o=e.group,i=G(n,o,((e,t)=>t<=1?O.YP:(0,O.G)(t-1)),t),s=(0,D.Fp)((0,O.pR)(t))(r,i);return v(be(o,s,t),s,n)}case"uniqueLimit":{const r=e.limit,n=e.n,o=e.group,i=(e,t)=>{if("object"===e.kind){const r=[...e.value.keys(),...t.keys()],o=new Set(r);return o.size>=n?O.YP:(0,O.G)(o)}return O.YP},s=G(new Set,o,i,t),a=(0,D.Fp)((0,O.pR)(t))(r,s);return b(be(o,a,t),a,n)}}}function we(e,t){return(r,n)=>ge.extend(e,((e,r)=>g(t(e,r))),r,n)}var Ee=r(922),ke=r(2652),Pe=r(4730),De=r(8036);class Se{constructor(e,t,r){this.externalData=e,this.localQueries=t,this.externalQueries=r,this.queryCodesAsList=[],this.queryCodesAsMap={};const n=this.externalData.getExternalJsonData(Ee.mL)||[],i=(0,o.zG)((0,O.Y3)((()=>n.filter((e=>(0,De.UC)(e,this.localQueries,this.externalQueries))))),(0,O.fS)((()=>[])));this.add(i)}add(e){return(0,o.zG)(e.forEach((e=>this.queryCodesAsMap[e]=!0)),(e=>this.updateSegmentsList()))}remove(e){return(0,o.zG)(e.forEach((e=>delete this.queryCodesAsMap[e])),(e=>this.updateSegmentsList()))}getAllAsList(){return this.queryCodesAsList}getAllAsMap(){return this.queryCodesAsMap}getUpdates(e){const t=[],r=[];return Object.entries(e).forEach((e=>{let[n,o]=e;const i=parseInt(n),s=(null==o?void 0:o.result)||{result:!1},a=!0===(null==s?void 0:s.result)&&!(i in this.queryCodesAsMap),u=!1===(null==s?void 0:s.result)&&i in this.queryCodesAsMap;a?t.push(i):u&&r.push(i)})),{entered:t,exited:r}}flush(){this.externalData.setExternalJsonData(Ee.mL,this.getAllAsList())}reset(){this.externalData.removeExternalData(Ee.mL),this.queryCodesAsList=[],this.queryCodesAsMap={}}updateSegmentsList(){this.queryCodesAsList=Object.keys(this.queryCodesAsMap).map((e=>parseInt(e)))}}const Me="bootstrap",Ie="process",Oe="processTransitions",Ce="updateExternalState",xe="updateLAL",Te="updateTPD";var Ae=r(2851);const qe="permutive:query:changed",Ue="internal_query_states",Ge="external_query_states",je=e=>class extends e{constructor(){super(...arguments),this.prefix="[Query Manager]",this.isWorkerReady=!1,this.stateMap={value:{},promise:Promise.resolve({})},this.extStateMap={},this.userSegments=new Se(this.externalData,this.queryMetadata,this.externalQueries),this.segmentEntryQueryCodes=new Set,this.segmentExitQueryCodes=new Set,this.cohortEntryQueryCodes=new Set,this.cohortExitQueryCodes=new Set,this.hasNewOrModifiedQueries=!1,this.scheduler=new Pe.b(this.transitionDebounceTime,this.transitionDebounceMaxTime),this.debouncedProcessTransitions=this.makeDebouncedProcessTransitions(),this.lalAndTpdListenersInitd=!1;const[e,t]=Ae.Ue(this.userSegments.getAllAsList());this.queryCodesRef=e,this.queryCodesRefUpdate=t;const[r,n]=Ae.Ue(Ae.a9(O.YP));this.setLalRef=n,this.lalRef=Ae.xH(r);const[o,i]=Ae.Ue(Ae.a9(O.YP));this.setTpdRef=i,this.tpdRef=Ae.xH(o)}get queryCodesAsRef(){return this.queryCodesRef}makeStateMaps(){const e=this.permutiveData.getData(Ue)||{},t=this.permutiveData.getData(Ge)||{};for(const t in e)if("activations"in e[t]){const r=e[t].activations;for(const e in r)r[e]=[...new Set(r[e])]}this.logDebug("Cached state maps",{internal:e,external:t});const r=Object.keys(this.queryMetadata),n=Object.keys(e);this.hasNewOrModifiedQueries=r.length!==n.length||r.filter((t=>{var r;return this.queryMetadata[t]!==(null===(r=e[t])||void 0===r?void 0:r.checksum)})).length>0,this.logDebug("has new or modified queries",this.hasNewOrModifiedQueries);const o=this.hasNewOrModifiedQueries?(0,ke.fl)(e,(t=>{var r;const n=null===(r=e[t])||void 0===r?void 0:r.checksum,o=n===this.queryMetadata[t];return o||this.logDebug(`Dropping state for query ${t}, mismatched checksum`,{cachedChecksum:n,checksum:this.queryMetadata[t]}),o})):e;this.extStateMap=this.hasNewOrModifiedQueries?this.dropExternalStateMissingFromStateMap(t,o):t,this.stateMap={value:o,promise:Promise.resolve(o)},this.logDebug("Initialised state maps",{internal:this.stateMap.value,external:this.extStateMap,metadata:this.queryMetadata});this.permutiveData.getData("query_states")&&this.permutiveData.deleteKey("query_states")}dropExternalStateMissingFromStateMap(e,t){const r=(0,ke.fl)(e,(e=>e in t));return this.permutiveData.setData(Ge,r),r}makeDebouncedProcessTransitions(){return this.scheduler.scheduleAccumulated((e=>this.processTransitions(e)),{concat:(e,t)=>e.concat(t),empty:[]})}makeMessage(e,t,r){return{type:e,payload:(0,o.bc)(this.queryMetadata,this.extStateMap,...t),stateMap:r,userId:this.userId.get()}}trackTransition(e,t){const r=Ee.ED?this.customProperties.getCustomProps():{},n=Object.assign(Object.assign(Object.assign({},r),{segment_number:t}),{});e?(this.segmentEntryQueryCodes.add(t),this.cohortEntryQueryCodes.add(t.toString())):(this.segmentExitQueryCodes.add(t),this.cohortExitQueryCodes.add(t.toString())),this.permutive.track(e?"SegmentEntry":"SegmentExit",n)}trackSegmentsTransition(e,t){e.forEach((e=>{this.trackTransition(!0,e),this.messages.emit(qe,{queryCode:e,result:{result:!0}})})),t.forEach((e=>{this.trackTransition(!1,e),this.messages.emit(qe,{queryCode:e,result:{result:!1}})}))}updateUserSegments(e,t){e.length>0&&this.userSegments.add(e),t.length>0&&this.userSegments.remove(t),(e.length>0||t.length>0)&&(this.userSegments.flush(),this.queryCodesRefUpdate(this.userSegments.getAllAsList()))}onStateChangeReady(e){const{entered:t,exited:r}=this.userSegments.getUpdates(e);this.trackSegmentsTransition(t,r),this.updateUserSegments(t,r),this.logDebug("Updating query state",{updatedStateMap:e}),this.permutiveData.setData(Ue,e);return(t.length>0||r.length>0)&&(this.logDebug("Updated cohorts",{entered:t,exited:r}),this.messages.emit("permutive:segments:updated")),{segmentsEntered:new Set(t),segmentsExited:new Set(r),cohortsEntered:new Set(t.map(String)),cohortsExited:new Set(r.map(String))}}onStateChange(e,t){return(0,o.zG)(t.length>0?this.api.reportError(`QL error(s). Got ${t.join("; ")}`,this.userId.get()):{},(t=>this.stateMap.value=Object.assign(Object.assign({},this.stateMap.value),e)),(e=>this.isWorkerReady?[e,this.onStateChangeReady(e)]:[e,{segmentsEntered:new Set,segmentsExited:new Set,cohortsEntered:new Set,cohortsExited:new Set}]))}postMessage(e,t){const r=e=>this.userId.get()===e.userId?e:{diff:{},errors:[]};return new Promise((n=>{this.stateMap.promise=this.stateMap.promise.then((0,o.ls)((r=>this.makeMessage(e,t,r)),(e=>this.processMessage(e)))).then((0,o.ls)(r,(e=>{let{diff:t,errors:r,externalStateToDrop:o}=e;if(o){const e=(0,ke.fl)(this.stateMap.value,(e=>!(e in o)));this.extStateMap=this.dropExternalStateMissingFromStateMap(this.extStateMap,e)}const[i,s]=this.onStateChange(t,r);return n([t,s]),i}))).catch((e=>(0,o.zG)(this.api.reportError(`Error during query execution. Got ${e}`,this.userId.get()),(e=>n([{},{segmentsEntered:new Set,segmentsExited:new Set,cohortsEntered:new Set,cohortsExited:new Set}])),(e=>this.stateMap.value))))}))}processTransitions(e){return this.postMessage(Oe,[e])}bootstrap(e){const t=this.postMessage(Me,[{segments:{"1p":this.userSegments.getAllAsMap()},sessionId:this.sessionManager.getSessionId(),viewId:this.viewId.get(),lookalikeModels:this.lalRef.current,thirdPartydata:this.tpdRef.current},e]);return this.lalAndTpdListenersInitd||(this.lalAndTpdListenersInitd=!0,this.lalRef.onChange(O.UI((e=>this.postMessage(xe,[e])))),this.tpdRef.onChange(O.UI((e=>this.postMessage(Te,[e]))))),t}process(e,t){return(0,De.AG)(e)?this.debouncedProcessTransitions([e]):this.processStandard([e],t)}processStandard(e,t){return(0,s.mG)(this,void 0,void 0,(function*(){const r=yield this.postMessage(Ie,[e]);return t&&this.setAsRealTimeifNeeded(e),r}))}updateExternalState(e){const t=(0,ke.b0)(e,((e,t)=>{const r=this.queryMetadata[e];return r&&t[r]?(0,O.Uo)($(t[r])):O.YP})),r=(0,ke.b0)(this.extStateMap,((e,t)=>(0,O.Uo)($(t)))),n=(e,t,r)=>(0,o.zG)((0,O.Y3)((()=>(this.logDebug("Joining external state",{newExtState:e,currentExtState:t}),me("join",e,t)))),(0,O.fS)((()=>(this.api.reportError(`Failed to join external state for query: ${r}. Had ${B(t)}, received ${B(e)}}`,this.userId.get()),e)))),i=(0,ke.b0)(Object.assign(Object.assign({},r),t),((e,t)=>r[e]?(0,O.G)(W(n(t,r[e],e))):(0,O.G)(W(t))));return this.permutiveData.setData(Ge,i),this.extStateMap=i,this.postMessage(Ce,[])}reset(){this.userSegments.reset(),this.permutiveData.setData(Ue,{}),this.permutiveData.setData(Ge,{}),this.stateMap={value:{},promise:Promise.resolve({})},this.extStateMap={}}setAsReady(){this.isWorkerReady=!0,this.onStateChangeReady(this.stateMap.value),this.messages.emit("permutive:queries:initialised")}getStateSizeInBytes(){return 2*JSON.stringify(this.stateMap.value).length}setAsRealTimeifNeeded(e){return!this.realtime.isRealtime()&&e.filter((e=>"Pageview"===e.name)).length>0?this.realtime.setAsRealtime(this.userSegments.getAllAsList().length):void 0}logDebug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.debug(this.prefix,...t)}};function Le(){return(0,n.h)(new i.Z)}class Re{constructor(e){this.queryMetadata={139301:"0c8b70cdb7",148080:"f59c2e9202",149283:"116c29cc0e",149284:"495d6472ef",149285:"9ed68d5525",149287:"2835eadc74",149288:"d3ad78c050",149289:"0e8987b716",149290:"4aa0882640",149291:"92615474fb",149292:"3aa2baa427",149294:"ae5514309b",149295:"b732ca8fb9",149296:"9d3f3c5c12",149297:"698a6f4992",149588:"832546f41c",149590:"9c35a0e647",149591:"71d1f3ab95",149592:"fad8340e04",149593:"90787f0243",149594:"634bb75b6e",149595:"daca179843",149596:"0fdd40d3bb",149597:"40e17f0655",149598:"dc6f57ffac",149599:"6b112e8045",149600:"5324ef3c3b",149601:"9b9efe20c9",149602:"a49514c5eb",149603:"6d9fc75509",149604:"67d8ddd7b1",149605:"823afdb6cf",149606:"6fbaa2db72",149607:"9703bface1",149608:"6b5907be86",149609:"d2ea5163cb",149610:"34b644834e",149611:"c5afbcaaf0",149612:"027d2e2dba",149613:"85694c9364",149614:"6024e1ec5e",149615:"e45808ffce",149616:"ec0452b2e3",149617:"11159d1df6",149618:"21749e4152",149619:"1a75dec59f",149621:"60df5796ab",149622:"dc521786bb",149623:"d3dee22cd2",149624:"bf4d9bb919",149625:"e265930b7d",149626:"e5af544b63",149627:"0cbad10ce6",149628:"c1db2972a7",149629:"e0116c64a7",149630:"c99f44e437",149631:"b1523a5cd1",149632:"bbc0c67668",149633:"d549a4a823",149634:"2bd1ef70b3",149635:"73641263a7",149636:"3f13dff474",149637:"1bff372e74",149638:"c2167a718f",149639:"76ce4ad76a",149640:"3097035e2f",149709:"94bd151787",149710:"233014a92c",149711:"ff6040145e",149712:"7b0b147f20",149713:"b8095c92e7",149714:"b37263b362",149715:"a6a6272745",149716:"1447a52f42",149717:"01e779f387",149718:"31cf1461ca",149719:"d9df301fbd",149720:"dabe1d41e2",149721:"9a8768da87",149722:"127c8465d9",149723:"ef8c6e6412",149724:"cc5a5300c2",149725:"35d6c99fcf",149726:"e0c75a4969",149727:"fa9afc8d6a",149728:"e12c936280",149729:"a03019370b",149730:"768c43807b",149731:"6e5ea6c31d",149732:"f526cbd15c",149733:"13eab315a2",149734:"e8a78dcfb4",149735:"bbd043b28f",149736:"3702a0fc61",149737:"58cbdae788",149738:"cf065bd6ac",149739:"f17b7608cc",149740:"c96b669d77",149741:"1d84872d53",149742:"b58f302240",149743:"6a4ec429f5",149744:"adbc363400",149745:"c9aa035a33",149746:"772408a30b",149747:"0449f8b10c",149748:"d80f225b10",149749:"25e854bc91",149750:"d2f269f30c",149751:"4af441586d",149752:"75e41f5870",149753:"fa01d62171",149754:"846bf85c5f",149755:"b485e92d74",149756:"19e360346d",149757:"8461c66fd1",149758:"f7a5cd1da0",149759:"3018836cb9",149760:"95c11fde1f",149761:"5ab4d6c5c6",149762:"7f7133de90",149763:"9754163f35",149764:"e74a8fa4de",149765:"76bcf3ae71",149766:"c3bf70bc98",149767:"e5b1692256",149768:"ef47cad8f8",149769:"f598661d83",149770:"1c88ad60ac",149771:"14387f271d",149772:"7e2d7b1312",149773:"66d35aa7e8",149774:"e10762edbc",149775:"b43bbefa12",149776:"5d4146111c",149777:"025e8cb79d",149778:"2c264ed825",149779:"7084fb10a3",149780:"14ba53dc5d",149781:"8f15aaf5f5",149782:"71f2adbb06",149783:"f7995453b8",149784:"b8b09fbe27",149785:"36abd0f02c",149786:"506f17565d",149787:"d7276fe533",149788:"0d458ef17e",149789:"315e095f1f",149790:"57a91ef2b4",149791:"741d2d03e3",149792:"a869400c98",149793:"351510ab43",149794:"d339644831",149795:"3fd7365582",149796:"3c3dd75503",149797:"1e3d58ecf7",149798:"03e7f5c84c",149799:"2aa17e05f9",149800:"c45b274f71",149801:"2c7835519b",149802:"1a004791c9",149803:"d8c8a6cce5",149804:"0cdd7f29eb",149805:"858356b9a5",149806:"fe92dfcfed",149807:"a1f29798b6",149808:"3cbd1efc8b",149809:"1bf438be6a",149810:"4f56fe2531",149811:"6b36fc1f5f",149812:"1152e41307",149813:"1a8c8f86f9",149814:"3488d069fb",149815:"ad24870c9b",149816:"809301d08a",149817:"2bfee499c6",149818:"7be7b39f88",149819:"eae589350d",149820:"7658ab493a",149821:"55364b8f5f",149822:"dcf24546e9",149823:"17b6879ff0",149824:"4851597032",149825:"8e4553ffea",149826:"1808ef6436",149827:"64616f2bad",149828:"934ef3d137",149829:"172d9c6f68",149830:"04175ab226",149831:"482979aa0e",149832:"5c8635d82a",149833:"d6b8063720",149834:"c0ecb0279c",149835:"a7aab541ca",149836:"960c3bbb32",149837:"70c392ea89",149838:"88a3e6c53b",149839:"679221e514",149840:"10d7b26a51",149841:"05377b388c",149842:"5856b863f6",149843:"20f50f2c44",149844:"311878d579",149845:"09e029c6c2",149846:"7a1f102f4a",149847:"f681ef5783",149848:"06fc11423d",149849:"ca427af094",149850:"a48f1ce6e4",149851:"42cc8ac136",149852:"adc447bd5f",149853:"bd156bb984",149854:"a110a119f6",149855:"55d41163b2",149856:"115661e1f8",149857:"8332942d76",149858:"43f5ba68ba",149859:"bc2d6426e2",149860:"bc7b7c1beb",149861:"e8d3245fbf",149862:"85fe57de5f",149863:"938e11bfc2",149864:"99f5ce1adc",149865:"0cb76dcded",149866:"f127f3bcc8",149867:"2658565788",149868:"63f26d7d75",149869:"eaedecd662",149870:"f1a8f5b1d2",149871:"0d757c800a",149872:"36dd479f87",149873:"c4ca39183d",149874:"9e37ea56e0",149875:"599ad45a49",149876:"4295b72ef7",149877:"5c6c68d712",149878:"65bfc7fa22",149879:"c7483dea1e",149880:"c2cc6a3f0b",149881:"ce0ccc8f9b",149882:"8c5098f5e6",149883:"8bd3809da8",149884:"7aba190783",149885:"fb198e45fd",149886:"126415658f",149887:"1683312463",149888:"b5709f23ca",149889:"48aa00e30a",149890:"b506d410c4",149891:"f91e129053",149892:"572e56dd44",149893:"3f2241dbf6",149894:"9f4be91e0c",149895:"0adf10021d",149896:"10a1587241",149897:"8e1d99341c",149898:"b8be5ae63e",149899:"5fc13d5974",149900:"aa35b0d905",149901:"027bcc99b3",149902:"f272350ec8",149903:"336d707ba5",149904:"506b02748e",149905:"530ca30f85",149906:"0f30e1e19f",149907:"4e4251231a",149908:"f469ed7b49",149909:"6eeca680e7",149910:"66e27a9a08",149911:"a6ac002043",149912:"6e6cd5049e",149913:"cfcbce6672",149914:"2753d4a0c9",149915:"86c8794fad",149916:"46ae13b468",149917:"daaa0de65c",149918:"44f7c9294f",149919:"d4336e1f0b",149920:"d2e8c591bf",149921:"0121b0deb4",149922:"1cdc14dd99",149923:"4346e69197",149924:"50ad401a23",149925:"9d1f28a46d",149926:"0ae7ba0d83",149927:"f43682fe0a",149928:"38f57a8677",149929:"e9ab714e68",149930:"34023d4a7f",149931:"71f13e2ec4",149932:"8c4fd63464",149933:"2c240cf5c2",149934:"4bf069e169",149935:"0bb8722a57",149936:"623830644f",149937:"ef7adc76b9",149938:"b95fa029c2",149939:"66213e40c3",149940:"35f3865fc4",149941:"bee6f7d817",149942:"570dc96cbc",149943:"41639aae2a",149944:"569cf5e0e5",149945:"ca0be6ecd2",149946:"0303053189",149947:"be9627c6de",149948:"96b900924a",149949:"00e8b02b7a",149950:"7aba190783",149951:"5359c8562d",149952:"4cb28a95c5",149953:"c95466edd3",149954:"d64c502fa3",149955:"9482e4db82",149956:"b5709f23ca",149957:"9e6c5e4e10",149958:"0c2ab4a888",149959:"1f33483fcf",149960:"2c3c40c6c1",149961:"7bd699ecdf",149962:"98eaed5470",149963:"b1b1f3db75",149964:"ca1e09283b",149965:"965cf3333d",149966:"30c7790017",149967:"66f5cc9c4a",149968:"19cb74f38a",149969:"61f4dd2234",149970:"f1eec8236f",149971:"544cabb573",149972:"3aa163436e",149973:"a4b8e02da7",149974:"a84bc47481",149975:"747648bd0c",149976:"dc8f42cea0",149977:"efa4a2ff65",149978:"4c7472b658",149979:"28c7ed97f2",149980:"5f6d52caed",149981:"2728e7e4a8",149982:"7796a73040",149983:"2cedc0880a",149984:"3c11b3387b",149985:"0742aca744",149986:"a2e433b625",149987:"9e33cfce9e",149988:"554c032d95",149989:"33dd99869c",149990:"761d70e5f5",149991:"f8b01c3cdd",149992:"5232f29d39",149993:"2285ec5a5a",149994:"42f1df9740",149995:"30ceca17e5",149996:"4b887bfb0d",149997:"0beec8dcab",149998:"07eb8aab8a",149999:"318f7d9889",15e4:"f30a9690f1",150001:"9a119dbb52",150002:"48b22519d8",150003:"071965fb7c",150004:"4b84e59414",150005:"4eb1e7aa14",150006:"e0524c2db0",150007:"e34fa01513",150008:"12b7192623",150009:"4232db574b",150010:"6db4a0bcbe",150011:"5b3558d7c1",150012:"e5964b9b71",150013:"b2837911a2",150014:"033c9db0e1",150015:"a277d7c2ba",150016:"db43ab9a87",150017:"f4597d8900",150018:"1cdc14dd99",150019:"26fda3540e",150020:"ab06ae23d4",150021:"2bab89889c",150022:"14ff86a91f",150023:"90c3e08da4",150024:"d7a1680a78",150025:"c2d5f1ff54",150026:"f0aa691dcb",150027:"51e93b920a",150028:"736df88773",150029:"3fd9406254",150030:"217eb92c24",150031:"949cb0d505",150032:"b1f2503a7c",150033:"2a95df847f",150034:"4e319855e7",150035:"255c0ec7c6",150036:"f8bd41c07e",150037:"10a65870c9",150038:"c5844ac1ac",150039:"a7a53f543c",150040:"75bb9b106c",150041:"14d404e726",150042:"d6cabc48b3",150043:"feda7b7cc1",150044:"973372ddac",150045:"8085f6bf10",150046:"f949e94d12",150047:"a2760835ce",150048:"6f3c8f5959",150049:"c48155c972",150050:"a5d45f94c2",150051:"283b211ffd",150052:"d5fbe2ffab",150053:"7f7c2f5912",150054:"cbc0b57de5",150055:"eeff01f598",150056:"28b0b7f761",150057:"4ba60024e7",150058:"4b9b13291b",150059:"213e2dc927",150060:"d07ce571cc",150061:"a830b8a0d9",150062:"31861b336f",150063:"7d382d8213",150064:"e21743baaf",150065:"b4ee69e035",150066:"90d55a4e14",150067:"1543a819a7",150068:"9d59cfcfb5",150069:"19f4483bbf",150070:"e75a92cc9c",150071:"970ca0ee38",150072:"79335ccabc",150073:"63e1f67a29",150074:"23bb8ee9d1",150075:"ac2f308d20",150076:"fecc9cf4a2",150077:"52fcf19ec0",150078:"49d2c2160f",150079:"e9b64c3954",150080:"81339f099e",150081:"c650593b4e",150082:"052156aba0",150083:"56b9e919e9",150084:"097580a5e7",150085:"8b156f3408",150086:"8e02acbf1f",150087:"1e655243a0",150088:"176013ddb1",150089:"54110173c0",150090:"4b2a28745a",150091:"3d64b3b181",150092:"6c83d79080",150093:"db9d1fce70",150094:"9d5f17b87f",150095:"795f2c61ad",150096:"50469d15fe",150097:"1103401d02",150098:"d9d71e3410",150099:"2a95df847f",150100:"7383c4829e",150101:"4516dccbb9",150102:"af35b13188",150103:"881e855898",150104:"90b377a4d6",150105:"10a65870c9",150106:"93a053d9ca",150107:"05bf8f5cdb",150108:"e9bf74aab4",150109:"64b5f4886f",150110:"b989ed34f6",150111:"9b09761b20",150112:"d72d31b732",150113:"a3b6073b57",150114:"014fc44197",150115:"347bd79880",150116:"84b852ff0b",150117:"d33a7ce61b",150118:"6010a7c64e",150119:"fe14400544",150120:"02922700a3",150121:"f2990e60e2",150122:"7bff9acb01",150123:"6e53ffb60b",150124:"d2e9cc3195",150125:"0798f504f9",150126:"6d21bcce7a",150127:"4ca8aad6c5",150128:"19f5932c3d",150129:"a332036b45",150130:"3f717127e4",150131:"dcd615b91a",150132:"3a73a11600",150133:"06b59cadce",150134:"67216771d6",150135:"501be6df6a",150136:"d6c2987725",150137:"0201c5c31d",150138:"7a801b63d7",150139:"a6c932ccc9",150140:"ef6bf106f3",150141:"0c7cdf2a0a",150142:"2dc4776db5",150143:"3088d4c18c",150144:"a9f43e1e4b",150145:"29ced71855",150146:"410866a3af",150147:"6d0d37ad5d",150148:"5158b93386",150149:"e4a435f0ab",150150:"483c72f4bf",150151:"7519e75493",150152:"a6287740c2",150153:"9a26e9044d",150154:"e238d4efe6",150155:"5860628699",150156:"48837d9147",150157:"40e86e10b1",150158:"3a55010162",150159:"2e8e6e0f51",150160:"acb5e7ab22",150161:"d6d28c2b41",150162:"08ed609a1d",150163:"1a1bd58dff",150164:"bafed72619",150165:"918dc2598b",150166:"8ac0354da8",150167:"970ca0ee38",150168:"b31ad5e0ae",150169:"c7365569e8",150170:"42178c4dab",150171:"0db437b784",150172:"8d9b04e8b7",150173:"863525d1fa",150174:"7a6bba1762",150175:"e6931b4004",150176:"483679d320",150177:"e893b94cfc",150178:"3dd672ca25",150179:"b5762790c5",150180:"0701a6dfd9",150181:"9fa9aa8f54",150182:"6241313a73",150183:"97c753e8b4",150184:"90c0326bd1",150185:"6d27427b7f",150186:"006fb37b7f",150187:"f903846d3c",150188:"080a18632f",150189:"39c3d531e8",150190:"2a9737a379",150191:"edc11a0725",150192:"4b5715d755",150193:"9d8f5874dd",150194:"c1aa46ed0f",150195:"f7c6002aa0",150196:"96d4744e81",150197:"7199fa98bb",150198:"aaf2ce6db5",150199:"14d0864bed",150200:"2d94467e27",150201:"807de32ea6",150202:"74f42d44c4",150203:"f3f68a8d7c",150204:"0e451840c9",150205:"b8ba9aed63",150206:"30fd566ffb",150207:"2b190969b4",150208:"65095a6b05",150209:"b6592b3c27",150210:"61bc3f7eba",150211:"8c8d2dbb4c",150212:"832328a4f5",150213:"4d0bd2a26b",150214:"83b8bd7408",150215:"259ff20d63",150216:"0feb8613b2",150217:"cd93d097c5",150218:"ffdb99e5dd",150219:"18053ea18d",150220:"c03bf7f25c",150221:"35fff358cf",150222:"f873fedb31",150223:"773dc76014",150224:"c92d212576",150225:"457d6bbca8",150226:"042ccce665",150227:"0afaebd9ad",150228:"7cac406430",150229:"d223558453",150230:"f662d971f7",150231:"a6c07d1648",150232:"857eaee985",150233:"536e1e82f8",150234:"2509d1d254",150235:"3c6f5bf58c",150236:"ddee07f791",150237:"87a0e2d154",150238:"d2b8a148cd",150239:"c11d5e3ed5",150240:"b67dcbf893",150241:"edfec61739",150242:"ff44deb22e",150243:"bda511ea19",150244:"c45711e194",150245:"5b45a5e7b3",150246:"a2bf44e8f8",150247:"cfa0dfcca1",150248:"6241313a73",150249:"c28cb453cb",150250:"fc5a34599e",150251:"42ef4129bd",150252:"7996d9ddf0",150253:"ec996a29ba",150254:"006fb37b7f",150255:"bd7dd53198",150256:"449732d8c5",150257:"49517e65b9",150258:"c97c20b6d8",150259:"1b1d37c7aa",150260:"9a46f015d4",150261:"7e83d6c804",150262:"9ede00992f",150263:"adf1216f55",150264:"13e11f1c3f",150265:"9f1e361af8",150266:"117815fa38",150267:"f8cbf7bb71",150268:"1f20165aaa",150269:"c3cd813e7f",150270:"67691035af",150271:"ae2ddf0d55",150272:"39ecafebb6",150273:"a774ae5cb7",150274:"2ef67fe0a8",150275:"cac760411f",150276:"f08beb9d10",150277:"aae4698547",150278:"ce25a1992d",150279:"762f765ce0",150280:"1d2b7ea5f9",150281:"a97f072796",150282:"e059112878",150283:"c80a19aeb9",150284:"43b8a14e37",150285:"b5e62c8399",150286:"a3173aa479",150287:"5764bb930b",150288:"df5eefebd8",150289:"ece91a696c",150290:"f18ba548f7",150291:"262b66a342",150292:"319826c9f0",150293:"545b7a61be",150294:"b14139de6f",150295:"ef17c6706f",150296:"93c11484bb",150297:"b9f3897a3e",150298:"2b51e41de5",150299:"0d7f4b0493",150300:"8ab5efa928",150301:"d2d21ba9f7",150302:"58debe0a8a",150303:"2cdc14e455",150304:"729a09d6c3",150305:"ebcbcf8630",150306:"8d939075a3",150307:"e385121161",150308:"60ead3bce2",150309:"a555e27bef",150310:"7ab4967626",150311:"4fc8596133",150312:"74fd5df087",150313:"71d0e5c97e",150314:"c61de30871",150315:"e19c90f7f4",150316:"c03bf7f25c",150317:"acefd46fdf",150318:"0a87f9bb92",150319:"8ec08c8265",150320:"7130bfd011",150321:"2dc97d6723",150322:"030647bd7e",150323:"86bbca26e0",150324:"67e2d61ebe",150325:"aab3cdf2fd",150326:"71953d3af0",150345:"0a35b5960b",150353:"ad5b2a30bb",150429:"013f156d28",150673:"95389d8346",150674:"a4dadc1fe7",150682:"b03aeec33c",150965:"199486640f",150979:"14e416e6d9",150980:"7f4131d376",150981:"de7a3a77ef",150982:"56dfc97170",150983:"58d4e1267b",150984:"ceb18cf866",150985:"3b7b2310e0",150986:"e7a45d0fff",150987:"b34410ef89",150988:"85eb2e1a7d",150989:"faad634f88",150990:"f579d37fb2",150991:"4adb50b3cc",150992:"8bdc944e6e",150993:"70e6bf51be",150994:"e8d13ffa7e",150995:"152171492a",150996:"0abd900341",150997:"dc66124f2a",150998:"ebfaae8f8d",150999:"5490800153",151e3:"599b1513c0",151001:"44b373e22b",151002:"d4d2a4bbdb",151003:"f31c4f034f",151004:"12d1d2a028",151005:"8134b6d3fd",151006:"9f816a7d18",151007:"1c828d4646",151008:"92ed9be1f3",151009:"1f1038d7c3",151010:"4a44ddcb55",151011:"8fb3168821",151012:"b477144496",151013:"9744fb8435",151014:"2ba7301755",154112:"b5d8c2bdd8",154143:"6ee9ade5e0",154144:"c1a8845efe",154145:"59ae0f4a82",154146:"b463eafefb",154147:"bc9ff924c1",154148:"3387a40996",154149:"611e92d35e",154150:"30638b3e78",154151:"bfef6d943c",155230:"4927cf1de8",155231:"0aad55dd72",155232:"e03b92e8e4",155233:"4138b6e257",155234:"9f94aef294",155235:"193cbb2e6f",155236:"7f77be2a81",155237:"450e11e287",155238:"3331ccda21",155239:"0821f04117",155951:"483723eda3",156198:"dba53605aa",156314:"d6844c2302",156318:"10888f3d8c",156769:"b075f44e16",156957:"1a959a2767",157021:"989a5d1e42",157045:"c7458b8a50",157052:"77775fb503",157053:"be4c85ff18",157071:"4053645709",157548:"d88eb8f9d2",158131:"aa9b7ebd02",158191:"4acc6f944c",158320:"475d70bd90"},this.externalQueries=new Set([]),this.customProperties=e.customProperties,this.externalData=e.externalData,this.logger=e.logger,this.messages=e.messages,this.api=e.api,this.permutive=e.permutive,this.permutiveData=e.permutiveData,this.queryWorker=e.queryWorker,this.realtime=e.realtime,this.sessionManager=e.sessionManager,this.transitionDebounceMaxTime=e.transitionDebounceMaxTime,this.transitionDebounceTime=e.transitionDebounceTime,this.userId=e.userId,this.viewId=e.viewId,this.metrics=e.metrics}processMessage(e){return this.queryWorker.postMessage(Object.assign({engine:"QLE"},e))}}class ze extends((()=>(0,o.zG)(Re,je))()){constructor(e){super(e),this.makeStateMaps()}}},8318:(e,t,r)=>{r.d(t,{F:()=>i});var n=r(6934),o=r(1628);const i=(0,n.Y3)((()=>{const e=(0,o.e)();return e.postMessage({engine:"QLE",type:"noop",userId:""}),Promise.resolve(e)}),(e=>`Failed to start QueryWorker. Got ${e}`))},3622:(e,t,r)=>{r.d(t,{$:()=>o});var n=r(2652);class o{constructor(e){this.permutiveData=e,this.eventSourceId=e.getData("event-source-id")||this.generateAndStoreEventSourceId()}get(){return this.eventSourceId}generateAndSet(){this.eventSourceId=this.generateAndStoreEventSourceId()}generateAndStoreEventSourceId(){const e=(0,n.k$)();return this.permutiveData.setData("event-source-id",e),e}}},1229:(e,t,r)=>{r.d(t,{N:()=>p,e:()=>l});var n=r(655),o=r(2688),i=r(7183),s=r(5e3),a=r(3735),u=r(4386),c=r(4730),d=r(8036);function l(){return(0,i.h)(new u.Z)}const f={concat:(e,t)=>Object.assign(Object.assign({},e),t),empty:{}};class p{constructor(e,t,r,n,o,i,s,a,u){this.api=e,this.network=t,this.sessionManager=r,this.permutiveData=n,this.queryManager=o,this.metrics=i,this.userId=s,this.eventSourceId=a,this.stateWorker=u,this.DEBOUNCE_TIME=1e3,this.MAX_DEBOUNCE_TIME=5e3,this.fetchUnseenState=!0,this.scheduler=new c.b(this.DEBOUNCE_TIME,this.MAX_DEBOUNCE_TIME),this.debouncedSyncIfNotEmpty=this.scheduler.scheduleAccumulated((e=>this.syncIfNotEmpty.bind(this)("standard",e)),f),this.fetchUnseenState=!!g.includes("867f8423-d142-4fd1-ae8d-1a9bbbdf2358")||this.sessionManager.sessionHasChanged(),this.stateOffset=this.permutiveData.getData("state_offset")||0,this.lastSentStateMapWithChecksum=(0,d.Yh)(this.permutiveData.getData("internal_query_states")||{}),this.stateWorker.postMessage({engine:"SSE",type:"noop"})}sync(e){return(0,a.zG)(this.debouncedSyncIfNotEmpty(e),(e=>Promise.resolve()))}syncWithUnseen(){return this.syncIfNotEmpty("unseen",{}).then(a.Q1)}syncIfNotEmpty(e,t){const[r,n,i]="standard"===e?[this.stateOffset,t,this.fetchUnseenState]:"unseen"===e?[this.stateOffset,this.queryManager.stateMap.value,!0]:[0,{},!0],s=this.metrics.startTimer("sdk_compute_delta_seconds",{}),u={type:"delta",stateMap:n,lastSentStateMapWithChecksum:this.lastSentStateMapWithChecksum},c=this.stateWorker.postMessage(Object.assign({engine:"SSE"},u)).then((e=>(this.metrics.stopTimer("sdk_compute_delta_seconds",s),e))),d=e=>{this.fetchUnseenState=!1;const t=(0,a.ls)((e=>this.api.reportError(`Error sending state delta. Got ${(0,o.w)(e)}`,this.userId.get())),(e=>({})));return this.api.state(this.metrics,this.userId.get(),this.eventSourceId.get(),e,r,i).then((e=>function(e){return!!e}(e)?this.onStateResponse(e):{})).then((t=>(this.lastSentStateMapWithChecksum=e,t))).catch(t)};return c.then((e=>i||Object.keys(e).length>0?d(e):Promise.resolve({})))}resetSync(){return(0,n.mG)(this,void 0,void 0,(function*(){this.reset(),yield this.syncIfNotEmpty("reset",{})}))}reset(){this.lastSentStateMapWithChecksum={}}onStateResponse(e){const t=(0,s.Y3)((()=>JSON.parse(e.state)),(e=>this.api.reportError(`Failed to parse State API response, got ${e}`,this.userId.get()))),r=e=>e?this.queryManager.updateExternalState(e):(0,a.Q1)();return(0,s.tO)(t)?(0,a.zG)(e.state_offset,(e=>this.stateOffset=e),(e=>this.permutiveData.setData("state_offset",e)),(e=>r(t.right)),(e=>t.right)):{}}}const g=["fe68d1f7-c9f4-45b3-8905-7cda73d3fd74"]},926:(e,t,r)=>{r.d(t,{Kd:()=>o,eJ:()=>i});var n=r(2116);r(2851),r(2652);const o="addon:twitter_pixel",i=function(e){return n.K4((()=>{}))}},1828:(e,t,r)=>{r.d(t,{ap:()=>i,gz:()=>c});var n=r(3735),o=r(9384);function i(e,t){return function(r){return function(n){return e.ap(e.map(n,(function(e){return function(r){return t.ap(e,r)}})),r)}}}function s(e,t,r){return function(n){for(var o=Array(r.length+1),i=0;i<r.length;i++)o[i]=r[i];return o[r.length]=n,0===t?e.apply(null,o):s(e,t-1,o)}}var a={1:function(e){return[e]},2:function(e){return function(t){return[e,t]}},3:function(e){return function(t){return function(r){return[e,t,r]}}},4:function(e){return function(t){return function(r){return function(n){return[e,t,r,n]}}}},5:function(e){return function(t){return function(r){return function(n){return function(o){return[e,t,r,n,o]}}}}}};function u(e){return o.e$.call(a,e)||(a[e]=s(n.bc,e-1,[])),a[e]}function c(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var n=t.length,o=u(n),i=e.map(t[0],o),s=1;s<n;s++)i=e.ap(i,t[s]);return i}}},1500:(e,t,r)=>{r.d(t,{Ce:()=>d,DY:()=>k,DZ:()=>U,Ew:()=>b,GY:()=>E,KB:()=>f,Qp:()=>v,UI:()=>x,f2:()=>y,fw:()=>W,hX:()=>j,jV:()=>I,jj:()=>S,ke:()=>g,md:()=>m,oA:()=>G,pR:()=>N,t9:()=>D,tS:()=>T,u4:()=>z,uK:()=>L,vP:()=>$,xH:()=>A,yL:()=>P,zT:()=>h});var n=r(3735),o=(r(7341),r(9384)),i=r(1885),s=r(3328),a=r(4870),u=(r(5605),function(e){return 0===e.length}),c=i.Od,d=i.Ce,l=(i.ws,i.R3),f=(i.Im,function(e,t){return e<=0?[]:i.KB(t)(e)});var p=i.dC,g=(s.P5,s.YM,s.Z$,function(e){return function(t){return p(e,t)?w(t):t.slice(0,e)}});var _=function(e,t){for(var r=e.length,n=0;n<r&&t(e[n]);n++);return n};function h(e){return function(t){var r=M(_(t,e))(t);return{init:r[0],rest:r[1]}}}var m=function(e){return function(t){return e<=0||u(t)?w(t):e>=t.length?[]:t.slice(e,t.length)}};function v(e){return function(t){return t.slice(_(t,e))}}s.cx;function b(e){return s.Ew(e)}var y=s.f2;s.JO,s.qr;var w=function(e){return e.slice()},E=function(e){return u(e)?[]:e.slice().reverse()},k=function(e){return function(t){return t.length<=1?w(t):t.slice().sort(e.compare)}},P=function(e,t,r){for(var n=[],o=Math.min(e.length,t.length),i=0;i<o;i++)n[i]=r(e[i],t[i]);return n};var D=s.t9,S=function(e){var t=i.jj(e);return function(e){return c(e)?t(e):w(e)}},M=function(e){return function(t){return e>=1&&c(t)?i.lx(e)(t):u(t)?[w(t),[]]:[[],w(t)]}};function I(e){var t=D(e);return function(r,n){if(void 0===n){var o=I(e);return function(e){return o(e,r)}}return r.filter((function(e){return t(e,n)}))}}var O=function(e,t,r){return(0,n.zG)(e,z(t,r))},C=(s.kp,s.Eq,i.of),x=function(e){return function(t){return t.map((function(t){return e(t)}))}},T=function(e){return function(t){return(0,n.zG)(t,function(e){return function(t){for(var r=[],n=0;n<t.length;n++)r.push.apply(r,e(n,t[n]));return r}}((function(t,r){return e(r)})))}},A=T(n.yR),q=function(e){return function(t){for(var r=[],n=0;n<t.length;n++){var i=e(n,t[n]);o.pC(i)&&r.push(i.value)}return r}},U=function(e){return q((function(t,r){return e(r)}))},G=U(n.yR),j=function(e){return function(t){return t.filter(e)}},L=function(e){return R((function(t,r){return e(r)}))},R=function(e){return function(t){for(var r=[],n=[],o=0;o<t.length;o++){var i=t[o];e(o,i)?n.push(i):r.push(i)}return(0,a.s4)(r,n)}},z=(s.Lx,s.xP,s.u4),B=s.OE,W=(s.nq,s.iw,function(e){var t=K(e);return function(e){return t((function(t,r){return e(r)}))}}),$=function(e){return function(t){return O(t,e.of([]),(function(t,r){return e.ap(e.map(t,(function(e){return function(t){return(0,n.zG)(e,l(t))}})),r)}))}},K=function(e){return function(t){return B(e.of([]),(function(r,o,i){return e.ap(e.map(o,(function(e){return function(t){return(0,n.zG)(e,l(t))}})),t(r,i))}))}},N=(s.ZN,s.Eh,s.pR);s.pJ,s.oR,i.oo,s.yW,s.j0,o.F4,i.w6,i.QI,i.Ss},6862:(e,t,r)=>{function n(e){return function(t,r){return function(n){return e.chain(n,(function(n){return e.map(r(n),(function(e){var r;return Object.assign({},n,((r={})[t]=e,r))}))}))}}}r.d(t,{a:()=>n})},5e3:(e,t,r)=>{r.d(t,{g1:()=>v,G5:()=>m,dO:()=>g,Pd:()=>E,ak:()=>j,tS:()=>y,g_:()=>C,ij:()=>q,DT:()=>D,fS:()=>T,pF:()=>x,nM:()=>S,tO:()=>M,t$:()=>a,UI:()=>p,Vn:()=>k,EQ:()=>O,F2:()=>u,LF:()=>A,i$:()=>G,Y3:()=>U});var n=r(6862),o=r(9384);function i(e){return function(t,r){return function(n){return e.fromEither(t(n)?o.F2(n):o.t$(r(n)))}}}var s=r(3735),a=(r(7341),o.t$),u=o.F2,c=function(e,t){return(0,s.zG)(e,p(t))},d=function(e,t){return(0,s.zG)(e,h(t))},l=function(e,t){return(0,s.zG)(e,y(t))},f="Either",p=function(e){return function(t){return S(t)?t:u(e(t.right))}},g={URI:f,map:c},_=u,h=function(e){return function(t){return S(t)?t:S(e)?e:u(t.right(e.right))}},m={URI:f,map:c,ap:d},v={URI:f,map:c,ap:d,of:_},b=function(e){return function(t){return S(t)?t:e(t.right)}},y=b,w={URI:f,map:c,ap:d,chain:l},E=function(e,t){return function(r){return S(r)?a(e(r.left)):u(t(r.right))}},k=function(e){return function(t){return S(t)?a(e(t.left)):t}},P={URI:f,fromEither:s.yR},D=i(P),S=o.nM,M=o.tO,I=function(e,t){return function(r){return S(r)?e(r.left):t(r.right)}},O=I,C=O,x=function(e){return function(t){return S(t)?e(t.left):t.right}},T=x,A=function(e){return S(e)?u(e.left):a(e.right)},q=function(e){return function(t){return null==t?a(e):u(t)}},U=function(e,t){try{return u(e())}catch(e){return a(t(e))}},G=I(s.yR,s.yR);o.F4;var j=(0,n.a)(w);o.Xl},4268:(e,t,r)=>{r.d(t,{Uz:()=>i,f7:()=>n,n_:()=>o,w4:()=>s});r(3735);var n=function(e){return{equals:function(t,r){return t===r||e(t,r)}}},o=function(e){return n((function(t,r){for(var n in e)if(!e[n].equals(t[n],r[n]))return!1;return!0}))},i=function(e){return function(t){return n((function(r,n){return t.equals(e(r),e(n))}))}},s={equals:function(e,t){return e===t}};s.equals},7341:(e,t,r)=>{function n(e,t){return function(r){return function(n){return e.map(n,(function(e){return t.map(e,r)}))}}}function o(e){return function(t,r){return function(n){return e.map(n,(function(e){var n;return Object.assign({},e,((n={})[t]=r(e),n))}))}}}r.d(t,{Hr:()=>o,UI:()=>n})},1885:(e,t,r)=>{r.d(t,{Ce:()=>d,Eh:()=>E,Im:()=>l,KB:()=>m,Od:()=>a,QI:()=>D,R3:()=>f,Ss:()=>S,dC:()=>u,jj:()=>g,lx:()=>w,nI:()=>h,of:()=>y,oo:()=>p,w6:()=>v,ws:()=>c});var n=r(3735),o=(r(7341),r(9384)),i=r(7241),s=function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},a=function(e){return e.length>0},u=function(e,t){return e<0||e>=t.length},c=function(e){return function(t){return s([e],t,!0)}},d=c,l=function(e){return function(t){return s(s([],t,!0),[e],!1)}},f=l,p=function(e,t,r){if(a(r)){var n=_(r);return n.splice(e,0,t),n}return[t]},g=function(e){return function(t){if(1===t.length)return b(t);for(var r=[k(t)],n=function(t){r.every((function(r){return!e.equals(r,t)}))&&r.push(t)},o=0,i=P(t);o<i.length;o++){n(i[o])}return r}},_=o.r1,h=function(e){return a(e)?o.G(e):o.YP},m=function(e){return function(t){for(var r=Math.max(0,Math.floor(t)),n=[e(0)],o=1;o<r;o++)n.push(e(o));return n}},v=function(e,t){return e<=t?m((function(t){return e+t}))(t-e+1):[e]};var b=_,y=function(e){return[e]};i.xP,i.Lx;var w=function(e){return function(t){var r=Math.max(1,e);return r>=t.length?[b(t),[]]:[(0,n.zG)(t.slice(1,r),d(k(t))),t.slice(r)]}},E=(i.u4,i.OE,i.nq,i.iw,i.YM,i.ZN,i.Eh),k=(o.F4,i.YM),P=function(e){return e.slice(1)};i.Z$,i.VV,i.Fp,i.j0;function D(e,t){return void 0===t?d(e):(0,n.zG)(t,d(e))}var S=function(e,t){return(0,n.zG)(e,f(t))};i.ur},6567:(e,t,r)=>{r.d(t,{DT:()=>a,DZ:()=>m,EQ:()=>E,Eh:()=>c,G:()=>s,UI:()=>l,Uo:()=>v,Wi:()=>y,Y3:()=>M,YP:()=>i,fS:()=>P,g_:()=>k,hX:()=>h,ij:()=>S,pC:()=>b,pR:()=>d,tS:()=>p,wp:()=>g,xH:()=>D});var n=r(3735),o=(r(7341),r(9384)),i=(r(6017),r(4870),r(5605),o.YP),s=o.G;function a(e){return function(t){return e(t)?s(t):i}}var u=function(e){return"Left"===e._tag?i:s(e.right)},c=function(e){return{equals:function(t,r){return t===r||(y(t)?y(r):!y(r)&&e.equals(t.value,r.value))}}},d=function(e){return{equals:c(e).equals,compare:function(t,r){return t===r?0:b(t)?b(r)?e.compare(t.value,r.value):1:-1}}},l=function(e){return function(t){return y(t)?i:s(e(t.value))}},f=s,p=function(e){return function(t){return y(t)?i:e(t.value)}},g=function(e){return function(t){return y(t)?e():t}},_=p(n.yR),h=function(e){return function(t){return y(t)?i:e(t.value)?t:i}},m=function(e){return function(t){return y(t)?i:e(t.value)}},v=u,b=o.pC,y=function(e){return"None"===e._tag},w=function(e,t){return function(r){return y(r)?e():t(r.value)}},E=w,k=E,P=function(e){return function(t){return y(t)?e():t.value}},D=_,S=function(e){return null==e?i:s(e)},M=function(e){try{return s(e())}catch(e){return i}};o.F4,o.Xl},7209:(e,t,r)=>{r.d(t,{Fp:()=>f,Uz:()=>a,VV:()=>l,Zt:()=>s,gf:()=>d,gt:()=>c,lt:()=>u,uZ:()=>p});var n=r(4268),o=r(3735),i=function(e){return function(t,r){return t===r||0===e(t,r)}},s=function(e){return{equals:i(e),compare:function(t,r){return t===r?0:e(t,r)}}},a=function(e){return function(t){return s((function(r,n){return t.compare(e(r),e(n))}))}},u=(o.W8,function(e){return function(t,r){return-1===e.compare(t,r)}}),c=function(e){return function(t,r){return 1===e.compare(t,r)}},d=function(e){return function(t,r){return-1!==e.compare(t,r)}},l=function(e){return function(t,r){return t===r||e.compare(t,r)<1?t:r}},f=function(e){return function(t,r){return t===r||e.compare(t,r)>-1?t:r}},p=function(e){var t=l(e),r=f(e);return function(e,n){return function(o){return r(t(o,n),e)}}};n.w4.equals},6017:(e,t,r)=>{r.d(t,{ff:()=>n,xD:()=>o});r(3735);var n=function(e){return function(t){return!e(t)}},o=function(e){return function(t){return function(r){return t(r)&&e(r)}}}},3328:(e,t,r)=>{r.d(t,{DZ:()=>U,Eh:()=>N,Eq:()=>M,Ew:()=>b,JO:()=>w,Lx:()=>z,OE:()=>B,Od:()=>f,P5:()=>_,Su:()=>T,UI:()=>x,YM:()=>h,Z$:()=>m,ZN:()=>K,bj:()=>P,cx:()=>v,f2:()=>y,hX:()=>A,hp:()=>k,iw:()=>$,j0:()=>J,kp:()=>S,nq:()=>W,oR:()=>Q,pJ:()=>Y,pR:()=>F,qr:()=>E,t9:()=>D,u4:()=>R,uK:()=>G,xH:()=>C,xP:()=>L,xb:()=>l,yW:()=>H});var n=r(4268),o=r(3735),i=(r(7341),r(9384)),s=r(4011),a=r(7209),u=r(7241),c=r(4870),d=(r(5605),function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}),l=function(e){return 0===e.length},f=u.Od;u.Ce,u.ws,u.R3,u.Im;var p=function(e,t){return function(r){return f(r)?t(r):e()}},g=u.dC;function _(e,t){return void 0===t?function(t){return _(e,t)}:g(e,t)?i.YP:i.G(t[e])}var h=function(e){return f(e)?i.G(u.YM(e)):i.YP},m=function(e){return f(e)?i.G(u.Z$(e)):i.YP};var v=function(e){return function(t){for(var r=0;r<t.length;r++)if(e(t[r]))return i.G(r);return i.YP}};function b(e){return function(t){for(var r=0;r<t.length;r++)if(e(t[r]))return i.G(t[r]);return i.YP}}var y=function(e){return function(t){for(var r=0;r<t.length;r++){var n=e(t[r]);if(i.pC(n))return n}return i.YP}};var w=function(e){return function(t){for(var r=t.length-1;r>=0;r--){var n=e(t[r]);if(i.pC(n))return n}return i.YP}},E=function(e){return function(t){for(var r=t.length-1;r>=0;r--)if(e(t[r]))return i.G(r);return i.YP}},k=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];"Right"===n._tag&&t.push(n.right)}return t},P=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];"Left"===n._tag&&t.push(n.left)}return t};function D(e){return function(t,r){if(void 0===r){var n=D(e);return function(e){return n(t,e)}}for(var o,i=0;i<r.length;i++)if(o=r[i],e.equals(o,t))return!0;return!1}}var S=function(e,t){return(0,o.zG)(e,Y(t))},M=function(e,t){return(0,o.zG)(e,Q(t))},I=u.of,O=function(e){return function(t){return(0,o.zG)(t,function(e){return function(t){if(l(t))return V;for(var r=[],n=0;n<t.length;n++)r.push.apply(r,e(n,t[n]));return r}}((function(t,r){return e(r)})))}},C=O(o.yR),x=function(e){return function(t){return t.map((function(t){return e(t)}))}},T=function(e){return function(t){return t.map((function(t,r){return e(r,t)}))}},A=function(e){return function(t){return t.filter(e)}},q=function(e){return function(t){for(var r=[],n=0;n<t.length;n++){var o=e(n,t[n]);i.pC(o)&&r.push(o.value)}return r}},U=function(e){return q((function(t,r){return e(r)}))},G=(o.yR,function(e){return j((function(t,r){return e(r)}))}),j=function(e){return function(t){for(var r=[],n=[],o=0;o<t.length;o++){var i=t[o];e(o,i)?n.push(i):r.push(i)}return(0,c.s4)(r,n)}},L=function(e){return function(t){return function(r){return r.reduce((function(r,n,o){return e.concat(r,t(o,n))}),e.empty)}}},R=function(e,t){return B(e,(function(e,r,n){return t(r,n)}))},z=function(e){var t=L(e);return function(e){return t((function(t,r){return e(r)}))}},B=function(e,t){return function(r){for(var n=r.length,o=e,i=0;i<n;i++)o=t(i,o,r[i]);return o}},W=function(e,t){return $(e,(function(e,r,n){return t(r,n)}))},$=function(e,t){return function(r){return r.reduceRight((function(e,r,n){return t(n,r,e)}),e)}},K=function(e){return{show:function(t){return"[".concat(t.map(e.show).join(", "),"]")}}},N=function(e){return(0,n.f7)((function(t,r){return t.length===r.length&&t.every((function(t,n){return e.equals(t,r[n])}))}))},F=function(e){return(0,a.Zt)((function(t,r){for(var n=t.length,o=r.length,i=Math.min(n,o),a=0;a<i;a++){var u=e.compare(t[a],r[a]);if(0!==u)return u}return s.Df.compare(n,o)}))},Y=function(e){return function(t){for(var r=d([],e(t),!0),n=[];r.length>0;){var o=r.shift();i.nM(o)?r.unshift.apply(r,e(o.left)):n.push(o.right)}return n}},Q=function(e){return function(t){var r=e(t),n=[],o=[];function s(t){i.nM(t)?e(t.left).forEach((function(e){return n.push(e)})):o.push(t.right)}for(var a=0,u=r;a<u.length;a++){s(u[a])}for(;n.length>0;)s(n.shift());return o}},V=(u.oo,u.cS);function H(e){return function(t){return t.every(e)}}var J=function(e){var t=u.j0(e);return function(r){return p((function(){return e.empty}),t(r))}};i.F4,u.w6,u.QI,u.Ss},7241:(e,t,r)=>{r.d(t,{R3:()=>m,Im:()=>h,ur:()=>B,QI:()=>$,cS:()=>l,Lx:()=>I,xP:()=>x,Eh:()=>U,ZN:()=>q,ru:()=>E,vM:()=>k,YM:()=>G,j0:()=>W,Od:()=>f,dC:()=>p,Z$:()=>L,Fp:()=>z,VV:()=>R,of:()=>S,Ce:()=>_,ws:()=>g,w6:()=>y,u4:()=>M,nq:()=>O,iw:()=>T,OE:()=>C,Ss:()=>K,oo:()=>v,Ri:()=>P});var n,o=r(4268),i=r(3735),s=(r(7341),r(9384)),a=r(7209),u=function(e){return{concat:a.VV(e)}},c=function(e){return{concat:a.Fp(e)}};n=void 0;var d=function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},l=s.Xl,f=s.Od,p=function(e,t){return e<0||e>=t.length},g=function(e){return function(t){return d([e],t,!0)}},_=g,h=function(e){return function(t){return d(d([],t,!0),[e],!1)}},m=h,v=function(e,t,r){if(f(r)){var n=s.r1(r);return n.splice(e,0,t),n}return[t]},b=function(e){return function(t){for(var r=Math.max(0,Math.floor(t)),n=[e(0)],o=1;o<r;o++)n.push(e(o));return n}},y=function(e,t){return e<=t?b((function(t){return e+t}))(t-e+1):[e]};function w(e,t){return t?e.concat(t):function(t){return t.concat(e)}}function E(e){return function(t){var r=t.length;if(0===r)return l;for(var n=[],o=t[0],i=[o],s=1;s<r;s++){var a=t[s];e.equals(a,o)?i.push(a):(n.push(i),i=[o=a])}return n.push(i),n}}var k=function(e){return function(t){for(var r={},n=0,o=t;n<o.length;n++){var i=o[n],a=e(i);s.e$.call(r,a)?r[a].push(i):r[a]=[i]}return r}};var P=function(e){for(var t=[e[0][0]],r=[e[0][1]],n=1;n<e.length;n++)t[n]=e[n][0],r[n]=e[n][1];return[t,r]},D=function(e){return function(t){for(var r=[e,t[0]],n=1;n<t.length;n++)r.push(e,t[n]);return r}},S=s.ri,M=function(e,t){return C(e,(function(e,r,n){return t(r,n)}))},I=function(e){return function(t){return function(r){return r.slice(1).reduce((function(r,n){return e.concat(r,t(n))}),t(r[0]))}}},O=function(e,t){return T(e,(function(e,r,n){return t(r,n)}))},C=function(e,t){return function(r){return r.reduce((function(e,r,n){return t(n,e,r)}),e)}},x=function(e){return function(t){return function(r){return r.slice(1).reduce((function(r,n,o){return e.concat(r,t(o+1,n))}),t(0,r[0]))}}},T=function(e,t){return function(r){return r.reduceRight((function(e,r,n){return t(n,r,e)}),e)}},A=s.YM,q=function(e){return{show:function(t){return"[".concat(t.map(e.show).join(", "),"]")}}},U=function(e){return(0,o.f7)((function(t,r){return t.length===r.length&&t.every((function(t,n){return e.equals(t,r[n])}))}))},G=(s.F4,A),j=s.Gb,L=function(e){return e[e.length-1]},R=function(e){var t=u(e);return function(e){return e.reduce(t.concat)}},z=function(e){var t=c(e);return function(e){return e.reduce(t.concat)}},B=function(e){return function(t){return t.reduce(e.concat)}},W=function(e){var t=B(e);return function(e){return(0,i.ls)(function(e){return function(t){var r=j(t);return f(r)?(0,i.zG)(r,D(e),_(G(t))):t}}(e),t)}};function $(e,t){return void 0===t?_(e):(0,i.zG)(t,_(e))}var K=function(e,t){return(0,i.zG)(e,w([t]))}},4923:(e,t,r)=>{r.d(t,{Bu:()=>h,CC:()=>L,DZ:()=>te,EW:()=>N,Eh:()=>de,G:()=>A,HA:()=>U,I8:()=>z,P5:()=>m,RF:()=>R,RJ:()=>W,SW:()=>Y,Su:()=>b,UI:()=>y,Ub:()=>V,V_:()=>K,XP:()=>l,Yz:()=>C,_Y:()=>$,_r:()=>S,dp:()=>u,dx:()=>g,e$:()=>_,hX:()=>ee,jt:()=>I,kp:()=>j,mK:()=>X,mS:()=>B,nn:()=>G,nr:()=>fe,nu:()=>F,oA:()=>ae,oh:()=>ue,qS:()=>J,ri:()=>P,sq:()=>x,t9:()=>q,tV:()=>ne,uK:()=>re,uZ:()=>le,vA:()=>H,vP:()=>D,xb:()=>c,yW:()=>T,z7:()=>O,zV:()=>Q});var n=r(4268),o=r(3735),i=r(9384),s=r(4870),a=r(2751),u=(r(5605),function(e){return Object.keys(e).length}),c=function(e){for(var t in e)if(i.e$.call(e,t))return!1;return!0},d=function(e){return function(t){return Object.keys(t).sort(e.compare)}},l=d(a.Df);function f(e){if("function"==typeof e)return f(a.Df)(e);var t=d(e);return function(e){return function(r){for(var n=[],o=0,i=t(r);o<i.length;o++){var s=i[o];n.push(e(s,r[s]))}return n}}}var p=f(a.Df)((function(e,t){return[e,t]}));var g=function(e,t){return function(r){if(i.e$.call(r,e)&&r[e]===t)return r;var n=Object.assign({},r);return n[e]=t,n}},_=function(e,t){return i.e$.call(t,e)};function h(e){return function(t,r){if(void 0===r){var n=h(e);return function(e){return n(e,t)}}for(var o in t)if(!i.e$.call(r,o)||!e.equals(t[o],r[o]))return!1;return!0}}function m(e,t){return void 0===t?function(t){return m(e,t)}:i.e$.call(t,e)?i.G(t[e]):i.YP}var v={};function b(e){return function(t){var r={};for(var n in t)i.e$.call(t,n)&&(r[n]=e(n,t[n]));return r}}function y(e){return b((function(t,r){return e(r)}))}function w(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(2===e.length)return w(a.Df).apply(void 0,e);var r=d(e[0]);return function(e,t){return function(n){for(var o=e,i=r(n),s=i.length,a=0;a<s;a++){var u=i[a];o=t(u,o,n[u])}return o}}}function E(e){if("compare"in e){var t=d(e);return function(e){return function(r){return function(n){for(var o=e.empty,i=t(n),s=i.length,a=0;a<s;a++){var u=i[a];o=e.concat(o,r(u,n[u]))}return o}}}}return E(a.Df)(e)}function k(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(2===e.length)return k(a.Df).apply(void 0,e);var r=d(e[0]);return function(e,t){return function(n){for(var o=e,i=r(n),s=i.length-1;s>=0;s--){var a=i[s];o=t(a,n[a],o)}return o}}}var P=function(e,t){var r;return(r={})[e]=t,r};function D(e){return X(a.Df)(e)}function S(e){return function(t){var r={},n={};for(var o in t)if(i.e$.call(t,o)){var a=e(o,t[o]);switch(a._tag){case"Left":r[o]=a.left;break;case"Right":n[o]=a.right}}return(0,s.s4)(r,n)}}function M(e){return function(t){var r={},n={};for(var o in t)if(i.e$.call(t,o)){var a=t[o];e(o,a)?n[o]=a:r[o]=a}return(0,s.s4)(r,n)}}function I(e){return function(t){var r={};for(var n in t)if(i.e$.call(t,n)){var o=e(n,t[n]);i.pC(o)&&(r[n]=o.value)}return r}}function O(e){return function(t){var r={},n=!1;for(var o in t)if(i.e$.call(t,o)){var s=t[o];e(o,s)?r[o]=s:n=!0}return n?r:t}}var C=p,x=function(e){for(var t={},r=0,n=e;r<n.length;r++){var o=n[r];t[o[0]]=o[1]}return t};function T(e){return function(t){for(var r in t)if(!e(t[r]))return!1;return!0}}function A(e){return function(t){for(var r in t)if(e(t[r]))return!0;return!1}}function q(e){return function(t,r){if(void 0===r){var n=q(e);return function(e){return n(t,e)}}for(var o in r)if(e.equals(r[o],t))return!0;return!1}}var U=function(e,t){return(0,o.zG)(e,y(t))},G=function(e,t){return(0,o.zG)(e,b(t))},j=function(e){var t=oe(e);return function(e,r,n){return(0,o.zG)(e,t(r,n))}},L=function(e){return function(t){var r=ie(e)(t);return function(e,t){return(0,o.zG)(e,r(t))}}},R=function(e){var t=se(e);return function(e,r,n){return(0,o.zG)(e,t(r,n))}},z=function(e,t){return(0,o.zG)(e,ee(t))},B=function(e,t){return(0,o.zG)(e,te(t))},W=function(e,t){return(0,o.zG)(e,re(t))},$=function(e,t){return(0,o.zG)(e,ne(t))},K=function(e){var t=w(e);return function(e,r,n){return(0,o.zG)(e,t(r,n))}},N=function(e){var t=E(e);return function(e){var r=t(e);return function(e,t){return(0,o.zG)(e,r(t))}}},F=function(e){var t=k(e);return function(e,r,n){return(0,o.zG)(e,t(r,n))}},Y=function(e,t){return(0,o.zG)(e,S(t))},Q=function(e,t){return(0,o.zG)(e,M(t))},V=function(e,t){return(0,o.zG)(e,I(t))},H=function(e,t){return(0,o.zG)(e,O(t))},J=function(e){var t=Z(e);return function(e){var r=t(e);return function(e,t){return r(e,(0,o.ls)(o.SK,t))}}},X=function(e){var t=J(e);return function(e){var r=t(e);return function(e){return r(e,o.yR)}}},Z=function(e){return function(t){var r=d(e);return function(e,n){var o=r(e);if(0===o.length)return t.of(v);for(var i=t.of({}),s=function(r){i=t.ap(t.map(i,(function(e){return function(t){var n;return Object.assign({},e,((n={})[r]=t,n))}})),n(r,e[r]))},a=0,u=o;a<u.length;a++){s(u[a])}return i}}},ee=function(e){return O((function(t,r){return e(r)}))},te=function(e){return I((function(t,r){return e(r)}))},re=function(e){return M((function(t,r){return e(r)}))},ne=function(e){return S((function(t,r){return e(r)}))};function oe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var r=w(e[0]);return function(e,t){return r(e,(function(e,r,n){return t(r,n)}))}}return oe(a.Df).apply(void 0,e)}function ie(e){if("compare"in e){var t=E(e);return function(e){var r=t(e);return function(e){return r((function(t,r){return e(r)}))}}}return ie(a.Df)(e)}function se(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var r=k(e[0]);return function(e,t){return r(e,(function(e,r,n){return t(r,n)}))}}return se(a.Df).apply(void 0,e)}var ae=function(e){var t={};for(var r in e)if(i.e$.call(e,r)){var n=e[r];i.pC(n)&&(t[r]=n.value)}return t},ue=function(e){var t={},r={};for(var n in e)if(i.e$.call(e,n)){var o=e[n];i.nM(o)?t[n]=o.left:r[n]=o.right}return(0,s.s4)(t,r)},ce="ReadonlyRecord";function de(e){var t=h(e);return(0,n.f7)((function(e,r){return t(e)(r)&&t(r)(e)}))}function le(e){return{concat:function(t,r){if(c(t))return r;if(c(r))return t;var n=Object.assign({},t);for(var o in r)i.e$.call(r,o)&&(n[o]=i.e$.call(t,o)?e.concat(t[o],r[o]):r[o]);return n},empty:v}}a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df;function fe(e,t){return i.e$.call(void 0===t?this:t,e)}a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df},7927:(e,t,r)=>{r.d(t,{UI:()=>c,XP:()=>a,dx:()=>u,hX:()=>y,xb:()=>i});var n=r(4923),o=r(2751),i=(r(5605),n.dp,n.xb),s=function(e){return function(t){return Object.keys(t).sort(e.compare)}},a=s(o.Df);var u=n.dx;n.e$;n.Bu,n.P5,n.Su;var c=n.UI;n.ri;function d(e){return n.vP(e)}n._r;n.jt;n.yW,n.G,n.t9;var l=n.HA,f=(n.nn,n.kp),p=n.CC,g=n.RF,_=(n.I8,n.mS,n.RJ,n._Y,n.V_),h=n.EW,m=n.nu,v=(n.SW,n.zV,n.Ub,n.vA,n.qS),b=(n.mK,function(e){return function(t){var r=s(e);return function(e,n){var o=r(e);if(0===o.length)return t.of({});for(var i=t.of({}),s=function(r){i=t.ap(t.map(i,(function(e){return function(t){return e[r]=t,e}})),n(r,e[r]))},a=0,u=o;a<u.length;a++){s(u[a])}return i}}}),y=n.hX;n.DZ,n.uK,n.tV;n.oA,n.oh;var w="Record";n.Eh,n.uZ,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,n.nr,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df,o.Df},2197:(e,t,r)=>{r.d(t,{ff:()=>n});var n=function(e){return function(t){return!e(t)}}},4870:(e,t,r)=>{r.d(t,{Pd:()=>o,s4:()=>n});r(3735);var n=function(e,t){return{left:e,right:t}},o=function(e,t){return function(r){return n(e(i(r)),t(s(r)))}},i=function(e){return e.left},s=function(e){return e.right}},5151:(e,t,r)=>{r.d(t,{Hi:()=>h,PM:()=>_,RD:()=>k,UA:()=>m,UI:()=>c,dO:()=>g,oE:()=>D,of:()=>l,pE:()=>P,tD:()=>i,tS:()=>f,uU:()=>E});var n=r(3735),o=(r(7341),r(9384)),i=function(e){return function(){return Promise.resolve().then(e)}};var s=function(e,t){return(0,n.zG)(e,c(t))},a=function(e,t){return(0,n.zG)(e,d(t))},u=function(e,t){return(0,n.zG)(e,f(t))},c=function(e){return function(t){return function(){return Promise.resolve().then(t).then(e)}}},d=function(e){return function(t){return function(){return Promise.all([Promise.resolve().then(t),Promise.resolve().then(e)]).then((function(e){return(0,e[0])(e[1])}))}}},l=function(e){return function(){return Promise.resolve(e)}},f=function(e){return function(t){return function(){return Promise.resolve().then(t).then((function(t){return e(t)()}))}}},p="Task";var g={URI:p,map:s},_={URI:p,of:l},h={URI:p,map:s,ap:a},m={URI:p,map:s,of:l,ap:a,chain:u},v=n.yR,b=(o.F4,l(o.Xl)),y=function(e){var t=function(e){return function(t){return function(){return Promise.all(t.map((function(t,r){return Promise.resolve().then((function(){return e(r,t)()}))})))}}}(e);return function(e){return o.Od(e)?t(e):b}},w=function(e){var t=function(e){return function(t){return function(){return o.Gb(t).reduce((function(t,r,n){return t.then((function(t){return Promise.resolve().then(e(n+1,r)).then((function(e){return t.push(e),t}))}))}),Promise.resolve().then(e(0,o.YM(t))).then(o.ri))}}}(e);return function(e){return o.Od(e)?t(e):b}},E=function(e){return y((function(t,r){return e(r)}))},k=E(n.yR),P=function(e){return w((function(t,r){return e(r)}))},D={URI:p,map:s,of:l,ap:a,chain:u,fromIO:i,fromTask:v}},6934:(e,t,r)=>{r.d(t,{Do:()=>J,ak:()=>X,tS:()=>Y,g_:()=>R,Uo:()=>j,t$:()=>A,UI:()=>K,Vn:()=>N,F2:()=>q,Y3:()=>z});var n=r(6862),o=r(1828),i=r(5e3),s=r(3735),a=r(7341);function u(e){return(0,s.ls)(i.F2,e.of)}function c(e){return(0,s.ls)(i.t$,e.of)}function d(e){return function(t){return e.map(t,i.F2)}}function l(e){return function(t){return e.map(t,i.t$)}}function f(e){return function(t){return(0,s.ls)(i.ij(t),e.of)}}function p(e){var t=f(e);return function(e){var r=t(e);return function(e){return(0,s.ls)(e,r)}}}function g(e){var t=m(e),r=p(e);return function(e){var n=r(e);return function(e){return t(n(e))}}}function _(e){return(0,a.UI)(e,i.dO)}function h(e){return(0,o.ap)(e,i.G5)}function m(e){return function(t){return function(r){return e.chain(r,(function(r){return i.nM(r)?e.of(r):t(r.right)}))}}}function v(e){return function(t){return function(r){return e.chain(r,(function(r){return i.nM(r)?t():e.of(r)}))}}}function b(e){return function(t,r){return function(n){return e.map(n,i.Pd(t,r))}}}function y(e){return function(t){return function(r){return e.map(r,i.Vn(t))}}}function w(e){return function(t,r){return function(n){return e.map(n,i.EQ(t,r))}}}function E(e){return function(t,r){return function(n){return e.chain(n,i.EQ(t,r))}}}function k(e){return function(t){return function(r){return e.chain(r,i.EQ(t,e.of))}}}function P(e){return function(t){return function(r){return e.chain(r,(function(r){return i.nM(r)?t(r.left):e.of(r)}))}}}function D(e){var t=P(e);return function(r){return t((function(t){return e.map(r(t),(function(e){return i.nM(e)?e:i.t$(t)}))}))}}function S(e){return function(t){return function(r){return e.chain(r,i.EQ((function(r){return e.map(t(r),i.t$)}),(function(t){return e.of(i.F2(t))})))}}}function M(e){return function(t){return e.map(t,i.LF)}}function I(e){return function(t){return e.map(t,i.i$)}}var O=r(9384),C=r(5151),x=function(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))},T=function(e,t){var r,n,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}},A=c(C.PM),q=u(C.PM),U=d(C.dO),G=l(C.dO),j=(C.tD,C.tD,C.of),L=(C.tD,C.dO,E(C.UA)),R=L,z=(C.UA,function(e,t){return function(){return x(void 0,void 0,void 0,(function(){var r;return T(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,e().then(O.F2)];case 1:return[2,n.sent()];case 2:return r=n.sent(),[2,O.t$(t(r))];case 3:return[2]}}))}))}}),B=(C.dO,C.PM,C.PM,C.UA,C.UA,C.UA,C.UA,C.dO,function(e,t){return(0,s.zG)(e,K(t))}),W=function(e,t){return(0,s.zG)(e,F(t))},$=function(e,t){return(0,s.zG)(e,Y(t))},K=_(C.dO),N=(C.dO,y(C.dO)),F=h(C.Hi),Y=m(C.UA),Q=(C.UA,q),V="TaskEither";var H={URI:V,map:B,ap:W,chain:$};var J=Q(O.F4),X=(0,n.a)(H);O.Xl},5605:(e,t,r)=>{function n(e,t){return function(r){var n=e.traverse(r);return function(e,o){return r.map(n(e,o),t.separate)}}}function o(e,t){return function(r){var n=e.traverse(r);return function(e,o){return r.map(n(e,o),t.compact)}}}r.d(t,{BL:()=>o,Fj:()=>n})},3735:(e,t,r)=>{r.d(t,{MZ:()=>o,Q1:()=>u,SK:()=>f,W8:()=>s,a9:()=>i,bc:()=>d,gn:()=>a,ls:()=>c,yR:()=>n,zG:()=>l});function n(e){return e}var o=n;function i(e){return function(){return e}}var s=i(!0),a=i(null),u=i(void 0);function c(e,t,r,n,o,i,s,a,u){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments))};case 3:return function(){return r(t(e.apply(this,arguments)))};case 4:return function(){return n(r(t(e.apply(this,arguments))))};case 5:return function(){return o(n(r(t(e.apply(this,arguments)))))};case 6:return function(){return i(o(n(r(t(e.apply(this,arguments))))))};case 7:return function(){return s(i(o(n(r(t(e.apply(this,arguments)))))))};case 8:return function(){return a(s(i(o(n(r(t(e.apply(this,arguments))))))))};case 9:return function(){return u(a(s(i(o(n(r(t(e.apply(this,arguments)))))))))}}}function d(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e}function l(e,t,r,n,o,i,s,a,u){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return r(t(e));case 4:return n(r(t(e)));case 5:return o(n(r(t(e))));case 6:return i(o(n(r(t(e)))));case 7:return s(i(o(n(r(t(e))))));case 8:return a(s(i(o(n(r(t(e)))))));case 9:return u(a(s(i(o(n(r(t(e))))))));default:for(var c=arguments[0],d=1;d<arguments.length;d++)c=arguments[d](c);return c}}var f=function(e,t){return t}},9384:(e,t,r)=>{r.d(t,{F2:()=>d,F4:()=>h,G:()=>s,Gb:()=>g,Od:()=>f,Xl:()=>_,YM:()=>p,YP:()=>i,e$:()=>m,nM:()=>a,pC:()=>o,r1:()=>v,ri:()=>l,t$:()=>c,tO:()=>u});var n=function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},o=function(e){return"Some"===e._tag},i={_tag:"None"},s=function(e){return{_tag:"Some",value:e}},a=function(e){return"Left"===e._tag},u=function(e){return"Right"===e._tag},c=function(e){return{_tag:"Left",left:e}},d=function(e){return{_tag:"Right",right:e}},l=function(e){return[e]},f=function(e){return e.length>0},p=function(e){return e[0]},g=function(e){return e.slice(1)},_=[],h={},m=Object.prototype.hasOwnProperty,v=function(e){return n([e[0]],e.slice(1),!0)}},4011:(e,t,r)=>{r.d(t,{Df:()=>o,Eq:()=>n});var n={equals:function(e,t){return e===t}},o={equals:n.equals,compare:function(e,t){return e<t?-1:e>t?1:0}};n.equals,o.compare},2751:(e,t,r)=>{r.d(t,{Df:()=>o,Eq:()=>n,pn:()=>s,xb:()=>i});var n={equals:function(e,t){return e===t}},o={equals:n.equals,compare:function(e,t){return e<t?-1:e>t?1:0}},i=function(e){return 0===e.length},s=function(e,t){return function(r){return r.endsWith(e,t)}}},655:(e,t,r)=>{r.d(t,{_T:()=>n,mG:()=>o});function n(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}function o(e,t,r,n){return new(r||(r=Promise))((function(o,i){function s(e){try{u(n.next(e))}catch(e){i(e)}}function a(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}u((n=n.apply(e,t||[])).next())}))}Object.create;Object.create},4386:(e,t,r)=>{r.d(t,{Z:()=>i});var n=r(477),o=r.n(n);function i(){return o()('/*! permutive-javascript-sdk v19.92.4 (web) (built 2023-07-06T19:05:15.115Z) */(()=>{"use strict";function r(r){return r instanceof Error?r:new Error("string"==typeof r?r:JSON.stringify(r))}const n=()=>({kind:"null",value:null}),t=r=>({kind:"string",value:r}),e=r=>({kind:"number",value:r}),o=r=>({kind:"array",value:r}),i=r=>({kind:"object",value:r}),u=r=>r,a=()=>({kind:"bottom"}),c=r=>({kind:"inner",a:r}),s=r=>({kind:"top",error:r}),l=r=>({kind:"unbounded",group:r}),f=(r,n)=>({kind:"windowed",key:n,group:r}),p=(r,n,t)=>({kind:"countLimit",n:t,limit:n,group:r}),d=(r,n,t)=>({kind:"uniqueLimit",n:t,limit:n,group:r}),m=r=>({kind:"numberGroup",group:r}),g=r=>({kind:"stringGroup",group:r}),y=r=>({kind:"tuple",tuple:r}),v=r=>({state:r}),_=(r,n)=>({commands:r,payload:n});function h(r){return r}function b(r){return function(){return r}}var k=b(void 0);function w(r,n,t,e,o,i,u,a,c){switch(arguments.length){case 1:return r;case 2:return function(){return n(r.apply(this,arguments))};case 3:return function(){return t(n(r.apply(this,arguments)))};case 4:return function(){return e(t(n(r.apply(this,arguments))))};case 5:return function(){return o(e(t(n(r.apply(this,arguments)))))};case 6:return function(){return i(o(e(t(n(r.apply(this,arguments))))))};case 7:return function(){return u(i(o(e(t(n(r.apply(this,arguments)))))))};case 8:return function(){return a(u(i(o(e(t(n(r.apply(this,arguments))))))))};case 9:return function(){return c(a(u(i(o(e(t(n(r.apply(this,arguments)))))))))}}}function q(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r}function A(r,n,t,e,o,i,u,a,c){switch(arguments.length){case 1:return r;case 2:return n(r);case 3:return t(n(r));case 4:return e(t(n(r)));case 5:return o(e(t(n(r))));case 6:return i(o(e(t(n(r)))));case 7:return u(i(o(e(t(n(r))))));case 8:return a(u(i(o(e(t(n(r)))))));case 9:return c(a(u(i(o(e(t(n(r))))))));default:for(var s=arguments[0],l=1;l<arguments.length;l++)s=arguments[l](s);return s}}var S=function(r){return{equals:function(n,t){return n===t||r(n,t)}}},j=function(r){return S((function(n,t){for(var e in r)if(!r[e].equals(n[e],t[e]))return!1;return!0}))},O=function(r){return function(n,t){return n===t||0===r(n,t)}},x=function(r){return{equals:O(r),compare:function(n,t){return n===t?0:r(n,t)}}},E=function(r){return function(n){return x((function(t,e){return n.compare(r(t),r(e))}))}},z=function(r){return function(n,t){return-1===r.compare(n,t)}},C=function(r){return function(n,t){return 1===r.compare(n,t)}},L=function(r){return function(n,t){return n===t||r.compare(n,t)>-1?n:t}};var N={equals:function(r,n){return r===n}},M={equals:N.equals,compare:function(r,n){return r<n?-1:r>n?1:0}};const P=(r,n)=>{switch(r.kind){case"bottom":return{kind:"bottom"};case"inner":return c(n(r.a));case"top":return s(r.error)}},T=r=>x(((n,t)=>{if("bottom"===n.kind&&"bottom"===t.kind)return 0;if("bottom"===n.kind)return-1;if("bottom"===t.kind)return 1;if("top"===n.kind&&"top"===t.kind)return M.compare(n.error,t.error);if("top"===n.kind)return 1;if("top"===t.kind)return-1;if("inner"===n.kind&&"inner"===t.kind)return r.compare(n.a,t.a);throw new Error("Non exhaustive match in extendedAlgebraOrd")}));var B=function(r,n,t){if(t||2===arguments.length)for(var e,o=0,i=n.length;o<i;o++)!e&&o in n||(e||(e=Array.prototype.slice.call(n,0,o)),e[o]=n[o]);return r.concat(e||Array.prototype.slice.call(n))},I=function(r){return"Some"===r._tag},V={_tag:"None"},D=function(r){return{_tag:"Some",value:r}},G=function(r){return"Left"===r._tag},R=(Object.prototype.hasOwnProperty,function(r){return B([r[0]],r.slice(1),!0)}),H=function(r){return function(n){return!r(n)}};var U=V,F=D;function J(r){return function(n){return r(n)?F(n):U}}var $=function(r){return"Left"===r._tag?U:F(r.right)},Q=function(r){return{equals:function(n,t){return n===t||(Z(n)?Z(t):!Z(t)&&r.equals(n.value,t.value))}}},Y=function(r){return{equals:Q(r).equals,compare:function(n,t){return n===t?0:X(n)?X(t)?r.compare(n.value,t.value):1:-1}}},W=function(r){return function(n){return Z(n)?U:F(r(n.value))}},K=$,X=I,Z=function(r){return"None"===r._tag},rr=function(r,n){return function(t){return Z(t)?r():n(t.value)}},nr=rr,tr=nr,er=function(r){return function(n){return Z(n)?r():n.value}};var or;or=void 0;var ir=function(r){return r[0]},ur=ir;var ar=function(r,n,t){if(t||2===arguments.length)for(var e,o=0,i=n.length;o<i;o++)!e&&o in n||(e||(e=Array.prototype.slice.call(n,0,o)),e[o]=n[o]);return r.concat(e||Array.prototype.slice.call(n))},cr=function(r){return r.length>0},sr=function(r,n){return r<0||r>=n.length},lr=function(r){return function(n){return ar([r],n,!0)}},fr=lr,pr=function(r){return function(n){return ar(ar([],n,!0),[r],!1)}},dr=pr,mr=R,gr=function(r){return cr(r)?D(r):V},yr=function(r){return function(n){for(var t=Math.max(0,Math.floor(n)),e=[r(0)],o=1;o<t;o++)e.push(r(o));return e}};var vr=mr;var _r=function(r){return function(n){var t=Math.max(1,r);return t>=n.length?[vr(n),[]]:[A(n.slice(1,t),fr(br(n))),n.slice(t)]}},hr=function(r){return S((function(n,t){return n.length===t.length&&n.every((function(n,e){return r.equals(n,t[e])}))}))},br=ur;var kr={equals:function(r,n){return r===n}},wr={equals:kr.equals,compare:function(r,n){return r<n?-1:r>n?1:0}};function qr(r){return function(n,t){if(void 0===t){var e=qr(r);return function(r){return e(n,r)}}for(var o,i=0;i<t.length;i++)if(o=t[i],r.equals(o,n))return!0;return!1}}var Ar=function(r,n){return function(t){for(var e=t.length,o=r,i=0;i<e;i++)o=n(i,o,t[i]);return o}};var Sr=function(r){return 0===r.length},jr=cr,Or=fr,xr=dr,Er=function(r,n){return r<=0?[]:yr(n)(r)};var zr=sr,Cr=function(r){return function(n){return zr(r,n)?Mr(n):n.slice(0,r)}};var Lr=function(r,n){for(var t=r.length,e=0;e<t&&n(r[e]);e++);return e};var Nr=function(r){return function(n){return r<=0||Sr(n)?Mr(n):r>=n.length?[]:n.slice(r,n.length)}};var Mr=function(r){return r.slice()},Pr=function(r){return Sr(r)?[]:r.slice().reverse()},Tr=function(r){return function(n){return n.length<=1?Mr(n):n.slice().sort(r.compare)}},Br=function(r,n,t){for(var e=[],o=Math.min(r.length,n.length),i=0;i<o;i++)e[i]=t(r[i],n[i]);return e};var Ir=qr,Vr=function(r){return function(n){return r>=1&&jr(n)?_r(r)(n):Sr(n)?[Mr(n),[]]:[[],Mr(n)]}};function Dr(r){var n=Ir(r);return function(t,e){if(void 0===e){var o=Dr(r);return function(r){return o(r,t)}}return t.filter((function(r){return!n(r,e)}))}}var Gr=function(r){return function(n){return A(n,function(r){return function(n){for(var t=[],e=0;e<n.length;e++)t.push.apply(t,r(e,n[e]));return t}}((function(n,t){return r(t)})))}},Rr=function(r){return function(n){for(var t=[],e=0;e<n.length;e++){var o=r(e,n[e]);I(o)&&t.push(o.value)}return t}},Hr=function(r){return Rr((function(n,t){return r(t)}))},Ur=Hr(h),Fr=Ar,Jr=function(r){var n=$r(r);return function(r){return n((function(n,t){return r(t)}))}},$r=function(r){return function(n){return Fr(r.of([]),(function(t,e,o){return r.ap(r.map(e,(function(r){return function(n){return A(r,xr(n))}})),n(t,o))}))}},Qr=function(r){return x((function(n,t){for(var e=n.length,o=t.length,i=Math.min(e,o),u=0;u<i;u++){var a=r.compare(n[u],t[u]);if(0!==a)return a}return wr.compare(e,o)}))},Yr=function(r){return{_tag:"Left",left:r}},Wr=function(r){return{_tag:"Right",right:r}},Kr=function(r,n){return A(r,rn(n))},Xr=function(r,n){return A(r,tn(n))},Zr="Either",rn=function(r){return function(n){return on(n)?n:Wr(r(n.right))}},nn=Wr,tn=function(r){return function(n){return on(n)?n:on(r)?r:Wr(n.right(r.right))}},en={URI:Zr,map:Kr,ap:Xr,of:nn},on=G,un=function(r){return function(n){return on(n)?r(n.left):n.right}},an=un,cn=function(r,n){try{return Wr(r())}catch(r){return Yr(n(r))}};var sn=function(r){return-1===r?1:1===r?-1:0};function ln(r,n){return Ur(r.map(n))}function fn(r,n,t,e){const o=(r,n)=>{if(0===r.length)return Ur(n.map((r=>F({1:r[1],2:t(U,F(r[2]))}))));if(0===n.length)return Ur(r.map((r=>F({1:r[1],2:t(F(r[2]),U)}))));if(r.length>0&&n.length>0&&z(e)(r[0][1],n[0][1])){const[e,...i]=r,u=e[1],a=e[2];return Or({1:u,2:t(F(a),U)})(o(i,n))}if(r.length>0&&n.length>0&&C(e)(r[0][1],n[0][1])){const[e,...i]=n,u=e[1],a=e[2];return Or({1:u,2:t(U,F(a))})(o(r,i))}if(r.length>0&&n.length>0){const[e,...i]=r,[u,...a]=n,c=e[1],s=e[2],l=u[2];return Or({1:c,2:t(F(s),F(l))})(o(i,a))}throw new Error("Non exhaustive match in mapOption2")},i=E((r=>r[1]))(e),u=(r=>{const n=ln(r,(r=>X(r[2])?F({1:r[1],2:r[2].value}):U));return 0===n.length?U:F(n)})(o(Tr(i)([...r].map((r=>({1:r[0],2:r[1]})))),Tr(i)([...n].map((r=>({1:r[0],2:r[1]}))))));return W((r=>new Map(r.map((r=>[r[1],r[2]])))))(u)}function pn(r,n,t,e){const o=E((r=>r[0]))(e),i=Tr(o)([...n]).reduceRight(((r,n)=>{if(on(r)){const e=t(n[1],r.left);return X(e)?Yr(e.value):Wr(n[0])}return r}),Yr(r));return K(i)}function dn(r,n){return new Map([...r].map(n))}function mn(r,n){return new Map([...r].filter(n))}function gn(r){return JSON.stringify(yn(r))}function yn(r){switch(r.kind){case"null":return hn.encode(r);case"string":return bn.encode(r);case"number":return kn.encode(r);case"array":return wn.encode(r);case"object":return qn.encode(r)}}function vn(r){return null===r?hn.decode(r):"number"==typeof r?kn.decode(r):"string"==typeof r?bn.decode(r):Array.isArray(r)?wn.decode(r):qn.decode(r)}const _n=(r,n)=>Yr(`Failed to decode. Input was ${JSON.stringify(r)}. Codec type was ${n}`),hn={encode:r=>null,decode:r=>null===r?Wr({kind:"null",value:null}):_n(r,"SimpleNull")},bn={encode:r=>r.value,decode:r=>"string"==typeof r?Wr(t(r)):_n(r,"SimpleString")},kn={encode:r=>r.value,decode:r=>"number"==typeof r?Wr(e(r)):_n(r,"SimpleNumber")},wn={encode:r=>r.value.map(yn),decode:r=>{if(Array.isArray(r)){const n=Jr(en)(vn)(r);return rn(o)(n)}return _n(r,"SimpleArray")}},qn={encode:r=>{const n=[...r.value.entries()];return Object.assign({},...Array.from(n,(([r,n])=>({[r]:yn(n)}))))},decode:r=>{if(r&&r.constructor===Object){const n=Jr(en)((([r,n])=>A(vn(n),rn((n=>q(r,n))))))(Object.entries(r));return rn((r=>i(new Map([...r]))))(n)}return _n(r,"SimpleObject")}};function An(r){return A(r,jn,W(gn),er((()=>"<encode error>")))}function Sn(r){return W(Ln)(function(r){switch(r.state.kind){case"top":return F(t(r.state.error));case"bottom":return U;case"inner":return jn(r.state.a)}}(r))}function jn(r){return function(r){switch(r.kind){case"numberGroup":case"stringGroup":return On(r.group);case"tuple":return r.tuple.length>0}}(r.payload)?F(o(function(r,n){const t=W((r=>Or(r)(n)))(r);return er((()=>n))(t)}(W((r=>t(function(r){const n=r=>{switch(r){case"add":return"p";case"mul":return"m";case"max":return"v";case"min":return"n"}},t=r=>1===r[2]?n(r[1]):n(r[1])+JSON.stringify(r[2]);return r.map(t).join("")}(r))))(r.commands),function(r){const n=r=>{switch(r.kind){case"bottom":return{kind:"null",value:null};case"top":return t(r.error);case"inner":return e(r.a)}},o=r=>ln([xn,En,r=>A(r,Cn,i,F)],(n=>n(r))),u=r=>ln([xn,zn,r=>A(r,Cn,(r=>dn(r,(([r,n])=>[JSON.stringify(r),n]))),i,F)],(n=>n(r)));switch(r.kind){case"tuple":return r.tuple.map(n);case"stringGroup":return o(r.group);case"numberGroup":return u(r.group)}}(r.payload)))):U}function On(r){switch(r.kind){case"unbounded":return r.group.size>0;case"windowed":return r.group.size>0||X(r.key);case"countLimit":case"uniqueLimit":return r.group.size>0||X(r.limit)}}function xn(r){switch(r.kind){case"unbounded":return U;case"windowed":return F(t("w"));case"countLimit":return F(t(1===r.n?"x":`x${r.n}`));case"uniqueLimit":return F(t(1===r.n?"u":`u${r.n}`))}}function En(r){switch(r.kind){case"unbounded":return U;case"windowed":return F(t(X(r.key)?r.key.value:""));case"countLimit":case"uniqueLimit":return F(t(X(r.limit)?r.limit.value:""))}}function zn(r){switch(r.kind){case"unbounded":return U;case"windowed":return X(r.key)?F(e(r.key.value)):F({kind:"null",value:null});case"countLimit":case"uniqueLimit":return X(r.limit)?F(e(r.limit.value)):F({kind:"null",value:null})}}function Cn(r){switch(r.kind){case"unbounded":case"windowed":case"countLimit":case"uniqueLimit":return r.group}}function Ln(r){switch(r.kind){case"array":return 0===r.value.length?{kind:"null",value:null}:1===r.value.length?Ln(r.value[0]):o(r.value.map(Ln));case"object":return A(mn(r.value,(([r,n])=>"null"!==n.kind)),(r=>dn(r,(r=>[r[0],Ln(r[1])]))),i);default:return r}}function Nn(r){const n=r=>{if(0===r.length)return{kind:"bottom"};const n=(r=>{if(4!==r.length)return U;const[n,t,e,o]=r;if("string"===n.kind&&"string"===t.kind&&"object"===o.kind){const r=J((r=>Mn(r[1].value)&&Pn(r[2].value)))({1:n,2:t});return W((r=>({prim:r[1].value,grp:r[2].value,cutoff:e,m:o.value})))(r)}return U})(r);if(X(n)){const{prim:r,grp:t,cutoff:e,m:o}=n.value,i=Tn(e,o,Bn(t));return"string"==typeof i?s(i):c(_(In(r),i))}const t=(r=>{if(3!==r.length)return U;const[n,t,e]=r;if("string"===n.kind&&"object"===e.kind){const r=J((r=>Pn(r.value)))(n);return W((r=>({grp:r.value,cutoff:t,m:e.value})))(r)}return U})(r);if(X(t)){const{grp:r,cutoff:n,m:e}=t.value,o=Tn(n,e,Bn(r));return"string"==typeof o?s(o):c(_(U,o))}const e=(r=>{if(2!==r.length)return U;const[n,t]=r;if("string"===n.kind&&"object"===t.kind){const r=J((r=>Mn(r.value)))(n);return W((r=>({prim:r.value,m:t.value})))(r)}return U})(r);if(X(e)){const{prim:r,m:n}=e.value;return c(_(In(r),g(l(n))))}const o=(r=>{if(1!==r.length)return U;const[n]=r;return"object"===n.kind?F({m:n.value}):U})(r);if(X(o)){const{m:r}=o.value;return c(_(U,g(l(r))))}const i=(r=>{if(r.length<1)return U;const[n,...t]=r;if("string"===n.kind){const r=J((r=>Mn(r.value)))(n);return W((r=>({prim:r.value,rest:t})))(r)}return U})(r);if(X(i)){const{prim:r,rest:n}=i.value;return c(_(In(r),Dn(n)))}return c(_(U,Dn(r)))},t=r=>"array"===r.kind?Gr(t)(r.value):[r];return"null"===r.kind?v({kind:"bottom"}):v(n(t(r)))}function Mn(r){const n=r.split("");if(!0==(0===n.length))return!1;{const[r,...t]=n;return-1!=="pmvn".indexOf(r)&&t.every((r=>-1!=="pmvn0123456789".indexOf(r)))}}function Pn(r){const n=r.split("");switch(!0){case 0===n.length:return!1;case"w"===n[0]&&void 0===n[1]:return!0;default:{const[r,...t]=n;return-1!=="ux".indexOf(r)&&-1===t.map((r=>!isNaN(parseInt(r)))).indexOf(!1)}}}function Tn(r,n,t){switch(r.kind){case"string":return g(t({1:F(r.value),2:n}));case"number":case"null":return m(t({1:"null"===r.kind?U:F(r.value),2:mn(dn(n,(([r,n])=>[Number(r),n])),(r=>!isNaN(r[0])))}));default:return"{bad cutoff}"}}function Bn(r){const n=r=>n=>d(n[2],n[1],r),t=r=>n=>p(n[2],n[1],r),e=r.split("");switch(!0){case"w"===e[0]&&void 0===e[1]:return r=>f(r[2],r[1]);case"u"===e[0]&&void 0===e[1]:return n(1);case"u"===e[0]&&void 0!==e[1]:return n(parseInt(e.slice(1).join("")));case"x"===e[0]&&void 0===e[1]:return t(1);case"x"===e[0]&&void 0!==e[1]:return t(parseInt(e.slice(1).join("")));default:throw new Error("This should never happen if you use isGroupCommand")}}function In(r){return W(u)(gr(Vn(r,(r=>{const n=r.split("");if(0===n.length)return U;const[t,...e]=n,o=(r=>{switch(r){case"p":return F("add");case"m":return F("mul");case"v":return F("max");case"n":return F("min");default:return U}})(t);return W((r=>{const{init:n,rest:t}=(o=r=>{return"number"==typeof(n=parseInt(r))&&isFinite(n)&&Math.floor(n)===n;var n},function(r){var n=Vr(Lr(r,o))(r);return{init:n[0],rest:n[1]}})(e);var o;return{1:{1:r,2:0===n.length?1:parseInt(n.join(""))},2:t.join("")}}))(o)}))))}function Vn(r,n){const t=n(r);return er((()=>[]))(W((r=>[r[1]].concat(Vn(r[2],n))))(t))}function Dn(r){return y(r.map(Gn))}function Gn(r){switch(r.kind){case"number":return c(r.value);case"string":return s(r.value);case"null":return{kind:"bottom"};case"object":return s("{object}");case"array":return s("{array}")}}const Rn={strategy:(r,n,t)=>e=>{if(Z(t))return n;if("delta"===r&&Z(n))return U;if(Z(n))return t;if(X(n)&&X(t))return e(n.value,t.value);throw new Error("Non exhaustive match in combineCommand.strategy")},operation:(r,n,t,e,o,i)=>{const u=Qr(T(i));if("append"===r&&"add"===n)return Br(t,e,Wn("append",o.plus));if("append"===r&&"mul"===n)return Br(t,e,Wn("append",o.times));if("append"===r&&"max"===n)return L(u)(t,e);if("join"===r&&"add"===n)return Br(t,e,Wn("join",L(i)));if("join"===r&&"mul"===n)return Br(t,e,Wn("join",L(i)));if("join"===r&&"max"===n)return L(u)(t,e);if("min"===n)return Rn.operation(r,"max",t,e,o,function(r){return x(((n,t)=>sn(r.compare(n,t))))}(i));if("delta"===r&&"max"===n)return C(u)(t,e)?t:e.map(a);if("delta"===r)return Br(t,e,((r,n)=>C(T(i))(r,n)?r:{kind:"bottom"}));throw new Error("Non exhaustive match in combineCommand.operation")},extend:(r,n,t,e)=>{if("delta"===r&&"top"===t.kind&&"top"===e.kind)return C(M)(t.error,e.error)?s(t.error):{kind:"bottom"};if("delta"===r&&"bottom"===e.kind)return t;if("delta"===r&&"bottom"===t.kind)return{kind:"bottom"};if("top"===t.kind&&"top"===e.kind)return s(L(M)(t.error,e.error));if("top"===t.kind)return t;if("top"===e.kind)return e;if("inner"===t.kind&&"inner"===e.kind)return n(t.a,e.a);if("bottom"===t.kind)return e;if("bottom"===e.kind)return t;throw new Error("Non exhaustive match in extend")}},Hn={plus:(r,n)=>r+n,times:(r,n)=>r*n};function Un(r,n,t,e){if("unbounded"===r.kind&&"unbounded"===n.kind){const o=r.group,i=n.group;return er(a)(W((r=>c(l(r))))(fn(o,i,t,e)))}if("windowed"===r.kind&&"windowed"===n.kind){const o=r.key,i=r.group,u=n.key,s=n.group,l=L(Y(e))(o,u);return er(a)(W((r=>c(f(r,l))))(fn(i,s,t,e)))}if("countLimit"===r.kind&&"countLimit"===n.kind){const o=r.n,i=n.n;if(o===i){const i=r.limit,u=r.group,s=n.limit,l=n.group,f=L(Y(e))(i,s);return er(a)(W((r=>c(p(r,f,o))))(fn(u,l,t,e)))}return s("Non matching counts")}if("uniqueLimit"===r.kind&&"uniqueLimit"===n.kind){const o=r.n,i=n.n;if(o===i){const i=r.limit,u=r.group,s=n.limit,l=n.group,f=L(Y(e))(i,s);return er(a)(W((r=>c(d(r,f,o))))(fn(u,l,t,e)))}return s("Non matching counts")}return s("Non matching group types")}function Fn(r,n,t,e,o,i){const u=(r,n)=>({1:Cr(r)(n).concat(Er(Math.max(0,r-n.length),a)),2:Nr(r)(n)}),c=(n,t,e)=>{if(0===n.length)return Rn.operation(r,"max",t,e,o,i);if(n.length>0){const[a,...s]=n,l=u(a[2],t),f=l[1],p=l[2],d=u(a[2],e),m=d[1],g=d[2];return Rn.operation(r,a[1],f,m,o,i).concat(c(s,p,g))}throw new Error("Non exhaustive match in recurse")};return Pr((s=r=>"bottom"===r.kind,function(r){return r.slice(Lr(r,s))})(Pr(c(n,t,e))));var s}function Jn(r,t,e){return er(n)($n(r,U)(t,e))}function $n(r,n){const t=n=>(t,e)=>Rn.strategy(r,t,e)($n(r,n)),e=(e,o)=>{if(Q(hr(j({1:N,2:kr}))).equals(e.commands,o.commands)){const i=((n,e,o)=>{if("stringGroup"===e.kind&&"stringGroup"===o.kind){const r=Un(e.group,o.group,t(n),M);return P(r,(r=>g(Yn(r,M))))}if("numberGroup"===e.kind&&"numberGroup"===o.kind){const r=Un(e.group,o.group,t(n),wr);return P(r,(r=>m(Yn(r,wr))))}if("tuple"===e.kind&&"tuple"===o.kind){const t=X(n)?n.value:[];return c(y(Fn(r,t,e.tuple,o.tuple,Hn,wr)))}throw new Error(`Non matching payload. Got ${e.kind} and ${o.kind}`)})(Z(e.commands)?n:e.commands,e.payload,o.payload);return P(i,(r=>_(e.commands,r)))}throw new Error(`Non matching primitive strings. Got ${An(e)} and ${An(o)}`)};return(n,t)=>Sn(v(Rn.extend(r,e,Nn(n).state,Nn(t).state)))}function Qn(r,n,t){const e=W((n=>mn(r,(([r,e])=>function(r){return function(n,t){return-1!==r.compare(n,t)}}(t)(r,n)))))(n);return er((()=>r))(e)}function Yn(r,n){switch(r.kind){case"unbounded":return r;case"windowed":return Z(r.key)?r:f(Qn(r.group,r.key,n),r.key);case"countLimit":{const t=r.limit,e=r.n,o=r.group,i=(r,n)=>n<=1?U:F(n-1),u=pn(e,o,i,n),a=L(Y(n))(t,u);return p(Qn(o,a,n),a,e)}case"uniqueLimit":{const t=r.limit,e=r.n,o=r.group,i=(r,n)=>{if("object"===r.kind){const t=[...r.value.keys(),...n.keys()],o=new Set(t);return o.size>=e?U:F(o)}return U},u=pn(new Set,o,i,n),a=L(Y(n))(t,u);return d(Qn(o,a,n),a,e)}}}function Wn(r,n){return(t,e)=>Rn.extend(r,((r,t)=>c(n(r,t))),t,e)}function Kn(r,n){return Jn("append",r,n)}function Xn(){for(var r=arguments.length,n=new Array(r),t=0;t<r;t++)n[t]=arguments[t];return n.reduce(((r,n)=>Object.assign(Object.assign({},r),n)),{})}H((function(r){return 0===r.length}));function Zn(r,n){const t=Object.keys(r),e=t.length,o={};for(let i=0;i<e;i++){const e=t[i],u=n(e,r[e]);X(u)&&(o[e]=u.value)}return o}const rt=r=>n=>{if("number"==typeof n)return n;if("string"==typeof n){const t=r(n);return Number.isNaN(t)?void 0:t}};rt(parseInt),rt(parseFloat);function nt(r){var n;return["SegmentEntry","SegmentExit"].includes(r.name)&&void 0!==(null===(n=r.properties)||void 0===n?void 0:n.segment_number)}const tt="process";let et=!1,ot=[],it=!1;const ut={};let at={getCurrentTime:()=>new Date,getCurrentSession:()=>"",getCurrentView:()=>"",getSegments:()=>({}),get1PSegments:()=>({}),get3PSegments:()=>({}),getSegmentsArray:()=>({}),getLookalikeModels:()=>({}),setSegmentActivation:()=>{}};const ct=()=>{const r=gt.concat(at.get1PSegments(),at.get3PSegments()),n=mt(r);at.getSegments=()=>r,at.getSegmentsArray=()=>n};function st(r,n,t,e,o,i,u){et=!1,ot=[],it=!1;const a=A(e.thirdPartydata,nr((()=>e.segments),(r=>gt.concat(e.segments,r)))),c=mt(a);at={getCurrentTime:()=>new Date,getCurrentSession:()=>e.sessionId,getCurrentView:()=>e.viewId,get1PSegments:()=>e.segments,get3PSegments:()=>A(e.thirdPartydata,er((()=>({})))),getSegments:()=>a,getSegmentsArray:()=>c,getLookalikeModels:()=>A(e.lookalikeModels,er((()=>({})))),setSegmentActivation:(r,n)=>{}},it=X(e.lookalikeModels),et=X(e.thirdPartydata);const s=Zn(n,((n,t)=>{var e;return(null===(e=r[n])||void 0===e?void 0:e.checksum)===t?U:F(((r,n)=>{const t=i[r].interpret(null,at);return Object.assign({checksum:n},!1===t.result?{}:{result:t})})(n,t))}));if(0===o.length)return{diff:Object.assign(Object.assign({},r),s),errors:[]};if(0===Object.keys(s).length)return{diff:r,errors:[]};{const e=ft(s,n,t,o,"bootstrap",i,u);return{diff:Object.assign(Object.assign({},r),e.diff),errors:e.errors}}}function lt(r,n,t,e,o,i){(r=>{const n=Object.assign({},r);delete n["1p"],at.get3PSegments=()=>n})(e),ct(),at.setSegmentActivation=dt(r,n),et=!0;const u=ft(r,n,t,ot.length>0?ot:[ut],"updateTPD",o,i);return ot=[],u}function ft(r,n,t,e,o,i,u){let a={diff:{},errors:[]};const c=e.length,s=()=>e.filter((r=>{return n=u["!UpdateLookalikeModels"]||[],nt(t=r)&&n.includes(t.properties.segment_number.toString());var n,t})).length===e.length?"lookalikeTransition":"transition",l=(r,n,t)=>"transition"===r?t===n-1?s():"event":r;for(let s=0;s<c;s++){const f=e[s],p=l(o,c,s),d=pt(Object.assign(Object.assign({},r),a.diff),n,t,f,p,i,u);a={diff:Object.assign(Object.assign({},a.diff),d.diff),errors:a.errors.concat(d.errors)}}return a}function pt(t,e,o,i,u,a,c){var s;"bootstrap"!==u&&(at.setSegmentActivation=dt(t,e));const l=n,f=(n,t)=>{const e=a[n],u=e.lift(i,at),c=w(vn,an(l)),s=c(t.state||null),f=c(u),p=A(cn((()=>Kn(s,f)),r),un((n=>{throw r(`Failed to append lifted event ${gn(f)} to internal state ${gn(s)}. Got ${n}`)}))),d=A(o[n],J(Boolean),W(c)),[m,g]=A(d,tr((()=>q(p,!1)),(r=>A(cn((()=>q(Kn(p,r),!1)),k),an((()=>q(p,!0))))))),y=yn(p),v=e.interpret(yn(m),at),_=t.activations||{};return Object.assign(Object.assign(Object.assign(Object.assign({checksum:t.checksum},null===y?{}:{state:y}),!1===v.result?{}:{result:v}),0===Object.keys(_).length?{}:{activations:_}),!1===g?{}:{dropExternalState:g})},p={diff:{},errors:[]},d=function(r,n,t,e,o){switch(r){case"event":const r=(null==o?void 0:o[e.name])||[];if(et)return r;{ot.push(e);const n=[...o["!UpdateSecondPartyData"]||[],...o["!UpdateThirdPartyData"]||[]];return Dr(N)(r,n)}case"lookalikeTransition":return(null==o?void 0:o[e.name])||[];case"transition":const i=(null==o?void 0:o[e.name])||[];if(it){const r=o["!UpdateLookalikeModels"]||[];return i.concat(r)}return i;case"bootstrap":const u=((null==o?void 0:o[e.name])||[]).filter((r=>void 0!==n[r]));return Dr(N)(u,[...et?[]:(o["!UpdateSecondPartyData"]||[]).concat(o["!UpdateThirdPartyData"]||[]),...it?[]:o["!UpdateLookalikeModels"]||[]]);case"updateExternalState":return Object.keys(t);case"updateLAL":return o["!UpdateLookalikeModels"]||[];case"updateTPD":return[...o["!UpdateSecondPartyData"]||[],...o["!UpdateThirdPartyData"]||[]];default:return[]}}(u,t,o,i,c),m=d.length;!function(r){nt(r)&&((r=>{const n=at.get1PSegments(),t={"1p":Object.assign(Object.assign({},n["1p"]),r["1p"])};at.get1PSegments=()=>t})({"1p":{[r.properties.segment_number]:"SegmentEntry"===r.name}}),ct())}(i);for(let r=0;r<m;r++){const n=d[r],o=t[n]||{checksum:e[n]};let i=o;try{i=f(n,o)}catch(r){p.errors.push(`Failed to interpret query ${n}. Got ${r}`)}i.dropExternalState&&(null!==(s=p.externalStateToDrop)&&void 0!==s||(p.externalStateToDrop={}),p.externalStateToDrop[n]=!0),p.diff[n]=i}return p}function dt(r,n){return(t,e,o)=>{if(!(o in r)){const t=n[o];if(void 0===t)throw new Error("Checksum not in internalStateMap");r[o]={checksum:t}}"activations"in r[o]||(r[o].activations={});const i=r[o].activations;t in i||(i[t]=[]);const u=i[t];u.includes(e)||(i[t]=[...u,e])}}function mt(r){return Object.keys(r).reduce(((n,t)=>{const e=Object.keys(r[t]),o=[];return e.forEach((n=>{!0===r[t][n]&&o.push(n)})),n[t]=o,n}),{})}const gt={empty:{},concat:(r,n)=>{const t=Object.assign({},r);for(const[r,e]of Object.entries(n))t[r]?t[r]=Xn(t[r],e):t[r]=e;return t}};const yt=(r,n)=>{const t=function(r){for(var t=arguments.length,e=new Array(t>1?t-1:0),o=1;o<t;o++)e[o-1]=arguments[o];return[r.stateMap,...r.payload,...e,n.rawQueries,n.queriesByEvent]};return"bootstrap"===r.type?st(...t(r)):"updateLAL"===r.type?function(r,n,t,e,o,i){return at.getLookalikeModels=()=>e,it=!0,pt(r,n,t,ut,"updateLAL",o,i)}(...t(r)):"updateTPD"===r.type?lt(...t(r)):"updateExternalState"===r.type?function(r,n,t,e,o){return pt(r,n,t,ut,"updateExternalState",e,o)}(...t(r)):r.type===tt?ft(...t(r,"event")):"processTransitions"===r.type?function(r,n,t,e,o,i){return ft(r,n,t,e,"transition",o,i)}(...t(r)):{diff:{},errors:[]}};const vt=function(){var r=this&&this.__assign||function(){return r=Object.assign||function(r){for(var n,t=1,e=arguments.length;t<e;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o]);return r},r.apply(this,arguments)},n=this&&this.__values||function(r){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&r[n],e=0;if(t)return t.call(r);if(r&&"number"==typeof r.length)return{next:function(){return r&&e>=r.length&&(r=void 0),{value:r&&r[e++],done:!r}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},t=this&&this.__read||function(r,n){var t="function"==typeof Symbol&&r[Symbol.iterator];if(!t)return r;var e,o,i=t.call(r),u=[];try{for(;(void 0===n||n-- >0)&&!(e=i.next()).done;)u.push(e.value)}catch(r){o={error:r}}finally{try{e&&!e.done&&(t=i.return)&&t.call(i)}finally{if(o)throw o.error}}return u},e=this&&this.__spreadArray||function(r,n,t){if(t||2===arguments.length)for(var e,o=0,i=n.length;o<i;o++)!e&&o in n||(e||(e=Array.prototype.slice.call(n,0,o)),e[o]=n[o]);return r.concat(e||Array.prototype.slice.call(n))},o=function(){function o(r){return"number"==typeof r?i[r]:r}function f(r){return"number"==typeof r?u[r]:r}function p(r){return"number"==typeof r?a[r]:r}function d(r){switch(r.length){case 0:return null;case 1:return r[0];default:return r}}function m(r,n,t){void 0===t&&(t=v);var e=p(n).reduce((function(r,n){return r&&null!=r[n]?r[n]:null}),r);return null===e?null:t(e)}function g(r,n){var t=p(n).slice();return t.unshift(r),t}function y(r,n,t){return void 0===t&&(t=v),m(r,g("properties",n),t)}var v=function(r){return r},_=function(r){return!0};function h(r,n){return function(t){for(var e=0;e<r.length;e++){if((r[e](t)||!1)===n)return n}return!n}}var b=function(r){return function(n){return!r(n)}},k=function(r,n){return function(t){return t>=r&&t<=n}},w=function(r){return new Date(r).getTime()},q=function(r){return m(r,["time"],w)},A=function(r,n){return m(n,r,w)},S=function(r,n,t,e,o,i){return function(u){var a=m(u,r,(function(r){return r.filter(e).map((function(r){return m(r,n)})).reduce(o,i)}));return t(null===a?i:a)}};function j(r,t,e,o){var i,u;try{for(var a=n(r),c=a.next();!c.done;c=a.next()){var s=c.value;if(e(s)&&t(s)===o)return o}}catch(r){i={error:r}}finally{try{c&&!c.done&&(u=a.return)&&u.call(a)}finally{if(i)throw i.error}}return!o}var O=function(r){return function(n){return("string"==typeof r||"number"==typeof r)&&"string"==typeof n&&n.toLowerCase().indexOf(f(r).toLowerCase())>-1}},x=function(r){return function(n){return null!=n&&Array.isArray(n)&&n.indexOf(r)>=0}};function E(r,n,t,e,o){var i=m(r.getSegments(),[n,t])||!1;return o&&(e||i)&&r.setSegmentActivation(n,t,o),i}function z(r,n,t){return m(r.getSegments(),[n,t])||!1}function C(r,n,e){return void 0===e&&(e=18e5),function(o){return{a:{m:function(r,n){return[n[0],o.a.m(null!=r[0]&&r[0][0]===n[0][0]?r[1]:o.a.z,n[1])]},z:[[],o.a.z]},p:function(t,e){return[[r(t)],m(e,n)===r(t)?o.p(t,e):o.a.z]},r:function(n,t){return o.r(n,0!==t[0].length&&t[0][0]===r(n)?t[1]:o.a.z)},d:o.d.sq||{l:function(i,u){var a=m(i,n),c=r(u);if(a!==c)return null;var s=o.d.l(i,u);if(!(Array.isArray(s)&&s.length>1))return null;var l=t(s),f=l[0],p=l.slice(1),d=+(q(i)||u.getCurrentTime()),g=Math.floor(d/e),y={};return y[g]={},y[g][c]=1===p.length?p[0]:p,[f,"u",null,y]},i:function(n,t){if(!Array.isArray(n)||"object"!=typeof n[3])return[[],o.a.z];var e=r(t),i=n[3];return[[e],Object.keys(i).map((function(r){return i[r][e]})).filter((function(r){return r})).map((function(r){return o.d.i([n[0]].concat(r))})).reduce(o.a.m,o.a.z)]}}}}}var L=C((function(r){return r.getCurrentSession()}),["session_id"],18e5),N=C((function(r){return r.getCurrentView()}),["view_id"],3e5);function M(r,n,i,u){return void 0===u&&(u=1),{a:{m:function(r,n){return r.concat(n).slice(-i)},z:[]},p:function(t,e){return m(e,["name"])===o(n)?[r.p(t,e)]:[]},r:function(n,t){return r.r(n,t.reduce((function(n,t){return r.a.m(n,t)}),r.a.z))},d:r.d.ftn||{l:function(n,t){var e,o=r.d.l(n,t),a=m(n,["time"],w)*u;return o&&[o[0],"x"+i,null,(e={},e[a]=2==o.length?o[1]:o.slice(1),e)]},i:function(n,o){return n?Object.keys(n[3]||{}).sort().reverse().map((function(r){return Array.isArray(r)?e([n[0]],t(n[3][r]),!1):[n[0],n[3][r]]})).map((function(n){return r.d.i(n,o)})):[]}}}}var P=function(r,n){return null===r?null==n?null:{b:n}:null==n?{a:r}:{a:r,b:n}},T=function(r,n){return r&&n?r(n):null},B=function(r,n,t){if(t&&t.result&&Array.isArray(t.result)){var e=T(r.d&&r.d.m,{result:t.result[0]}),o=T(n.d&&n.d.m,{result:t.result[1]});return P(e,o)}return null};function I(r,n){var t=c[r];if(!n||!t)return!1;if(!t.length)return!0;for(var e=0,o=!1,i=function(r){for(var n=[],t=0;t<r.length;++t){var e=r.charCodeAt(t);if(e>=55296&&e<=56319){var o=r.charCodeAt(t+1);if(o>=56320&&o<=57343){n.push(r.slice(t,t+2)),++t;continue}}n.push(r.charAt(t))}return n}(n.toLowerCase()),u=0;u<i.length;u++){for(var a=i[u];e>0&&!t[e][a];)e=t[e].su?t[e].su:0;if(t[e][a]&&(o=!!t[e=t[e][a]].te))break}return o}return{q:function(r){return{lift:function(n,t){return r.d.l(n,t)},interpret:function(n,t){return function(n,t){return{result:r.r(n,t)}}(t,r.d.i(n,t))},migrate:function(n){return n&&r.d.m?r.d.m(n):null},m:r.a.m,z:r.a.z,p:r.p,r:r.r,i:r.d.i}},a:function(r){return h(r,!1)},acq:function(r,n){return{p:function(t,e){return[r.p(t,e),n.p(t,e)]},r:function(t,e){return r.r(t,e[0])&&n.r(t,e[1])},a:{z:[r.a.z,n.a.z],m:function(t,e){return[r.a.m(t[0],e[0]),n.a.m(t[1],e[1])]}},d:{l:function(t,e){return P(r.d.l(t,e),n.d.l(t,e))},i:function(t,e){return t?[r.d.i(t.a||null,e),n.d.i(t.b||null,e)]:[r.a.z,n.a.z]},m:function(t){return B(r,n,t)}}}},acs:I,acs_:function(r,n){return function(t){return I(n,m(t,r))}},af_i:function(r,n,t){return void 0===t&&(t=_),function(e){return m(e,r,(function(r){return j(r,n,t,!1)}))&&!0}},af_l:function(r,n,t){return void 0===t&&(t=_),function(e){var o=m(e,r,(function(r){return r.filter(t).length}));return n(null===o?0:o)}},af_m:function(r,n,t,e){return void 0===e&&(e=_),function(o){var i=m(o,r,(function(r){return r.filter(e)}));return null===i||0===i.length?t(0):t(i.map((function(r){return m(r,n)})).reduce((function(r,n){return r+n}),0)/i.length)}},af_n:function(r,n,t,e){return void 0===e&&(e=_),S(r,n,t,e,(function(r,n){return Math.min(r,n)}),Number.POSITIVE_INFINITY)},af_p:function(r,n,t,e){return void 0===e&&(e=_),S(r,n,t,e,(function(r,n){return r*n}),1)},af_s:function(r,n,t,e){return void 0===e&&(e=_),S(r,n,t,e,(function(r,n){return r+n}),0)},af_u:function(r,n,t){return void 0===t&&(t=_),function(e){return m(e,r,(function(r){return j(r,n,t,!0)}))||!1}},af_x:function(r,n,t,e){return void 0===e&&(e=_),S(r,n,t,e,(function(r,n){return Math.max(r,n)}),Number.NEGATIVE_INFINITY)},as:function(r,n,t){var e=g("properties",n);return function(n){for(var o=m(n,e),i=t.length,u=!0,a=0;a<i;a++){var c=t[a];if(!(u=r(c)(o)))break}return u}},c:x,c_:function(r,n){return function(t){return x(n)(m(t,r))}},cl_:function(r,n){return function(t){return x(f(n))(m(t,r))}},cx:function(r){return function(n){return x(f(r))(n)}},ctu:function(r,n,t,e){return{a:e?{m:function(r,n){return r.filter((function(r){return-1===n.indexOf(r)})).concat(n).slice(-e)},z:[]}:{m:function(r,n){return r.filter((function(r){return-1===n.indexOf(r)})).concat(n)},z:[]},p:function(e,i){return m(i,["name"])===o(r)&&n(i)?m(i,t):[]},r:function(r,n){return n},d:{l:function(){return null},i:function(){return[]}}}},ctv:function(n,t,e,i){function u(r,n){var t,e=function(r){return{k:r.k,c:1+r.c}},o={arr:[],add:{k:n,c:1}};return n?(t=r.reduce((function(r,n){return r.add.k===n.k?{arr:r.arr,add:e(n)}:{arr:r.arr.concat(n),add:r.add}}),o)).arr.concat(t.add):r}return{a:i?{m:function(r,n){return u(r,n).slice(-i)},z:[]}:{m:function(r,n){return u(r,n)},z:[]},p:function(r,i){return m(i,["name"])===o(n)&&t(i)?m(i,e):null},r:function(n,t){return t.reduce((function(n,t){var e;return r(r({},n),((e={})[t.k]=t.c,e))}),{})},d:{l:function(r){return null},i:function(r){return[]}}}},ctw:function(r,n,t,e){return{a:e?{m:function(r,n){return r.concat(n).slice(-e)},z:[]}:{m:function(r,n){return r.concat(n)},z:[]},p:function(e,i){return m(i,["name"])===o(r)&&n(i)?m(i,t):[]},r:function(r,n){return n},d:{l:function(){return null},i:function(){return[]}}}},cw:function(r,n,t){return void 0===t&&(t=v),{a:{m:function(r,n){return r+n},z:0},p:function(t,e){return m(e,["name"])===o(r)&&n(e)?1:0},r:function(r,n){return t(n)},d:{l:function(t){return m(t,["name"])===o(r)&&n(t)?["p",1]:null},i:function(r){return r?Array.isArray(r)?r.slice(-1)[0]:r:0},m:function(r){return r&&r.result?["p",r.result]:null}}}},e:function(r){return function(n){return n===r}},e_:function(r,n){return function(t){return m(t,r)===n}},fm:function(r,n){return{p:n.p,r:function(t,e){return r(n.r(t,e))},a:n.a,d:n.d}},ftn:function(r,n,t){return{a:{m:function(r,n){return r.concat(n.slice(0,t-r.length))},z:[]},p:function(t,e){return m(e,["name"])===o(n)?[r.p(t,e)]:[]},r:function(n,t){return r.r(n,t.reduce((function(n,t){return r.a.m(n,t)}),r.a.z))},d:M(r,n,t,-1).d}},fw:function(r,n,t,e){return void 0===e&&(e=v),{a:{m:function(r,n){return null===r?n:r},z:null},p:function(e,i){return m(i,["name"])===o(r)&&n(i)?m(i,t):null},r:function(r,n){return n},d:{l:function(t){return m(t,["name"])===o(r)&&n(t)?["p",1]:null},i:function(r){return r?Array.isArray(r)?r.slice(-1)[0]:r:0},m:function(r){return r&&r.result?["p",r.result]:null}}}},g:function(r){return function(n){return n>r}},g_:function(r,n){return function(t){return m(t,r)>n}},gb:function(r,n,t){return{a:{m:function(t,e){var o=Object.keys(t).concat(Object.keys(e)).filter((function(r,n,t){return t.indexOf(r)===n})).sort((function(r,n){return Math.max(m(t,[n,1]),m(e,[n,1]))-Math.max(m(t,[r,1]),m(e,[r,1]))})).slice(0,n).reduce((function(n,o){var i=r.a.m(m(t,[o,0])||r.a.z,m(e,[o,0])||r.a.z);return n[o]=[i,Math.max(m(t,[o,1]),m(e,[o,1]))],n}),{});return o},z:{}},p:function(n,e){var o,i,u=m(e,g("properties",t)),a=r.p(n,e);return null==u||(null==(i=a)||"object"==typeof i&&0===Object.keys(i).length||i===r.a.z)?{}:((o={})[u]=[a,m(e,["time"],w)],o)},r:function(n,t){var e={};return Object.keys(t).forEach((function(o){return e[o]=r.r(n,t[o][0])})),e},d:{l:function(){return null},i:function(){return{}}}}},ge:function(r){return function(n){return n>=r}},ge_:function(r,n){return function(t){return m(t,r)>=n}},i_:v,ifp:function(r){return{a:{m:function(r,n){return n},z:null},p:function(r){return null},r:function(n,t){return function(n){return z(n,"1p",r)}(n)},d:{l:function(r,n){return null},i:function(r){return null}}}},isp:function(r,n,t,e){return{a:{m:function(r,n){return n},z:!1},p:function(t,e){return z(t,r,n)},r:function(o,i){return E(o,r,n,t,e)},d:{l:function(r,n){return null},i:function(r){return Array.isArray(r)&&(!!+r[2]||!1)}}}},itp:function(r,n,t,e){return{a:{m:function(r,n){return n},z:!1},p:function(t,e){return z(t,r,n)},r:function(o,i){return E(o,r,n,t,e)},d:{l:function(r,n){return null},i:function(r){return Array.isArray(r)&&(!!+r[2]||!1)}}}},k:m,l:function(r){return function(n){return n<r}},l_:function(r,n){return function(t){var e=m(t,r);return null!==e&&e<n}},le:function(r){return function(n){return n<=r}},le_:function(r,n){return function(t){var e=m(t,r);return null!==e&&e<=n}},lm:function(r,n){var t=function(n){return function(r,n,t){if(void 0===n[t])return NaN;var e=r||{};if(0==(e["1p"]||[]).length)return NaN;var o,i=n[t]||{},u=(i["1p"]||{}).const||0;return Object.keys(e).forEach((function(r){e[r].forEach((function(n){var t=(i[r]||{})[n]||0;u+=t}))})),o=u,1/(1+Math.pow(Math.E,-o))}(n.getSegmentsArray(),n.getLookalikeModels(),r)};return{a:{m:function(r,n){return n},z:null},p:function(r){return null},r:function(r,e){return n(t(r))},d:{l:function(r,n){return null},i:function(r){return null}}}},ltn:M,mnw:function(r,n,t,e){void 0===e&&(e=v);var i=Number.POSITIVE_INFINITY;return{a:{m:function(r,n){return r<n?r:n},z:i},p:function(e,u){return m(u,["name"])===o(r)&&n(u)?m(u,t):i},r:function(r,n){return e(n)},d:{l:function(e){return m(e,["name"])===o(r)&&n(e)?["n",m(e,t)]:null},i:function(r){return r?Array.isArray(r)?r.slice(-1)[0]:r:i}}}},mxw:function(r,n,t,e){void 0===e&&(e=v);var i=Number.NEGATIVE_INFINITY;return{a:{m:function(r,n){return r>n?r:n},z:i},p:function(e,u){return m(u,["name"])===o(r)&&n(u)?m(u,t):i},r:function(r,n){return e(n)},d:{l:function(e){return m(e,["name"])===o(r)&&n(e)?["v",m(e,t)]:null},i:function(r){return r?Array.isArray(r)?r.slice(-1)[0]:r:i}}}},n0:b(v),n:function(r){return function(n){return n!==r}},nt:b,n_:function(r,n){return function(t){return m(t,r)!==n}},o:function(r){return h(r,!0)},ocq:function(r,n){return{p:function(t,e){return[r.p(t,e),n.p(t,e)]},r:function(t,e){return r.r(t,e[0])||n.r(t,e[1])},a:{z:[r.a.z,n.a.z],m:function(t,e){return[r.a.m(t[0],e[0]),n.a.m(t[1],e[1])]}},d:{l:function(t,e){return P(r.d.l(t,e),n.d.l(t,e))},i:function(t,e){return t?[r.d.i(t.a||null,e),n.d.i(t.b||null,e)]:[r.a.z,n.a.z]},m:function(t){return B(r,n,t)}}}},oe:function(r){for(var n=Object.keys(r),t=n.length,e=new Array(t);t--;)e[t]=[n[t],r[n[t]]];return e},os:function(r,n,t){var e=g("properties",n);return function(n){for(var o=m(n,e),i=t.length,u=!1,a=0;a<i;a++){var c=t[a];if(u=r(c)(o))break}return u}},pacs:function(r,n){return function(t){return I(n,y(t,r))}},pb:function(r,n,t){return function(e){return k(n,t)(y(e,r))}},pc:function(r,n){return function(t){var e=y(t,r);return null!=e&&Array.isArray(e)&&e.indexOf(n)>=0}},pc_:function(r,n){return function(t){var e=y(t,r),o=f(n);return null!=e&&Array.isArray(e)&&e.indexOf(o)>=0}},pe:function(r,n){return function(t){return y(t,r)===n}},pg:function(r,n){return function(t){return y(t,r)>n}},pge:function(r,n){return function(t){return y(t,r)>=n}},pl:function(r,n){return function(t){var e=y(t,r);return null!==e&&e<n}},ple:function(r,n){return function(t){var e=y(t,r);return null!==e&&e<=n}},pn:function(r,n){return function(t){return y(t,r)!==n}},ps:function(r,n){return function(t){return O(n)(y(t,r))}},pw:function(r,n,t,e){return void 0===e&&(e=v),{a:{m:function(r,n){return r*n},z:1},p:function(e,i){return m(i,["name"])===o(r)&&n(i)?m(i,t):1},r:function(r,n){return e(n)},d:{l:function(e){return m(e,["name"])===o(r)&&n(e)?(i=m(e,t))>=1?["m2p",i]:i>0?["m2p",null,1/i]:0==i?["m2p",0]:i>-1?["m2p",null,1/i,1]:["m2p",i,null,1]:null;var i},i:function(r){return r?Array.isArray(r)?0===(n=r.slice(1))[0]?0:Math.pow(-1,n[2]||0)*(n[0]||1)/(n[1]||1):r:1;var n}}}},r:function(r){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];return l[r].apply(l,e([],t(n),!1))},ref:function(r){return function(n){return s[r](n)}},s:O,s_:function(r,n){return function(t){return O(n)(m(t,r))}},scq:function(r,n,t){return void 0===t&&(t=v),{p:function(t,e){return[r.p(t,e),n.p(t,e)]},r:function(e,o){return t(r.r(e,o[0])+n.r(e,o[1]))},a:{z:[r.a.z,n.a.z],m:function(t,e){return[r.a.m(t[0],e[0]),n.a.m(t[1],e[1])]}},d:{l:function(t,e){return P(r.d.l(t,e),n.d.l(t,e))},i:function(t,e){return t?[r.d.i(t.a||null,e),n.d.i(t.b||null,e)]:[r.a.z,n.a.z]},m:function(t){return B(r,n,t)}}}},sq:L,dscq:function(n,t,e,i){var u="x".concat(i),a=function(r){return r?2===r.length?["p",u,"",r[1]]:r:null},c=function(r){var e,i=function(r){return m(r,["session_id"])}(r);return i&&m(r,["name"])===o(n)&&t(r)?["p",u,"",(e={},e[i]=1,e)]:null};return{a:{m:function(n,t){var e=a(n),o=a(t);return e?o?["p",u,"",r(r({},e[3]),o[3])]:e:o},z:null},p:function(r,n){return c(n)},r:function(r,n){var t=n&&n[3]&&"object"==typeof n[3]?Object.keys(n[3]).length:0;return e(t)},d:{l:function(r,n){return c(r)},i:function(r,n){return a(r)}}}},sw:function(r,n,t,e){return void 0===e&&(e=v),{a:{m:function(r,n){return r+n},z:0},p:function(e,i){return m(i,["name"])===o(r)&&n(i)?m(i,t):0},r:function(r,n){return e(n)},d:{l:function(e){return function(t){return m(t,["name"])===o(r)&&n(t)}(e)?(i=m(e,t))<0?["p2",null,-i]:["p2",i]:null;var i},i:function(r){return r?Array.isArray(r)?((n="p2"===r[0]?r.slice(1):r)[0]||0)-(n[1]||0):r:0;var n}}}},t:_,tb:function(r,n){return function(t){return k(r,n)(q(t))}},te:function(r){return function(n){return q(n)===r}},te_:function(r,n){return function(t){return A(r,t)===n}},tg:function(r){return function(n){return q(n)>r}},tg_:function(r,n){return function(t){return A(r,t)>n}},tge:function(r){return function(n){return q(n)>=r}},tge_:function(r,n){return function(t){return A(r,t)>=n}},ti:w,tl:function(r){return function(n){return q(n)<r}},tl_:function(r,n){return function(t){return A(r,t)<n}},tle:function(r){return function(n){return q(n)<r}},tle_:function(r,n){return function(t){return A(r,t)<n}},tn:function(r){return function(n){return q(n)!==r}},tn_:function(r,n){return function(t){return A(r,t)!==n}},tw:function(r,n,o){var i=o||100,u=Math.ceil(n/i),a=function(r){return Math.floor(r/u)},c=function(r,t,e){var o;return[a(r.getTime()-n),(o={},o[a(t)]=e,o)]},s=function(n,t){var e=Math.max(n[0],t[0]),o=Object.keys(n[1]).filter((function(r){return r>=e})).concat(Object.keys(t[1]).filter((function(r){return r>=e}))).filter((function(r,n,t){return t.indexOf(r)===n})).reduce((function(e,o){var i=r.a.m(n[1][o]||r.a.z,t[1][o]||r.a.z);return i!==r.a.z&&(e[o]=i),e}),{});return[e,o]},l=[Number.NEGATIVE_INFINITY,{}],f=function(r){var n=function(n){return n.map((function(n){var e=t(n,3),o=e[0],i=(e[1],e[2]);return c(r.t,i,o)})).reduce(s,l)};return s(n(r.in),n(r.out))},p=function(n){if(void 0!==n.result)return p(n.result);if(void 0!==n.w)return p(f(n));var e=t(n,2),o=(e[0],e[1]),i=null,u={};for(var a in o){var c=r.d.m({result:o[a]});c&&Array.isArray(c)&&(i=c[0],u[a]=d(c.slice(1)))}return i&&[i,"w",n[0],u]};return{a:{m:function(r,n){var t=r.w?f(r):r;return s(t,n)},z:l},p:function(n,t){return c(n.getCurrentTime(),m(t,["time"],w),r.p(n,t))},r:function(n,t){var e=(t.w?f(t):t)[1];return r.r(n,Object.keys(e).reduce((function(n,t){return r.a.m(n,e[t])}),r.a.z))},d:r.d.tw||{l:function(n,o){var i=r.d.l(n,o),u=r.d.i(i,o);return i&&e([i[0],"w"],t(c(o.getCurrentTime(),m(n,["time"],w),u)),!1)},i:function(r,t){var e=Array.isArray(r)?r:[],o=t.getCurrentTime(),i=a(o.getTime()-n);return[e[2]||null,Object.keys(e[3]||{}).map((function(r){var n;return(n={})[r]=e[3][r],n})).reduce((function(r,n){return Object.keys(n).filter((function(r){return parseInt(r)>=i})).forEach((function(t){return r[t]=n[t]})),r}),{})]},m:r.d.m&&p}}},vgw:function(r,n,t,e){void 0===e&&(e=v);var i={v:0,k:0};return{a:{m:function(r,n){var t=r.k+n.k;return{v:t?r.v+n.k*(n.v-r.v)/t:0,k:t}},z:i},p:function(e,u){return m(u,["name"])===o(r)&&n(u)?{v:m(u,t),k:1}:i},r:function(r,n){return e(n.v)},d:{l:function(e){return m(e,["name"])===o(r)&&n(e)?0==(i=m(e,t))?["p3",1]:i<0?["p3",1,null,-i]:["p3",1,i]:null;var i},i:function(r){return r?Array.isArray(r)?{v:(((n=r.slice(1))[1]||0)-(n[2]||0))/(n[0]||1),k:n[0]||0}:void 0:i;var n}}}},vq:N,w:function(r){return function(n){return n===f(r)}},x:function(r){return function(n){return n!==f(r)}},y:function(r,n){return function(t){return y(t,r)===u[n]}},y_:function(r,n){return function(t){return m(t,r)===u[n]}},z:function(r,n){return function(t){return y(t,r)!==u[n]}},z_:function(r,n){return function(t){return m(t,r)!==u[n]}}}}(),i=["Pageview","PageviewComplete","SegmentEntry","PrebidBid","SlotClicked"],u=["canchallena","cine","teatro","espectaculos","propiedades","recetas","turismo","atletismo","lifestyle","personajes","polo","rugby","running","acuario","adopcion","ajedrez","al-volante","aries","automovilismo","basquetbol","boxeo","brinco","buenos-aires","campo","cancer","capricornio","carnes","carta-de-lectores","carta-de-suscriptores","casas-y-departamentos","catamarca","celiacos-sin-gluten","chaco","chubut","ciclismo","cocina","columnistas","comercio-exterior","construccion-y-diseno","cordoba","corrientes","danza","descanso","diversidad","dolar","dulces","electricos","empleos","ensaladas","entradas","entre-rios","entrevistas","equitacion","escorpio","esports","estadisticas","estilo-hola","faciles-y-rapidas","fitness","formosa","futbol","futsal","geminis","gimnasia","golf","guarniciones","hablemos-de-todo","hambre-de-futuro","handball","hockey","horoscopo-chino","horoscopo-chino-2022","horoscopo-chino-2023","industria","inmuebles-comerciales","inversiones","judo","juegos-olimpicos","jujuy","la-pampa","la-rioja","leo","libra","los-espectaculos","loto","mendoza","mente","miradas","misiones","moda","modal-video","motociclismo","mundo","musica","natacion","negocios","neuquen","nutricion","obra","ohlala-viaja","pelicula","piscis","platos-de-comida-principal","politica","pollo","postres","que-cocino","quini-6","quiniela-cordoba","quiniela-montevideo","quiniela-nacional","quiniela-plus","quiniela-poceada","quiniela-provincia","quiniela-santa-fe","racismo","radio","rio-negro","sagitario","sala","salta","san-juan","san-luis","santa-cruz","santa-fe","santiago-del-estero","series-de-tv","surf","tapas","tauro","telekino","television","tendencias","tenis","test-drive","tierra-del-fuego","tortas","tucuman","turf","ufc","veganas","vegetarianas","vela","viajes","vida_sana","virgo","?utm_source=google&utm_medium=cpc&utm_campaign=cortesypiquetes","?utm_source=google&utm_medium=cpc&utm_campaign=deportescanchallena","?utm_source=google&utm_medium=cpc&utm_campaign=elecciones2023","?utm_source=google&utm_medium=cpc&utm_campaign=feriado","?utm_source=google&utm_medium=cpc&utm_campaign=futbol","?utm_source=google&utm_medium=cpc&utm_campaign=horoscopo","?utm_source=google&utm_medium=cpc&utm_campaign=lasquinielas","?utm_source=google&utm_medium=cpc&utm_campaign=mundoboca","?utm_source=google&utm_medium=cpc&utm_campaign=mundoriver","?utm_source=google&utm_medium=cpc&utm_campaign=quinielas","?utm_source=google&utm_medium=cpc&utm_campaign=recetas","?utm_source=google&utm_medium=cpc&utm_campaign=searchquiniela","?utm_source=google&utm_medium=cpc&utm_campaign=superclasico","?utm_source=google&utm_medium=cpc&utm_campaign=telegram","?utm_source=google&utm_medium=cpc&utm_campaign=ultimasnoticias","economia","ADN-Cultura","Agencias","Arquitectura","Canal-Espectaculos","Cartas-de-Suscriptores","Ciencia","Construccion-y-Diseo","Contenidos-BLACK","Cultura","Data","Editoriales","Educacion","El-Mundo","El-resumen-del-dia","Electricos-e-Hibridos","Entrevistas-RS","Estados-Unidos","Feriados","Guia-Tech","Ideas","Inspiracion","LA-NACION-revista","LNcorre","Living","Lnmas","Newsletters","Nota-eliminada","OHLALA!-Moda","OHLALa!-Makers","OHLALa!-Viaja","Otros","Padel","Periodismo-de-Servicio","Qatar-al-dia","RS-Argentina","Remo","Resumen-De-Noticias","Revista-Brando","Revista-Jardin","Revista-Living","Revista-OHLALa!","Revistas","Sabado","Seguridad","Sociedad","Taekwondo","Transito","Ultimas-Noticias","Vida","Videos","Voley","autos","cartelera-de-cine","cartelera-de-teatro","clima","comunidad","deportes","herramientas","horoscopo","loterias","moda-y-belleza","opinion","revista-hola","revista-lugares","revista-ohlala","revista-rolling-stone","salud","stories","tecnologia","?utm_source=google&utm_medium=cpc&utm_campaign=Dolar1","?utm_source=google&utm_medium=cpc&utm_campaign=Dolar2","?utm_source=google&utm_medium=cpc&utm_campaign=Hotsale","?utm_source=google&utm_medium=cpc&utm_campaign=dolar1","?utm_source=google&utm_medium=cpc&utm_campaign=dolar2","?utm_source=google&utm_medium=cpc&utm_campaign=hotsale","Claro Argentina","Comunidad de Negocios","Emprendedores","Estados Unidos","Gastronoma","Inversiones","Movistar Argentina","Personal","Qu pasa en los negocios","Restaurantes","Restaurantes y Bares","Tarjeta Naranja","The Economist te lo explica","Vinos","mercadopago.com.ar"],a=[["article","section"],["client","url"],["client","referrer"],["label"],["article","authors"],["article","keywords"],["segment_number"],["advertiser_id"],["advertiser_name"],["user","suscribed"],["geo_info","country"],["isp_info","organization"]],c=[],s=[o.o([o.y(0,136),o.ps(1,136)]),o.o([o.y(0,144),o.ps(1,144)]),o.o([o.y(0,128),o.ps(1,128)]),o.o([o.y(0,24),o.ps(1,24)]),o.o([o.y(0,0),o.ps(1,0)]),o.o([o.y(0,8),o.ps(1,8)]),o.o([o.y(0,32),o.ps(1,32)]),o.o([o.y(0,40),o.ps(1,40)]),o.o([o.y(0,16),o.ps(1,16)]),o.o([o.y(0,120),o.ps(1,120)]),o.o([o.y(0,96),o.ps(1,96)]),o.o([o.y(0,104),o.ps(1,104)]),o.o([o.y(0,112),o.ps(1,112)]),o.o([o.y(0,72),o.ps(1,72)]),o.o([o.y(0,48),o.ps(1,48)]),o.o([o.y(0,56),o.ps(1,56)]),o.o([o.y(0,80),o.ps(1,80)]),o.o([o.y(0,88),o.ps(1,88)]),o.o([o.y(0,64),o.ps(1,64)]),o.o([o.y(0,139),o.ps(1,139)]),o.o([o.y(0,131),o.ps(1,131)]),o.o([o.y(0,27),o.ps(1,27)]),o.o([o.y(0,3),o.ps(1,3)]),o.o([o.y(0,134),o.ps(1,134)]),o.o([o.y(0,142),o.ps(1,142)]),o.o([o.y(0,11),o.ps(1,11)]),o.o([o.y(0,35),o.ps(1,35)]),o.o([o.y(0,43),o.ps(1,43)]),o.o([o.y(0,19),o.ps(1,19)]),o.o([o.y(0,118),o.ps(1,118)]),o.o([o.y(0,126),o.ps(1,126)]),o.o([o.y(0,123),o.ps(1,123)]),o.o([o.y(0,99),o.ps(1,99)]),o.o([o.y(0,107),o.ps(1,107)]),o.o([o.y(0,6),o.ps(1,6)]),o.o([o.y(0,14),o.ps(1,14)]),o.o([o.y(0,115),o.ps(1,115)]),o.o([o.y(0,75),o.ps(1,75)]),o.o([o.y(0,51),o.ps(1,51)]),o.o([o.y(0,59),o.ps(1,59)]),o.o([o.y(0,83),o.ps(1,83)]),o.o([o.y(0,91),o.ps(1,91)]),o.o([o.y(0,67),o.ps(1,67)]),o.o([o.y(0,94),o.ps(1,94)]),o.o([o.y(0,70),o.ps(1,70)]),o.o([o.y(0,78),o.ps(1,78)]),o.o([o.y(0,102),o.ps(1,102)]),o.o([o.y(0,110),o.ps(1,110)]),o.o([o.y(0,86),o.ps(1,86)]),o.o([o.y(0,46),o.ps(1,46)]),o.o([o.y(0,22),o.ps(1,22)]),o.o([o.y(0,30),o.ps(1,30)]),o.o([o.y(0,54),o.ps(1,54)]),o.o([o.y(0,62),o.ps(1,62)]),o.o([o.y(0,38),o.ps(1,38)]),o.o([o.y(0,133),o.ps(1,133)]),o.o([o.y(0,141),o.ps(1,141)]),o.o([o.y(0,117),o.ps(1,117)]),o.o([o.y(0,29),o.ps(1,29)]),o.o([o.y(0,5),o.ps(1,5)]),o.o([o.y(0,13),o.ps(1,13)]),o.o([o.y(0,85),o.ps(1,85)]),o.o([o.y(0,93),o.ps(1,93)]),o.o([o.y(0,69),o.ps(1,69)]),o.o([o.y(0,125),o.ps(1,125)]),o.o([o.y(0,101),o.ps(1,101)]),o.o([o.y(0,109),o.ps(1,109)]),o.o([o.y(0,37),o.ps(1,37)]),o.o([o.y(0,45),o.ps(1,45)]),o.o([o.y(0,21),o.ps(1,21)]),o.o([o.y(0,77),o.ps(1,77)]),o.o([o.y(0,53),o.ps(1,53)]),o.o([o.y(0,61),o.ps(1,61)]),o.o([o.y(0,140),o.ps(1,140)]),o.o([o.y(0,132),o.ps(1,132)]),o.o([o.y(0,28),o.ps(1,28)]),o.o([o.y(0,4),o.ps(1,4)]),o.o([o.y(0,12),o.ps(1,12)]),o.o([o.y(0,36),o.ps(1,36)]),o.o([o.y(0,44),o.ps(1,44)]),o.o([o.y(0,20),o.ps(1,20)]),o.o([o.y(0,124),o.ps(1,124)]),o.o([o.y(0,100),o.ps(1,100)]),o.o([o.y(0,108),o.ps(1,108)]),o.o([o.y(0,116),o.ps(1,116)]),o.o([o.y(0,76),o.ps(1,76)]),o.o([o.y(0,52),o.ps(1,52)]),o.o([o.y(0,60),o.ps(1,60)]),o.o([o.y(0,84),o.ps(1,84)]),o.o([o.y(0,92),o.ps(1,92)]),o.o([o.y(0,68),o.ps(1,68)]),o.o([o.y(0,143),o.ps(1,143)]),o.o([o.y(0,135),o.ps(1,135)]),o.o([o.y(0,130),o.ps(1,130)]),o.o([o.y(0,31),o.ps(1,31)]),o.o([o.y(0,138),o.ps(1,138)]),o.o([o.y(0,7),o.ps(1,7)]),o.o([o.y(0,15),o.ps(1,15)]),o.o([o.y(0,39),o.ps(1,39)]),o.o([o.y(0,47),o.ps(1,47)]),o.o([o.y(0,23),o.ps(1,23)]),o.o([o.y(0,114),o.ps(1,114)]),o.o([o.y(0,122),o.ps(1,122)]),o.o([o.y(0,127),o.ps(1,127)]),o.o([o.y(0,103),o.ps(1,103)]),o.o([o.y(0,111),o.ps(1,111)]),o.o([o.y(0,2),o.ps(1,2)]),o.o([o.y(0,10),o.ps(1,10)]),o.o([o.y(0,119),o.ps(1,119)]),o.o([o.y(0,79),o.ps(1,79)]),o.o([o.y(0,55),o.ps(1,55)]),o.o([o.y(0,63),o.ps(1,63)]),o.o([o.y(0,87),o.ps(1,87)]),o.o([o.y(0,95),o.ps(1,95)]),o.o([o.y(0,71),o.ps(1,71)]),o.o([o.y(0,90),o.ps(1,90)]),o.o([o.y(0,66),o.ps(1,66)]),o.o([o.y(0,74),o.ps(1,74)]),o.o([o.y(0,98),o.ps(1,98)]),o.o([o.y(0,106),o.ps(1,106)]),o.o([o.y(0,82),o.ps(1,82)]),o.o([o.y(0,42),o.ps(1,42)]),o.o([o.y(0,18),o.ps(1,18)]),o.o([o.y(0,26),o.ps(1,26)]),o.o([o.y(0,50),o.ps(1,50)]),o.o([o.y(0,58),o.ps(1,58)]),o.o([o.y(0,34),o.ps(1,34)]),o.o([o.y(0,129),o.ps(1,129)]),o.o([o.y(0,137),o.ps(1,137)]),o.o([o.y(0,145),o.ps(1,145)]),o.o([o.y(0,113),o.ps(1,113)]),o.o([o.y(0,121),o.ps(1,121)]),o.o([o.y(0,1),o.ps(1,1)]),o.o([o.y(0,9),o.ps(1,9)]),o.o([o.y(0,89),o.ps(1,89)]),o.o([o.y(0,65),o.ps(1,65)]),o.o([o.y(0,73),o.ps(1,73)]),o.o([o.y(0,97),o.ps(1,97)]),o.o([o.y(0,105),o.ps(1,105)]),o.o([o.y(0,81),o.ps(1,81)]),o.o([o.y(0,41),o.ps(1,41)]),o.o([o.y(0,17),o.ps(1,17)]),o.o([o.y(0,25),o.ps(1,25)]),o.o([o.y(0,49),o.ps(1,49)]),o.o([o.y(0,57),o.ps(1,57)]),o.o([o.y(0,33),o.ps(1,33)])],l=[(r,n,t,e,i,u,a,c,s,l,f,p,d,m,g,y,v,_,h,b)=>o.q(o.acq(o.cw(0,o.t,o.ge(1)),o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.isp("la_nacion_la_nacion_subscriptions",v,!1,_),o.isp("la_nacion_la_nacion_subscriptions",h,!1,b)),o.isp("la_nacion_la_nacion_subscriptions",g,!1,y)),o.isp("la_nacion_la_nacion_subscriptions",d,!1,m)),o.isp("la_nacion_la_nacion_subscriptions",f,!1,p)),o.isp("la_nacion_la_nacion_subscriptions",s,!1,l)),o.isp("la_nacion_la_nacion_subscriptions",a,!1,c)),o.isp("la_nacion_la_nacion_subscriptions",i,!1,u)),o.isp("la_nacion_la_nacion_subscriptions",t,!1,e)),o.isp("la_nacion_la_nacion_subscriptions",r,!1,n)))),(r,n)=>o.q(o.acq(o.cw(0,o.t,o.ge(1)),o.isp("la_nacion_la_nacion_subscriptions",r,!1,n))),(r,n,t,e,i)=>o.q(o.acq(o.ocq(o.cw(n,t,o.ge(1)),o.cw(e,i,o.ge(1))),r)),(r,n,t)=>o.q(o.cw(r,n,t)),(r,n,t,e)=>o.q(o.cw(r,o.os(n,t,e),o.ge(1))),(r,n,t)=>o.q(o.ocq(o.lm(r,o.ge(t)),o.ifp(n))),r=>o.q(o.sq(o.cw(0,r,o.ge(1)))),r=>o.q(o.tw(o.cw(0,o.os(o.cx,5,r),o.ge(1)),2592e6)),r=>o.q(o.tw(o.cw(0,o.ref(r),o.ge(1)),2592e6)),r=>o.q(o.tw(o.cw(0,o.ref(r),o.ge(2)),1296e6)),r=>o.q(o.tw(o.cw(0,o.ref(r),o.ge(3)),6048e5)),(r,n,t)=>o.q(o.tw(o.cw(0,o.o([o.os(o.w,0,n),r,o.af_u(["properties","classifications_watson","categories"],t)]),o.ge(1)),2592e6)),r=>o.q(o.tw(o.cw(0,o.ps(1,r),o.ge(1)),2592e6)),r=>o.q(o.tw(o.cw(0,o.ps(1,r),o.ge(2)),1296e6)),r=>o.q(o.tw(o.cw(0,o.ps(1,r),o.ge(3)),6048e5)),r=>o.q(o.vq(o.cw(0,r,o.ge(1)))),r=>o.q(o.vq(o.cw(0,o.os(o.s,r,[146,147,234,235,148,149,150,151,236,152,153,154,155,156,157,158,159,160]),o.ge(1)))),r=>o.q(o.vq(o.cw(0,o.pc_(4,r),o.ge(1)))),r=>o.q(o.vq(o.cw(0,o.pe(9,r),o.ge(1)))),(r,n)=>o.q(o.vq(o.cw(0,o.ps(r,n),o.ge(1))))];return{rawQueries:{139301:o.r(3,0,o.t,o.ge(1)),148080:o.r(15,o.a([o.pe(["user","loggedIn"],!0),o.pe(9,!0)])),149283:o.r(17,"Carlos Pagni"),149284:o.r(17,"Joaqun Morales Sol"),149285:o.r(17,"Jorge Fernndez Daz"),149287:o.r(17,"Hugo Alconada Mon"),149288:o.r(17,"Juan Carlos de Pablo"),149289:o.r(17,"Laura Di Marco"),149290:o.r(17,"Claudio Zuchovicki"),149291:o.r(17,"Ins Capdevila"),149292:o.r(17,"Carlos M. Reymundo Roberts"),149294:o.r(15,o.y(0,240)),149295:o.r(15,o.z(0,240)),149296:o.r(18,!0),149297:o.r(18,!1),149588:o.r(12,162),149590:o.r(12,163),149591:o.r(12,164),149592:o.r(12,165),149593:o.r(12,166),149594:o.r(12,167),149595:o.r(12,168),149596:o.r(12,169),149597:o.r(12,170),149598:o.r(12,171),149599:o.r(12,172),149600:o.r(12,173),149601:o.r(12,176),149602:o.r(12,174),149603:o.r(12,175),149604:o.r(12,177),149605:o.r(12,178),149606:o.r(12,179),149607:o.r(12,180),149608:o.r(12,181),149609:o.r(12,182),149610:o.r(12,183),149611:o.r(12,185),149612:o.r(12,184),149613:o.r(12,186),149614:o.r(12,187),149615:o.r(12,188),149616:o.r(12,190),149617:o.r(12,189),149618:o.r(12,191),149619:o.r(12,192),149621:o.r(12,193),149622:o.r(12,194),149623:o.r(12,195),149624:o.r(12,197),149625:o.r(12,198),149626:o.r(12,199),149627:o.r(12,200),149628:o.r(12,201),149629:o.r(12,202),149630:o.r(12,203),149631:o.r(12,196),149632:o.r(12,204),149633:o.r(12,205),149634:o.r(12,206),149635:o.r(12,207),149636:o.r(12,208),149637:o.r(12,209),149638:o.r(12,210),149639:o.r(12,211),149640:o.r(12,212),149709:o.r(13,162),149710:o.r(13,163),149711:o.r(13,164),149712:o.r(13,165),149713:o.r(13,166),149714:o.r(13,167),149715:o.r(13,168),149716:o.r(13,169),149717:o.r(13,170),149718:o.r(13,171),149719:o.r(13,172),149720:o.r(13,173),149721:o.r(13,176),149722:o.r(13,174),149723:o.r(13,175),149724:o.r(13,177),149725:o.r(13,178),149726:o.r(13,179),149727:o.r(13,180),149728:o.r(13,181),149729:o.r(13,182),149730:o.r(13,183),149731:o.r(13,185),149732:o.r(13,184),149733:o.r(13,186),149734:o.r(13,187),149735:o.r(13,188),149736:o.r(13,190),149737:o.r(13,189),149738:o.r(13,191),149739:o.r(13,192),149740:o.r(13,193),149741:o.r(13,194),149742:o.r(13,195),149743:o.r(13,197),149744:o.r(13,198),149745:o.r(13,199),149746:o.r(13,200),149747:o.r(13,201),149748:o.r(13,202),149749:o.r(13,203),149750:o.r(13,196),149751:o.r(13,204),149752:o.r(13,205),149753:o.r(13,206),149754:o.r(13,207),149755:o.r(13,208),149756:o.r(13,209),149757:o.r(13,210),149758:o.r(13,211),149759:o.r(13,212),149760:o.r(14,162),149761:o.r(14,163),149762:o.r(14,164),149763:o.r(14,165),149764:o.r(14,166),149765:o.r(14,167),149766:o.r(14,168),149767:o.r(14,169),149768:o.r(14,170),149769:o.r(14,171),149770:o.r(14,172),149771:o.r(14,173),149772:o.r(14,176),149773:o.r(14,174),149774:o.r(14,175),149775:o.r(14,177),149776:o.r(14,178),149777:o.r(14,179),149778:o.r(14,180),149779:o.r(14,181),149780:o.r(14,182),149781:o.r(14,183),149782:o.r(14,185),149783:o.r(14,184),149784:o.r(14,186),149785:o.r(14,187),149786:o.r(14,188),149787:o.r(14,190),149788:o.r(14,189),149789:o.r(14,191),149790:o.r(14,192),149791:o.r(14,193),149792:o.r(14,194),149793:o.r(14,195),149794:o.r(14,197),149795:o.r(14,198),149796:o.r(14,199),149797:o.r(14,200),149798:o.r(14,201),149799:o.r(14,202),149800:o.r(14,203),149801:o.r(14,196),149802:o.r(14,204),149803:o.r(14,205),149804:o.r(14,206),149805:o.r(14,207),149806:o.r(14,208),149807:o.r(14,209),149808:o.r(14,210),149809:o.r(14,211),149810:o.r(14,212),149811:o.r(12,213),149812:o.r(12,214),149813:o.r(12,215),149814:o.r(12,216),149815:o.r(12,217),149816:o.r(12,218),149817:o.r(12,161),149818:o.r(12,3),149819:o.r(12,219),149820:o.r(12,220),149821:o.r(12,221),149822:o.r(12,222),149823:o.r(12,223),149824:o.r(12,4),149825:o.r(12,5),149826:o.r(12,224),149827:o.r(12,225),149828:o.r(12,226),149829:o.r(12,227),149830:o.r(12,228),149831:o.r(12,229),149832:o.r(12,230),149833:o.r(12,6),149834:o.r(13,213),149835:o.r(13,214),149836:o.r(13,215),149837:o.r(13,216),149838:o.r(13,217),149839:o.r(13,218),149840:o.r(13,161),149841:o.r(13,3),149842:o.r(13,219),149843:o.r(13,220),149844:o.r(13,221),149845:o.r(13,222),149846:o.r(13,223),149847:o.r(13,4),149848:o.r(13,5),149849:o.r(13,224),149850:o.r(13,225),149851:o.r(13,226),149852:o.r(13,227),149853:o.r(13,228),149854:o.r(13,229),149855:o.r(13,230),149856:o.r(13,6),149857:o.r(14,213),149858:o.r(14,214),149859:o.r(14,215),149860:o.r(14,216),149861:o.r(14,217),149862:o.r(14,218),149863:o.r(14,161),149864:o.r(14,3),149865:o.r(14,219),149866:o.r(14,220),149867:o.r(14,221),149868:o.r(14,222),149869:o.r(14,223),149870:o.r(14,4),149871:o.r(14,5),149872:o.r(14,224),149873:o.r(14,225),149874:o.r(14,226),149875:o.r(14,227),149876:o.r(14,228),149877:o.r(14,229),149878:o.r(14,230),149879:o.r(14,6),149880:o.r(8,8),149881:o.r(8,49),149882:o.r(8,74),149883:o.r(8,23),149884:o.r(8,132),149885:o.r(8,82),149886:o.r(8,108),149887:o.r(8,118),149888:o.r(8,106),149889:o.r(8,50),149890:o.r(8,51),149891:o.r(8,6),149892:o.r(8,145),149893:o.r(8,98),149894:o.r(8,7),149895:o.r(8,124),149896:o.r(8,39),149897:o.r(8,45),149898:o.r(8,109),149899:o.r(8,16),149900:o.r(8,61),149901:o.r(8,17),149902:o.r(8,10),149903:o.r(8,57),149904:o.r(8,9),149905:o.r(8,131),149906:o.r(8,102),149907:o.r(8,31),149908:o.r(8,81),149909:o.r(8,64),149910:o.r(8,92),149911:o.r(8,128),149912:o.r(8,35),149913:o.r(8,27),149914:o.r(8,116),149915:o.r(8,42),149916:o.r(8,36),149917:o.r(8,97),149918:o.r(8,96),149919:o.r(8,122),149920:o.r(8,28),149921:o.r(8,80),149922:o.r(8,4),149923:o.r(8,126),149924:o.r(8,86),149925:o.r(8,110),149926:o.r(8,87),149927:o.r(8,72),149928:o.r(8,111),149929:o.r(8,18),149930:o.r(8,90),149931:o.r(8,63),149932:o.r(8,85),149933:o.r(8,70),149934:o.r(8,41),149935:o.r(8,43),149936:o.r(8,107),149937:o.r(8,25),149938:o.r(8,77),149939:o.r(8,103),149940:o.r(8,55),149941:o.r(8,95),149942:o.r(8,19),149943:o.r(8,24),149944:o.r(8,100),149945:o.r(8,67),149946:o.r(8,79),149947:o.r(8,99),149948:o.r(8,136),149949:o.r(8,113),149950:o.r(8,132),149951:o.r(8,140),149952:o.r(8,62),149953:o.r(8,133),149954:o.r(8,84),149955:o.r(8,30),149956:o.r(8,106),149957:o.r(8,20),149958:o.r(8,115),149959:o.r(8,60),149960:o.r(8,141),149961:o.r(8,3),149962:o.r(8,142),149963:o.r(8,71),149964:o.r(8,53),149965:o.r(8,114),149966:o.r(8,13),149967:o.r(8,139),149968:o.r(8,120),149969:o.r(8,65),149970:o.r(8,29),149971:o.r(8,127),149972:o.r(8,129),149973:o.r(8,44),149974:o.r(8,69),149975:o.r(8,88),149976:o.r(8,33),149977:o.r(8,83),149978:o.r(8,66),149979:o.r(8,47),149980:o.r(8,105),149981:o.r(8,12),149982:o.r(8,130),149983:o.r(8,101),149984:o.r(8,93),149985:o.r(8,134),149986:o.r(8,21),149987:o.r(8,75),149988:o.r(8,78),149989:o.r(8,112),149990:o.r(8,58),149991:o.r(8,54),149992:o.r(8,117),149993:o.r(8,37),149994:o.r(8,123),149995:o.r(8,94),149996:o.r(8,26),149997:o.r(8,68),149998:o.r(8,14),149999:o.r(8,143),15e4:o.r(8,144),150001:o.r(8,135),150002:o.r(8,46),150003:o.r(8,11),150004:o.r(8,138),150005:o.r(8,119),150006:o.r(8,0),150007:o.r(8,73),150008:o.r(8,56),150009:o.r(8,15),150010:o.r(8,2),150011:o.r(8,32),150012:o.r(8,38),150013:o.r(8,121),150014:o.r(8,125),150015:o.r(8,48),150016:o.r(8,137),150017:o.r(8,1),150018:o.r(8,4),150019:o.r(8,22),150020:o.r(8,5),150021:o.r(8,40),150022:o.r(8,89),150023:o.r(8,104),150024:o.r(8,76),150025:o.r(8,59),150026:o.r(8,34),150027:o.r(8,52),150028:o.r(8,91),150029:o.r(9,8),150030:o.r(9,49),150031:o.r(9,74),150032:o.r(9,23),150033:o.r(9,132),150034:o.r(9,82),150035:o.r(9,108),150036:o.r(9,118),150037:o.r(9,106),150038:o.r(9,50),150039:o.r(9,51),150040:o.r(9,6),150041:o.r(9,145),150042:o.r(9,98),150043:o.r(9,7),150044:o.r(9,124),150045:o.r(9,39),150046:o.r(9,45),150047:o.r(9,109),150048:o.r(9,16),150049:o.r(9,61),150050:o.r(9,17),150051:o.r(9,10),150052:o.r(9,57),150053:o.r(9,9),150054:o.r(9,131),150055:o.r(9,102),150056:o.r(9,31),150057:o.r(9,81),150058:o.r(9,64),150059:o.r(9,92),150060:o.r(9,128),150061:o.r(9,35),150062:o.r(9,27),150063:o.r(9,116),150064:o.r(9,42),150065:o.r(9,36),150066:o.r(9,97),150067:o.r(9,96),150068:o.r(9,122),150069:o.r(9,28),150070:o.r(9,80),150071:o.r(9,4),150072:o.r(9,126),150073:o.r(9,86),150074:o.r(9,110),150075:o.r(9,87),150076:o.r(9,72),150077:o.r(9,111),150078:o.r(9,18),150079:o.r(9,90),150080:o.r(9,63),150081:o.r(9,85),150082:o.r(9,70),150083:o.r(9,41),150084:o.r(9,43),150085:o.r(9,107),150086:o.r(9,25),150087:o.r(9,77),150088:o.r(9,103),150089:o.r(9,55),150090:o.r(9,95),150091:o.r(9,19),150092:o.r(9,24),150093:o.r(9,100),150094:o.r(9,67),150095:o.r(9,79),150096:o.r(9,99),150097:o.r(9,136),150098:o.r(9,113),150099:o.r(9,132),150100:o.r(9,140),150101:o.r(9,62),150102:o.r(9,133),150103:o.r(9,84),150104:o.r(9,30),150105:o.r(9,106),150106:o.r(9,20),150107:o.r(9,115),150108:o.r(9,60),150109:o.r(9,141),150110:o.r(9,3),150111:o.r(9,142),150112:o.r(9,71),150113:o.r(9,53),150114:o.r(9,114),150115:o.r(9,13),150116:o.r(9,139),150117:o.r(9,120),150118:o.r(9,65),150119:o.r(9,29),150120:o.r(9,127),150121:o.r(9,129),150122:o.r(9,44),150123:o.r(9,69),150124:o.r(9,88),150125:o.r(9,33),150126:o.r(9,83),150127:o.r(9,66),150128:o.r(9,47),150129:o.r(9,105),150130:o.r(9,12),150131:o.r(9,130),150132:o.r(9,101),150133:o.r(9,93),150134:o.r(9,134),150135:o.r(9,21),150136:o.r(9,75),150137:o.r(9,78),150138:o.r(9,112),150139:o.r(9,58),150140:o.r(9,54),150141:o.r(9,117),150142:o.r(9,37),150143:o.r(9,123),150144:o.r(9,94),150145:o.r(9,26),150146:o.r(9,68),150147:o.r(9,14),150148:o.r(9,143),150149:o.r(9,144),150150:o.r(9,135),150151:o.r(9,46),150152:o.r(9,11),150153:o.r(9,138),150154:o.r(9,119),150155:o.r(9,0),150156:o.r(9,73),150157:o.r(9,56),150158:o.r(9,15),150159:o.r(9,2),150160:o.r(9,32),150161:o.r(9,38),150162:o.r(9,121),150163:o.r(9,125),150164:o.r(9,48),150165:o.r(9,137),150166:o.r(9,1),150167:o.r(9,4),150168:o.r(9,22),150169:o.r(9,5),150170:o.r(9,40),150171:o.r(9,89),150172:o.r(9,104),150173:o.r(9,76),150174:o.r(9,59),150175:o.r(9,34),150176:o.r(9,52),150177:o.r(9,91),150178:o.r(10,8),150179:o.r(10,49),150180:o.r(10,74),150181:o.r(10,23),150182:o.r(10,132),150183:o.r(10,82),150184:o.r(10,108),150185:o.r(10,118),150186:o.r(10,106),150187:o.r(10,50),150188:o.r(10,51),150189:o.r(10,6),150190:o.r(10,145),150191:o.r(10,98),150192:o.r(10,7),150193:o.r(10,124),150194:o.r(10,39),150195:o.r(10,45),150196:o.r(10,109),150197:o.r(10,16),150198:o.r(10,61),150199:o.r(10,17),150200:o.r(10,10),150201:o.r(10,57),150202:o.r(10,9),150203:o.r(10,131),150204:o.r(10,102),150205:o.r(10,31),150206:o.r(10,81),150207:o.r(10,64),150208:o.r(10,92),150209:o.r(10,128),150210:o.r(10,35),150211:o.r(10,27),150212:o.r(10,116),150213:o.r(10,42),150214:o.r(10,36),150215:o.r(10,97),150216:o.r(10,96),150217:o.r(10,122),150218:o.r(10,28),150219:o.r(10,80),150220:o.r(10,4),150221:o.r(10,126),150222:o.r(10,86),150223:o.r(10,110),150224:o.r(10,87),150225:o.r(10,72),150226:o.r(10,111),150227:o.r(10,18),150228:o.r(10,90),150229:o.r(10,63),150230:o.r(10,85),150231:o.r(10,70),150232:o.r(10,41),150233:o.r(10,43),150234:o.r(10,107),150235:o.r(10,25),150236:o.r(10,77),150237:o.r(10,103),150238:o.r(10,55),150239:o.r(10,95),150240:o.r(10,19),150241:o.r(10,24),150242:o.r(10,100),150243:o.r(10,67),150244:o.r(10,79),150245:o.r(10,99),150246:o.r(10,136),150247:o.r(10,113),150248:o.r(10,132),150249:o.r(10,140),150250:o.r(10,62),150251:o.r(10,133),150252:o.r(10,84),150253:o.r(10,30),150254:o.r(10,106),150255:o.r(10,20),150256:o.r(10,115),150257:o.r(10,60),150258:o.r(10,141),150259:o.r(10,3),150260:o.r(10,142),150261:o.r(10,71),150262:o.r(10,53),150263:o.r(10,114),150264:o.r(10,13),150265:o.r(10,139),150266:o.r(10,120),150267:o.r(10,65),150268:o.r(10,29),150269:o.r(10,127),150270:o.r(10,129),150271:o.r(10,44),150272:o.r(10,69),150273:o.r(10,88),150274:o.r(10,33),150275:o.r(10,83),150276:o.r(10,66),150277:o.r(10,47),150278:o.r(10,105),150279:o.r(10,12),150280:o.r(10,130),150281:o.r(10,101),150282:o.r(10,93),150283:o.r(10,134),150284:o.r(10,21),150285:o.r(10,75),150286:o.r(10,78),150287:o.r(10,112),150288:o.r(10,58),150289:o.r(10,54),150290:o.r(10,117),150291:o.r(10,37),150292:o.r(10,123),150293:o.r(10,94),150294:o.r(10,26),150295:o.r(10,68),150296:o.r(10,14),150297:o.r(10,143),150298:o.r(10,144),150299:o.r(10,135),150300:o.r(10,46),150301:o.r(10,11),150302:o.r(10,138),150303:o.r(10,119),150304:o.r(10,0),150305:o.r(10,73),150306:o.r(10,56),150307:o.r(10,15),150308:o.r(10,2),150309:o.r(10,32),150310:o.r(10,38),150311:o.r(10,121),150312:o.r(10,125),150313:o.r(10,48),150314:o.r(10,137),150315:o.r(10,1),150316:o.r(10,4),150317:o.r(10,22),150318:o.r(10,5),150319:o.r(10,40),150320:o.r(10,89),150321:o.r(10,104),150322:o.r(10,76),150323:o.r(10,59),150324:o.r(10,34),150325:o.r(10,52),150326:o.r(10,91),150345:o.r(7,["Diego Santilli","Juntos por el cambio","Cristian Ritondo","Patricia Bullrich","Mauricio Macri","Jorge Macri","Mara Eugenia Vidal","Horacio Rodrguez Larreta"]),150353:o.r(7,["Animales","Mascotas"]),150429:o.r(7,["Sarah Jessica Parker","HBO Max","HBO Go","HBO","Programas de TV","La agenda de la TV","Netflix trends","Netflix","Celebrities","FOX Premium Series"]),150673:o.r(16,2),150674:o.r(16,1),150682:o.r(6,o.ps(1,"?utm_source=google&utm_medium=cpc&utm_campaign=premutive&utm_id=utm")),150965:o.r(4,4,o.e,7,[5199050089,5093191811,5267349511,4505085976,4505126048,4505103004,4505091796,4504969353,4505212313,4504990794,4505087415]),150979:o.r(19,1,231),150980:o.r(19,1,232),150981:o.r(19,1,233),150982:o.r(19,1,156),150983:o.r(19,1,159),150984:o.r(19,1,160),150985:o.r(19,1,151),150986:o.r(19,1,148),150987:o.r(19,1,153),150988:o.r(19,1,154),150989:o.r(19,1,150),150990:o.r(19,1,147),150991:o.r(19,1,149),150992:o.r(19,1,146),150993:o.r(19,1,158),150994:o.r(19,1,155),150995:o.r(19,1,152),150996:o.r(19,1,157),150997:o.r(19,2,231),150998:o.r(19,2,232),150999:o.r(19,2,233),151e3:o.r(19,2,156),151001:o.r(19,2,159),151002:o.r(19,2,160),151003:o.r(19,2,151),151004:o.r(19,2,148),151005:o.r(19,2,153),151006:o.r(19,2,154),151007:o.r(19,2,150),151008:o.r(19,2,147),151009:o.r(19,2,149),151010:o.r(19,2,146),151011:o.r(19,2,158),151012:o.r(19,2,155),151013:o.r(19,2,152),151014:o.r(19,2,157),154112:o.q(o.acq(o.cw(0,o.t,o.ge(1)),o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.isp("la_nacion_la_nacion_subscriptions","0018",!1,"154112"),o.isp("la_nacion_la_nacion_subscriptions","0019",!1,"154112")),o.isp("la_nacion_la_nacion_subscriptions","0020",!1,"154112")),o.isp("la_nacion_la_nacion_subscriptions","0021",!1,"154112")),o.isp("la_nacion_la_nacion_subscriptions","0022",!1,"154112")),o.isp("la_nacion_la_nacion_subscriptions","0023",!1,"154112")),o.isp("la_nacion_la_nacion_subscriptions","0024",!1,"154112")))),154143:o.r(0,"0034","154143","0033","154143","0032","154143","0031","154143","0030","154143","0029","154143","0028","154143","0027","154143","0025","154143","0026","154143"),154144:o.r(0,"0044","154144","0043","154144","0042","154144","0041","154144","0040","154144","0039","154144","0038","154144","0037","154144","0035","154144","0036","154144"),154145:o.r(0,"0054","154145","0053","154145","0052","154145","0051","154145","0050","154145","0049","154145","0048","154145","0047","154145","0045","154145","0046","154145"),154146:o.r(0,"0064","154146","0063","154146","0062","154146","0061","154146","0060","154146","0059","154146","0058","154146","0057","154146","0055","154146","0056","154146"),154147:o.r(0,"0074","154147","0073","154147","0072","154147","0071","154147","0070","154147","0069","154147","0068","154147","0067","154147","0065","154147","0066","154147"),154148:o.q(o.acq(o.cw(0,o.t,o.ge(1)),o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.ocq(o.isp("la_nacion_la_nacion_subscriptions","0075",!1,"154148"),o.isp("la_nacion_la_nacion_subscriptions","0076",!1,"154148")),o.isp("la_nacion_la_nacion_subscriptions","0077",!1,"154148")),o.isp("la_nacion_la_nacion_subscriptions","0078",!1,"154148")),o.isp("la_nacion_la_nacion_subscriptions","0079",!1,"154148")),o.isp("la_nacion_la_nacion_subscriptions","0080",!1,"154148")),o.isp("la_nacion_la_nacion_subscriptions","0081",!1,"154148")),o.isp("la_nacion_la_nacion_subscriptions","0082",!1,"154148")),o.isp("la_nacion_la_nacion_subscriptions","0083",!1,"154148")),o.isp("la_nacion_la_nacion_subscriptions","0084",!1,"154148")),o.isp("la_nacion_la_nacion_subscriptions","0085",!1,"154148")),o.isp("la_nacion_la_nacion_subscriptions","0086",!1,"154148")),o.isp("la_nacion_la_nacion_subscriptions","0087",!1,"154148")),o.isp("la_nacion_la_nacion_subscriptions","0088",!1,"154148")),o.isp("la_nacion_la_nacion_subscriptions","0089",!1,"154148")),o.isp("la_nacion_la_nacion_subscriptions","0090",!1,"154148")),o.isp("la_nacion_la_nacion_subscriptions","0091",!1,"154148")),o.isp("la_nacion_la_nacion_subscriptions","0092",!1,"154148")),o.isp("la_nacion_la_nacion_subscriptions","0093",!1,"154148")),o.isp("la_nacion_la_nacion_subscriptions","0094",!1,"154148")),o.isp("la_nacion_la_nacion_subscriptions","0095",!1,"154148")),o.isp("la_nacion_la_nacion_subscriptions","0096",!1,"154148")),o.isp("la_nacion_la_nacion_subscriptions","0097",!1,"154148")),o.isp("la_nacion_la_nacion_subscriptions","0098",!1,"154148")),o.isp("la_nacion_la_nacion_subscriptions","0099",!1,"154148")))),154149:o.r(1,"0001","154149"),154150:o.r(1,"0002","154150"),154151:o.r(5,"c51cecda-59b5-4af3-b3d1-1a3e3e5967cc","150965",.8415188),155230:o.q(o.tw(o.cw(0,o.o([o.os(o.cx,5,["Cocineros Argentinos","Cocineros","Gourmet","parrillas","Parrilla",241,247,246,"Picadas","Carnes","Cervezas y hamburguesas","cerveza","caf","Vinagre de vino","Vinagre blanco","vinagre blanco","vinagre","Vinagre","vinagre de vino","vino riesling","Vino blanco","vino blanco","Vino tinto","vino tinto","Vinotecas",250,"Vinos y Licores","Licor de amaretto","licor de naranja","licor","Licor de naranja","Licor","Jugo de limn","jugo de limn","Jugo de lima","jugo de lima","gaseosas","Celacos","Vegetariana","Vegana","Dieta","Cocina healthy","Cocina amateur","Cocinas","Nutricin","Etiquetado frontal de alimentos","Bebidas"]),o.af_u(["properties","classifications_watson","categories"],o.e_(3,"/food and drink/food"))]),o.ge(1)),2592e6)),155231:o.r(5,"718995e9-30ff-483e-b6b7-bf18a1b6be50","154149",.058522522),155232:o.r(5,"a4b1deb7-1325-4b32-a2c4-9216624b42e7","154150",.059801698),155233:o.r(5,"3dba7171-4f1d-42ee-8ffb-37cab7ecf354","154112",.10492203),155234:o.r(5,"93fc722e-a59e-436b-981a-8c69cb6d96f4","154143",.11378616),155235:o.r(5,"211a071d-a92d-4286-9810-7a7c7e90eac3","154144",.09504933),155236:o.r(5,"11796ef4-a23a-442f-9c80-142b34daf0cb","154145",.15829642),155237:o.r(5,"56ddc5a5-1f4b-4af2-a585-e80ac2145609","154146",.14484562),155238:o.r(5,"8cec2f09-1bdd-4481-8745-a1656b6bc47b","154147",.23383531),155239:o.r(5,"835ca9eb-059a-4351-8494-149fbb97b208","154148",.91921514),155951:o.r(3,0,o.o([o.os(o.cx,5,[250,"Tendencias gastronmicas",241,"Pasajes",246,247,"Vacaciones","Turismo","Viajes"]),o.af_u(["properties","classifications_watson","categories"],o.o([o.e_(3,"/travel"),o.e_(3,"/food and drink")]))]),o.ge(2)),156198:o.r(3,0,o.ps(1,"https://www.lanacion.com.ar/lifestyle/pachu-pena-emily-lucius-karina-gao-y-paco-almeida-cuentan-su-verdad-de-la-milanesa-nid31052023"),o.ge(1)),156314:o.r(11,o.os(o.cx,5,["Asociacin Empresaria Argentina (AEA","Empredendoras","Emprendedoras",239,245,"Foro de inversin y negocios","Terapia de negocios","Negocios con el Mundo","Negocios del futuro","Negocios del Campo","Maldita economa","Ministerio de Economa",249,"La economa del deporte","La economa del ftbol","La economa que viene","Economistas en el exterior","Economas Regionales","Economa de bolsillo","Economa cotidiana",161,"Blanqueo de capitales","Monedas y billetes","Dlares","Desdolarizacin de la economa","Dolar Turista","Deuda oficial","Debate por el presupuesto","Presupuesto 2015","Presupuesto 2014","Presupuesto 2017","Presupuesto 2018","Presupuesto 2021","Presupuesto 2019","Presupuesto 2022","Presupuesto 2023","Criptomonedas","Pagos mviles","Bolsa de Comercio de Buenos Aires","Bolsa de Cereales de Buenos Aires","Bolsa de Comercio de Rosario","Finanzas","Answer Seguros","Sancor Seguros","Seguros","Inversiones en EE.UU.",242,"Crditos hipotecarios","fraude con tarjetas","Dlar tarjeta","Fraude bancario","fraude bancario","Paro bancario",238,"Cambios en el Banco Central","Reservas del Banco Central","Reforma del Banco Central","Banco Santander","Banco Provincia","Banco Galicia","Banco Central","Banco Nacin","Banco Ciudad","Banco Macro","Banco HSBC","Banco BBVA"]),[242,"Dlar Hoy","Negocios","Economa"],o.o([o.e_(3,"/finance/investing"),o.e_(3,"/finance/investing/funds"),o.e_(3,"/finance/bank"),o.e_(3,"/finance/financial news")])),156318:o.r(11,o.pc_(5,"Entretenimiento"),["Revista HOLA!","Espectculos","Personajes"],o.e_(3,"/art and entertainment")),156769:o.r(2,o.scq(o.cw(1,o.pc(["aggregations","SegmentEntry"],155231)),o.cw(2,o.pe(6,155231)),o.ge(1)),0,o.o([o.os(o.cx,5,["Lifestyle","Estilo Hola!","desfiles","Tendencias","Perfumes","perfumes","Semana de la Moda en Pars","LN Moda","Moda"]),o.os(o.s,0,[7,"espectculos",8,"natacin",9,10,11,12]),o.af_u(["properties","classifications_watson","categories"],o.e_(3,"/style and fashion"))]),"SlotViewable",o.os(o.e,7,[4505206961,4505197610])),156957:o.r(3,4,o.pe(7,4505209598),o.ge(1)),157021:o.r(2,o.cw(0,o.pe(10,"Argentina"),o.ge(1)),3,o.os(o.w,8,["Shopify","tiendamia","easy.com.ar","tarjetacencosud.com.ar","disco.com.ar","Jumbo","musimundo.com","MercadoLibre SRL","mercadolibre.com.ar",251,"Fravega","fravega.com",248,"Mercado Libre"]),0,o.af_u(["properties","classifications_watson","categories"],o.e_(3,"/shopping"))),157045:o.q(o.acq(o.scq(o.cw(1,o.pc(["aggregations","SegmentEntry"],155232)),o.cw(2,o.pe(6,155232)),o.ge(1)),o.ocq(o.scq(o.cw(1,o.pc(["aggregations","SegmentEntry"],155233)),o.cw(2,o.pe(6,155233)),o.ge(1)),o.scq(o.cw(1,o.pc(["aggregations","SegmentEntry"],155234)),o.cw(2,o.pe(6,155234)),o.ge(1))))),157052:o.q(o.vq(o.cw(0,o.os(o.w,11,[243,237,244]),o.ge(1)))),157053:o.r(6,o.o([o.os(o.cx,4,["Andrs Hatum","The Economist","Alfredo Sainz","Martina Rua","Sebastin Campanario","Guillermo Oliveto"]),o.os(o.cx,5,[245,"Tecnologa",249,"Empleos",239,238])])),157071:o.r(15,o.as(o.x,11,[243,237,244])),157548:o.r(4,3,o.w,8,["Industrial and Commercial Bank of China","ripple.com","Ripple","www.americanexpress.com","American Express Company","americanexpress.com","American Express","Visa","amex.com","Eminent Inc",248,"Santander Group",251,"HSBC Holdings","hsbc.com.ar","BBVA Group","BBVA en Argentina","bbva.com.ar","BBVA","Banco Supervielle","supervielle.com.ar"]),158131:o.r(3,0,o.af_i(["properties","classifications_watson","categories"],o.e_(3,"/education")),o.ge(1)),158191:o.r(5,"4ab0ac50-b0a4-40f7-9f15-4c8eff1fe26f","157548",.7703689),158320:o.q(o.ocq(o.ocq(o.cw(0,o.pe(0,"Salud"),o.ge(1)),o.cw(3,o.os(o.w,8,["eucerin.com.br","hawaiiantropiclatinoamerica.com","vichy.com.uy","vichy.ca","Avon Products","nivea.com.br","nivea.es","nivea.com.mx","nivea.com"]),o.ge(1))),o.cw(0,o.af_u(["properties","classifications_watson","categories"],o.e_(3,"/style and fashion/beauty")),o.ge(1))))}||{},queriesByEvent:{"!UpdateLookalikeModels":["154151","155231","155232","155233","155234","155235","155236","155237","155238","155239","158191"],"!UpdateSecondPartyData":["154112","154143","154144","154145","154146","154147","154148","154149","154150"],Pageview:["139301","148080","149283","149284","149285","149287","149288","149289","149290","149291","149292","149294","149295","149296","149297","149588","149590","149591","149592","149593","149594","149595","149596","149597","149598","149599","149600","149601","149602","149603","149604","149605","149606","149607","149608","149609","149610","149611","149612","149613","149614","149615","149616","149617","149618","149619","149621","149622","149623","149624","149625","149626","149627","149628","149629","149630","149631","149632","149633","149634","149635","149636","149637","149638","149639","149640","149709","149710","149711","149712","149713","149714","149715","149716","149717","149718","149719","149720","149721","149722","149723","149724","149725","149726","149727","149728","149729","149730","149731","149732","149733","149734","149735","149736","149737","149738","149739","149740","149741","149742","149743","149744","149745","149746","149747","149748","149749","149750","149751","149752","149753","149754","149755","149756","149757","149758","149759","149760","149761","149762","149763","149764","149765","149766","149767","149768","149769","149770","149771","149772","149773","149774","149775","149776","149777","149778","149779","149780","149781","149782","149783","149784","149785","149786","149787","149788","149789","149790","149791","149792","149793","149794","149795","149796","149797","149798","149799","149800","149801","149802","149803","149804","149805","149806","149807","149808","149809","149810","149811","149812","149813","149814","149815","149816","149817","149818","149819","149820","149821","149822","149823","149824","149825","149826","149827","149828","149829","149830","149831","149832","149833","149834","149835","149836","149837","149838","149839","149840","149841","149842","149843","149844","149845","149846","149847","149848","149849","149850","149851","149852","149853","149854","149855","149856","149857","149858","149859","149860","149861","149862","149863","149864","149865","149866","149867","149868","149869","149870","149871","149872","149873","149874","149875","149876","149877","149878","149879","149880","149881","149882","149883","149884","149885","149886","149887","149888","149889","149890","149891","149892","149893","149894","149895","149896","149897","149898","149899","149900","149901","149902","149903","149904","149905","149906","149907","149908","149909","149910","149911","149912","149913","149914","149915","149916","149917","149918","149919","149920","149921","149922","149923","149924","149925","149926","149927","149928","149929","149930","149931","149932","149933","149934","149935","149936","149937","149938","149939","149940","149941","149942","149943","149944","149945","149946","149947","149948","149949","149950","149951","149952","149953","149954","149955","149956","149957","149958","149959","149960","149961","149962","149963","149964","149965","149966","149967","149968","149969","149970","149971","149972","149973","149974","149975","149976","149977","149978","149979","149980","149981","149982","149983","149984","149985","149986","149987","149988","149989","149990","149991","149992","149993","149994","149995","149996","149997","149998","149999","150000","150001","150002","150003","150004","150005","150006","150007","150008","150009","150010","150011","150012","150013","150014","150015","150016","150017","150018","150019","150020","150021","150022","150023","150024","150025","150026","150027","150028","150029","150030","150031","150032","150033","150034","150035","150036","150037","150038","150039","150040","150041","150042","150043","150044","150045","150046","150047","150048","150049","150050","150051","150052","150053","150054","150055","150056","150057","150058","150059","150060","150061","150062","150063","150064","150065","150066","150067","150068","150069","150070","150071","150072","150073","150074","150075","150076","150077","150078","150079","150080","150081","150082","150083","150084","150085","150086","150087","150088","150089","150090","150091","150092","150093","150094","150095","150096","150097","150098","150099","150100","150101","150102","150103","150104","150105","150106","150107","150108","150109","150110","150111","150112","150113","150114","150115","150116","150117","150118","150119","150120","150121","150122","150123","150124","150125","150126","150127","150128","150129","150130","150131","150132","150133","150134","150135","150136","150137","150138","150139","150140","150141","150142","150143","150144","150145","150146","150147","150148","150149","150150","150151","150152","150153","150154","150155","150156","150157","150158","150159","150160","150161","150162","150163","150164","150165","150166","150167","150168","150169","150170","150171","150172","150173","150174","150175","150176","150177","150178","150179","150180","150181","150182","150183","150184","150185","150186","150187","150188","150189","150190","150191","150192","150193","150194","150195","150196","150197","150198","150199","150200","150201","150202","150203","150204","150205","150206","150207","150208","150209","150210","150211","150212","150213","150214","150215","150216","150217","150218","150219","150220","150221","150222","150223","150224","150225","150226","150227","150228","150229","150230","150231","150232","150233","150234","150235","150236","150237","150238","150239","150240","150241","150242","150243","150244","150245","150246","150247","150248","150249","150250","150251","150252","150253","150254","150255","150256","150257","150258","150259","150260","150261","150262","150263","150264","150265","150266","150267","150268","150269","150270","150271","150272","150273","150274","150275","150276","150277","150278","150279","150280","150281","150282","150283","150284","150285","150286","150287","150288","150289","150290","150291","150292","150293","150294","150295","150296","150297","150298","150299","150300","150301","150302","150303","150304","150305","150306","150307","150308","150309","150310","150311","150312","150313","150314","150315","150316","150317","150318","150319","150320","150321","150322","150323","150324","150325","150326","150345","150353","150429","150673","150674","150682","150979","150980","150981","150982","150983","150984","150985","150986","150987","150988","150989","150990","150991","150992","150993","150994","150995","150996","150997","150998","150999","151000","151001","151002","151003","151004","151005","151006","151007","151008","151009","151010","151011","151012","151013","151014","154112","154143","154144","154145","154146","154147","154148","154149","154150","155230","155951","156198","156314","156318","156769","157021","157052","157053","157071","158131","158320"],PageviewComplete:["156769","157045"],PrebidBid:["157021","157548","158320"],SegmentEntry:["156769","157045"],SegmentExit:[],SlotClicked:["150965","156957"],SlotViewable:["156769"]}||{}}}();function _t(r){return((r,n)=>A(yt(r,n),(n=>Object.assign(Object.assign({},n),{userId:r.userId}))))(r,vt)}function ht(r,n){const t=A((r=>Zn(r,((r,n)=>n.state?F({[n.checksum]:n.state}):U)))(r),vn,an((r=>i(new Map)))),e=A(vn(n),an((r=>i(new Map))));return A(function(r,n){return Jn("delta",r,n)}(t,e),(r=>yn(r)))||{}}!function(r){const n=self;function t(r,t,e,o){function i(t){if("function"!=typeof n.postMessage)return r.ports[0].postMessage(t);n.postMessage(t)}if(!e)return i([t,null,o]);"undefined"!=typeof console&&"error"in console&&console.error("Worker caught an error:",e),i([t,e])}n.addEventListener("message",(function(n){if(e=n,!Array.isArray(e.data)||2!==e.data.length)return;var e;const o=n.data,[i,u]=o;if("function"==typeof r)return function(r,n,e,o){const i=function(r,n){try{return{res:r(n)}}catch(r){return{err:r}}}(n,o);return Boolean(null===(u=i)||void 0===u?void 0:u.err)?t(r,e,i.err):!(a=i.res)||"object"!=typeof a&&"function"!=typeof a||"function"!=typeof a.then?t(r,e,null,i.res):void i.res.then((function(n){t(r,e,null,n)}),(function(n){t(r,e,n)}));var u,a}(n,r,i,u);t(n,i,new Error("Please pass a function into register()."))}))}((r=>"QLE"===r.engine?_t(r):function(r){switch(r.type){case"delta":return ht(r.stateMap,r.lastSentStateMapWithChecksum);case"noop":return{}}}(r)))})();',"Worker",void 0,void 0)}},477:e=>{e.exports=function(e,t,r,n){var o=self||window;try{try{var i;try{i=new o.Blob([e])}catch(t){(i=new(o.BlobBuilder||o.WebKitBlobBuilder||o.MozBlobBuilder||o.MSBlobBuilder)).append(e),i=i.getBlob()}var s=o.URL||o.webkitURL,a=s.createObjectURL(i),u=new o[t](a,r);return s.revokeObjectURL(a),u}catch(n){return new o[t]("data:application/javascript,".concat(encodeURIComponent(e)),r)}}catch(e){if(!n)throw Error("Inline worker is not supported");return new o[t](n,r)}}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{var e=__webpack_require__(5e3),t=__webpack_require__(3735),r=__webpack_require__(6341),n=__webpack_require__(7927),o=__webpack_require__(2197),i=__webpack_require__(6567),s=__webpack_require__(4673),a=__webpack_require__(1500),u=__webpack_require__(2652),c=__webpack_require__(6308);class d{constructor(e,t){this.config=e,this.logger=t,this.defaultReplacementMap=this.filterReplacementMap(this.config.defaultMap),this.replacementMap=this.setReplacementMap(this.config.replacementMap)}get getReplacementMap(){return this.replacementMap}setReplacementMap(e){return this.replacementMap=Object.assign(Object.assign({},this.defaultReplacementMap),this.filterReplacementMap(e)),this.logger.debug(`enrichers[${this.config.name}]: replacement map updated`,this.getReplacementMap),this.getReplacementMap}}class l extends d{filterReplacementMap(e){return(0,t.zG)(e,u.qh,(0,a.DZ)((e=>{const[,t]=e;return(0,c.t)(t)?i.YP:(0,i.G)(e)})),(0,a.u4)({},((e,t)=>{let[r,n]=t;return void 0===n||(e[r]=n),e})))}}class f extends d{filterReplacementMap(e){return e}}const p="geoip",g="enricher:geoip",_={},h={include_geo:(null==_?void 0:_.include_geo)||!0,include_isp:(null==_?void 0:_.include_isp)||!0,include_ip_hash:(null==_?void 0:_.include_ip_hash)||!0,include_ip:(null==_?void 0:_.include_ip)||!1},m=(e,r)=>{var i;const{$ip_geo_info_continent:a,$ip_address:u,$ip_address_hash:c}=s.U,d={$ip_geo_info_continent:a,$ip_address:u,$ip_geo_info:{city:s.U.$ip_geo_info_city,continent:s.U.$ip_geo_info_continent,country:s.U.$ip_geo_info_country,postal_code:s.U.$ip_geo_info_postal_code,province:s.U.$ip_geo_info_province},$ip_address_hash:c,$ip_isp_info:{autonomous_system_number:0,isp:s.U.$ip_isp_info_isp,autonomous_system_organization:s.U.$ip_isp_info_autonomous_system_organization,organization:s.U.$ip_isp_info_organization}},l=(0,t.zG)({$ip_geo_info:null==e?void 0:e.geo_info,$ip_geo_info_continent:null===(i=null==e?void 0:e.geo_info)||void 0===i?void 0:i.continent,$ip_isp_info:null==e?void 0:e.isp_info,$ip_address:null==e?void 0:e.ip,$ip_address_hash:null==e?void 0:e.ip_hash},n.hX(o.ff((e=>void 0===e))));return new f({name:p,defaultMap:d,replacementMap:l},r)},v=e=>{let{clientContext:t,api:r,permutiveData:n,metrics:o,sessionManager:i,enrichers:s,network:a,logger:u,config:c}=e;const d=e=>{e.isp_info&&t.updateContext(["isp",e.isp_info.isp],["organization",e.isp_info.organization],["autonomous_system_number",e.isp_info.autonomous_system_number],["autonomous_system_organization",e.isp_info.autonomous_system_organization]),e.geo_info&&t.updateContext(["continent",e.geo_info.continent],["country",e.geo_info.country],["city",e.geo_info.city],["province",e.geo_info.province],["postal_code",e.geo_info.postal_code])},l=n.getData(g);return l&&l.session_id===i.getSessionId()?(d(l.data),s.register(m(l.data,u)),Promise.resolve()):(u.debug("enrichers[geoip]: start HTTP request"),b(r,o,c,h).then((e=>(u.debug("enrichers[geoip]: end HTTP request"),d(e),n.setData(g,{session_id:i.getSessionId(),data:e}),e))).catch((e=>(r.reportError(`Error while registering the geoip enricher: got ${e}`),null))).then((e=>{s.register(m(e,u))})))},b=(e,t,r,n)=>{const o=[];return n.include_geo&&o.push(["include","geo"]),n.include_isp&&o.push(["include","isp"]),n.include_ip&&o.push(["include","ip"]),n.include_ip_hash&&o.push(["include","ip_hash"]),e.reqWithMetrics(t,"sdk_http_geoip_seconds",{url:e.urls.getEndpointUrl("/geoip",(0,i.G)(r.apiVersion),o),method:"GET",contentType:"text/plain",dataType:"json",withCredentials:!1})},y=()=>(0,r.B)({load:v});var w=__webpack_require__(655),E=__webpack_require__(2751);const k="watson";function P(e){if(!e)return[];const t=(0,a.xH)(e.filter(Boolean).map((e=>(e=>{const t=e.split("/").filter((e=>e));return t.map(((e,r)=>"/"+t.slice(0,r+1).join("/")))})(e.label))));return(0,a.jj)(E.Eq)(t)}const D=e=>{let{api:t,clientContext:r,config:n,enrichers:o,logger:i,metrics:s}=e;i.debug("enrichers[watson]: is enabled",n.watson.enabled);const a=n.watson.enabled?()=>(0,w.mG)(void 0,void 0,void 0,(function*(){const e=yield r.getClient();i.debug("enrichers[watson]: start HTTP request");const o=yield S(t,s,n,e.url);return i.debug("enrichers[watson]: end HTTP request",o),o})):()=>(0,w.mG)(void 0,void 0,void 0,(function*(){return i.debug("enrichers[watson]: stubbing response"),null})),u=a().then((e=>{r.updateContext([k,e||void 0]),o.register(((e,t)=>{var r,n,o,i;const s={$alchemy_concepts:null==e?void 0:e.concepts,$alchemy_document_emotion:null===(n=null===(r=null==e?void 0:e.emotion)||void 0===r?void 0:r.document)||void 0===n?void 0:n.emotion,$alchemy_document_sentiment:null===(o=null==e?void 0:e.sentiment)||void 0===o?void 0:o.document,$alchemy_entities:null==e?void 0:e.entities,$alchemy_entity_names:null===(i=null==e?void 0:e.entities)||void 0===i?void 0:i.map((e=>e.text)),$alchemy_keywords:null==e?void 0:e.keywords,$alchemy_taxonomy:null==e?void 0:e.taxonomy,$alchemy_taxonomy_labels:P(null==e?void 0:e.taxonomy),$taxonomy_labels:P(null==e?void 0:e.taxonomy)};return new l({name:k,defaultMap:{$alchemy_concepts:[],$alchemy_document_emotion:null,$alchemy_document_sentiment:null,$alchemy_entities:[],$alchemy_entity_names:[],$alchemy_keywords:[],$alchemy_taxonomy:[],$alchemy_taxonomy_labels:[],$taxonomy_labels:[]},replacementMap:s},t)})(e,i))}));return u.catch((e=>{i.error(`Error while registering the watson enricher: got ${e}`),s.track({name:"sdk_watson_classification_fail_count",value:1,labels:{}})})),u},S=(e,t,r,n)=>e.reqWithMetrics(t,"sdk_http_watson_seconds",{url:e.urls.getEndpointUrl("/watson",(0,i.G)(r.apiVersion)),method:"POST",contentType:"text/plain",dataType:"json",withCredentials:!1,payload:{url:n,classify:!0}}),M=()=>(0,r.B)({load:D});var I,O=__webpack_require__(4922);I=O.f,y(),M(),I().then((0,e.g_)((e=>console.warn(`Permutive was not initialized. ${e}`)),t.Q1))})()})();